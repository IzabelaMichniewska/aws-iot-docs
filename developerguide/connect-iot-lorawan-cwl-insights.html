<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" ng-app="AWSDocsDocPageApp">
   <head>
      <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
      <title>Use CloudWatch Insights to filter logs for AWS IoT Core for LoRaWAN - AWS IoT Core</title>
      <meta name="viewport" content="width=device-width,initial-scale=1" />
      <meta name="assets_root" content="assets" />
      <meta name="target_state" content="connect-iot-lorawan-cwl-insights" />
      <meta name="default_state" content="connect-iot-lorawan-cwl-insights" />
      <link rel="icon" type="image/ico" href="/assets/images/favicon.ico" />
      <link rel="shortcut icon" type="image/ico" href="/assets/images/favicon.ico" />
      <link rel="canonical" href="https://docs.aws.amazon.com/iot/latest/developerguide/connect-iot-lorawan-cwl-insights.html" />
      <meta name="description" content="While you can use CloudWatch Logs to create filter expressions, we recommend that you use CloudWatch insights to more effectively create and use filter expressions depending on your application." />
      <meta name="deployment_region" content="IAD" />
      <meta name="product" content="AWS IoT Core" />
      <meta name="guide" content="Developer Guide" />
      <meta name="locales" content="de_de:Deutsch/en_us:English/es_es:Español/fr_fr:Français/it_it:Italiano/ja_jp:日本語/ko_kr:한국어/pt_br:Português/zh_cn:中文 (简体)/zh_tw:中文 (繁體)" />
      <meta name="abstract" content="AWS IoT provides secure, bi-directional communication between Internet-connected devices such as sensors, actuators, embedded micro-controllers, or smart appliances and the AWS Cloud. This enables you to collect telemetry data from multiple devices, and store and analyze the data. You can also create applications that enable your users to control these devices from their phones or tablets." />
      <meta name="guide-locale" content="en_us" />
      <meta name="tocs" content="toc-contents.json" />
      <meta name="feedback-item" content="IoT Docs" />
      <meta name="this_doc_product" content="AWS IoT Core" />
      <meta name="this_doc_guide" content="Developer Guide" />
      <link href="assets/css/vendor4.css" rel="stylesheet" />
      <link href="assets/css/awsdocs-common.css" rel="stylesheet" /><script type="text/javascript" src="assets/js/vendor3.js" defer=""></script><script type="text/javascript" src="assets/js/vendor4.js" defer=""></script><script type="text/javascript" src="assets/js/vendor1.js" defer=""></script><script type="text/javascript" src="assets/js/awsdocs-common.js" defer=""></script><script type="text/javascript" src="assets/js/awsdocs-doc-app.js" defer=""></script></head>
   <body class="awsdocs awsui">
      <div class="awsdocs-container">
         <awsdocs-header></awsdocs-header>
         <awsui-app-layout id="app-layout" class="awsui-util-no-gutters" ng-controller="ContentController as $ctrl" header-selector="awsdocs-header" navigation-hide="false" navigation-width="$ctrl.navWidth" navigation-open="$ctrl.navOpen" navigation-change="$ctrl.onNavChange($event)" tools-hide="$ctrl.hideTools" tools-width="$ctrl.toolsWidth" tools-open="$ctrl.toolsOpen" tools-change="$ctrl.onToolsChange($event)">
            <div id="guide-toc" dom-region="navigation">
               <awsdocs-toc></awsdocs-toc>
            </div>
            <div id="main-column" dom-region="content" tabindex="-1">
               <awsdocs-view class="awsdocs-view">
                  <div id="awsdocs-content">
                     <head>
                        <title>Use CloudWatch Insights to filter logs for AWS IoT Core for LoRaWAN - AWS IoT Core</title>
                        <meta name="pdf" content="iot-dg.pdf#connect-iot-lorawan-cwl-insights" />
                        <meta name="kindle" content="https://www.amazon.com/dp/B07JBRCWWZ" />
                        <meta name="github" content="https://github.com/awsdocs/aws-iot-docs/tree/master/developerguide/connect-iot-lorawan-cwl-insights.md" />
                        <meta name="forums" content="http://forums.aws.amazon.com/forum.jspa?forumID=210" />
                        <meta name="feedback" content="https://docs.aws.amazon.com/forms/aws-doc-feedback?hidden_service_name=IoT%20Docs&amp;topic_url=http://docs.aws.amazon.com/en_us/iot/latest/developerguide/connect-iot-lorawan-cwl-insights.html" />
                        <meta name="feedback-yes" content="feedbackyes.html?topic_url=http://docs.aws.amazon.com/en_us/iot/latest/developerguide/connect-iot-lorawan-cwl-insights.html" />
                        <meta name="feedback-no" content="feedbackno.html?topic_url=http://docs.aws.amazon.com/en_us/iot/latest/developerguide/connect-iot-lorawan-cwl-insights.html" />
                        <meta name="keywords" content="AWS IoT,IoT,Internet of Things" />
                     </head>
                     <body>
                        <div id="main">
                           <div style="display: none"><a href="iot-dg.pdf#connect-iot-lorawan-cwl-insights" target="_blank" rel="noopener noreferrer" title="Open PDF"></a><a target="_blank" rel="noopener noreferrer" href="https://www.amazon.com/dp/B07JBRCWWZ" title="Open Kindle"></a><a href="https://github.com/awsdocs/aws-iot-docs/tree/master/developerguide/connect-iot-lorawan-cwl-insights.md" target="_blank" rel="noopener noreferrer" title="Edit this page on GitHub"></a></div>
                           <div id="breadcrumbs" class="breadcrumb"><a href="http://aws.amazon.com">AWS</a><a href="/index.html">Documentation</a><a href="/iot/index.html">AWS IoT Core</a><a href="what-is-aws-iot.html">Developer Guide</a></div>
                           <div id="page-toc-src"><a href="#connect-iot-lorawan-viewing-logs">Viewing AWS IoT logs in
                                 the CloudWatch Logs insights console</a><a href="#connect-iot-lorawan-insights-resource-filter">Create useful 
                                 queries to filter and gain insights for AWS IoT Core for LoRaWAN</a><a href="#connect-iot-lorawan-insights-next-steps">Next steps</a></div>
                           <div id="main-content" class="awsui-util-container">
                              <div id="main-col-body">
                                 <awsdocs-language-banner data-service="$ctrl.pageService"></awsdocs-language-banner>
                                 <h1 class="topictitle" id="connect-iot-lorawan-cwl-insights">Use CloudWatch Insights to
                                    filter logs for AWS IoT Core for LoRaWAN
                                 </h1>
                                 <div class="awsdocs-page-header-container">
                                    <awsdocs-page-header></awsdocs-page-header>
                                    <awsdocs-filter-selector id="awsdocs-filter-selector"></awsdocs-filter-selector>
                                 </div>
                                 <p>While you can use CloudWatch Logs to create filter expressions, we recommend that
                                    you use CloudWatch insights to more effectively create and use filter expressions
                                    depending on your application.
                                 </p>
                                 <p>We recommend that you first use CloudWatch <b>Log groups</b> to
                                    learn about the different types of resources, its event types, and log levels
                                    that you can use to view log entries in the console. You can then use the
                                    examples of some filter expressions on this page as a reference to create your
                                    own filters for your AWS IoT Core for LoRaWAN resources.
                                 </p>
                                 
                                 <h2 id="connect-iot-lorawan-viewing-logs">Viewing AWS IoT logs in
                                    the CloudWatch Logs insights console
                                 </h2>
                                 
                                 <p>In the <a href="https://console.aws.amazon.com/cloudwatch" rel="noopener noreferrer" target="_blank"><span>CloudWatch console</span><awsui-icon class="awsdocs-link-icon" name="external"></awsui-icon></a>,
                                    CloudWatch logs appear in a log group named <b>/aws/iotwireless</b>. For more information 
                                    about CloudWatch Logs, see <a href="https://docs.aws.amazon.com/AmazonCloudWatch/latest/DeveloperGuide/WhatIsCloudWatchLogs.html">CloudWatch Logs</a>.
                                 </p>
                                 
                                 <div class="procedure">
                                    <p class="title"><b>To view your AWS IoT logs in the CloudWatch console</b></p>
                                    <p>Navigate to the <a href="https://console.aws.amazon.com/cloudwatch" rel="noopener noreferrer" target="_blank"><span>CloudWatch console</span><awsui-icon class="awsdocs-link-icon" name="external"></awsui-icon></a> and choose 
                                       <b>Logs Insights</b> in the navigation pane.
                                    </p>
                                    <ol>
                                       <li>
                                          
                                          <p>In the <b>Filter</b> text box, enter
                                             <code class="userinput">/aws/iotwireless</code> , and then choose the
                                             <code class="code">/aws/iotwireless</code> Logs Insights.
                                          </p>
                                          
                                       </li>
                                       <li>
                                          
                                          <p>To see a complete list of log groups, choose <b>Select
                                                log group(s)</b>. To look at log groups for
                                             AWS IoT Core for LoRaWAN, choose <code class="code">/aws/iotwireless</code>.
                                          </p>
                                          
                                       </li>
                                    </ol>
                                 </div>  
                                 
                                 <p>You can now start entering queries to filter the log groups. The
                                    following sections contain some useful queries that'll help you gain
                                    insights about your resource metrics.
                                 </p>  
                                  
                                 
                                 <h2 id="connect-iot-lorawan-insights-resource-filter">Create useful 
                                    queries to filter and gain insights for AWS IoT Core for LoRaWAN
                                 </h2>  
                                 
                                 <p>You can use filter expressions to show additional helpful log
                                    information with CloudWatch Insights. Following shows some sample queries:
                                 </p>
                                  
                                 
                                 <h3 id="connect-iot-lorawan-insights-gateway-filter">Show only 
                                    logs for specific resource types
                                 </h3>  
                                 
                                 <p>You can create a query that'll help you show logs for only
                                    specific resource types, such as a LoRaWAN gateway or a Sidewalk device.
                                    For example, to filter logs to show only messages for Sidewalk devices,
                                    you can enter the following query and choose <b>Run
                                       query</b>. To save this query, choose
                                    <b>Save</b>.
                                 </p>
                                  
                                 <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class="">fields @message
| filter @message like /Sidewalk/</code></pre>
                                 <p>After the query runs, you'll see the results in the
                                    <b>Logs</b> tab, which shows the timestamps for logs
                                    related to Sidewalk devices in your account. You'll also see a bar graph,
                                    which will show the time at which the events occurred, if there were such
                                    events that occurred previously related to your Sidewalk device. Following
                                    shows an example if you expand one of the results in the
                                    <b>Logs</b> tab. Alternatively, if you want to
                                    troubleshoot errors related to Sidewalk devices, you can add another filter
                                    that sets the log level to <code class="code">ERROR</code> and show only error
                                    information. 
                                 </p>
                                 <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class="nohighlight"><b>Field</b>	          <b>Value</b>
@ingestionTime      1623894967640
@log	             954314929104:/aws/iotwireless
@logStream	   WirelessDevice-Downlink_Data-715adccfb34170214ec2f6667ddfa13cb5af2c3ddfc52fbeee0e554a2e780bed
@message	     <span>{</span>                    
                    "resource": "WirelessDevice",
                    "wirelessDeviceId": "3b058d05-4e84-4e1a-b026-4932bddf978d",
                    "wirelessDeviceType": "Sidewalk",
                    "devEui": "feffff000000011a",
                    "event": "Downlink_Data",
                    "logLevel": "INFO",
                    "messageId": "7e752a10-28f5-45a5-923f-6fa7133fedda",
                    "message": "Successfully sent downlink message. Amazon SidewalkId = 2000000006, Sequence number = 0"
                    }
@timestamp          1623894967640
devEui	           feffff000000011a
event	        Downlink_Data
logLevel            INFO
message	          Successfully sent downlink message. Amazon SidewalkId = 2000000006, Sequence number = 0
messageId	    7e752a10-28f5-45a5-923f-6fa7133fedda
resource	     WirelessDevice
wirelessDeviceId    3b058d05-4e84-4e1a-b026-4932bddf978d
wirelessDeviceType  Sidewalk</code></pre>
                                  
                                 <h3 id="connect-iot-lorawan-insights-gateway-filter">Show
                                    specific messages or events
                                 </h3>  
                                 
                                 <p>You can create a query that'll help you show specific messages and
                                    observe when the events occurred. For example, if you want to see when
                                    your downlink message was sent from your LoRaWAN wireless device, you
                                    can enter the following query and choose <b>Run
                                       query</b>. To save this query, choose
                                    <b>Save</b>.
                                 </p>
                                 <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class="">filter @message like /Downlink message sent/</code></pre>
                                 <p>After the query runs, you'll see the results in the
                                    <b>Logs</b> tab, which shows the timestamps when the
                                    downlink message was successfully sent to your wireless device. You'll
                                    also see a bar graph, which will show the time at which a downlink
                                    message was sent, if there were downlink messages were previously sent
                                    to your wireless device. Following shows an example if you expand one of
                                    the results in the <b>Logs</b> tab. Alternatively, if a
                                    downlink message wasn't sent, you can modify the query to display only
                                    results for when the message wasn't sent so that you can debug the
                                    issue.
                                 </p>
                                 <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class="nohighlight"><b>Field</b>	          <b>Value</b>
@ingestionTime      1623884043676
@log	             954314929104:/aws/iotwireless
@logStream	   WirelessDevice-Downlink_Data-42d0e6d09ba4d7015f4e9756fcdc616d401cd85fe3ac19854d9fbd866153c872
@message	     <span>{</span>
                    "timestamp": "2021-06-16T22:54:00.770493863Z",
                    "resource": "WirelessDevice",
                    "wirelessDeviceId": "3b058d05-4e84-4e1a-b026-4932bddf978d",
                    "wirelessDeviceType": "LoRaWAN",
                    "devEui": "feffff000000011a",
                    "event": "Downlink_Data",
                    "logLevel": "INFO",
                    "messageId": "7e752a10-28f5-45a5-923f-6fa7133fedda",
                    "message": "Downlink message sent. MessageId: 7e752a10-28f5-45a5-923f-6fa7133fedda"
                    }
@timestamp          1623884040858
devEui	           feffff000000011a
event	        Downlink_Data
logLevel            INFO
message	          Downlink message sent. MessageId: 7e752a10-28f5-45a5-923f-6fa7133fedda
messageId	    7e752a10-28f5-45a5-923f-6fa7133fedda
resource	     WirelessDevice
timestamp	    2021-06-16T22:54:00.770493863Z
wirelessDeviceId    3b058d05-4e84-4e1a-b026-4932bddf978d
wirelessDeviceType  LoRaWAN</code></pre>
                                  
                                  
                                 <h2 id="connect-iot-lorawan-insights-next-steps">Next steps</h2>
                                 
                                 <p>You've learned how to use CloudWatch Insights to gain more helpful
                                    information by creating queries to filter log messages. You can combine some
                                    of the filters described previously and design your own filters depending on
                                    the resource you're monitoring. For more information about using CloudWatch
                                    Insights, see <a href="https://docs.aws.amazon.com/AmazonCloudWatch/latest/logs/AnalyzingLogData">Analyzing log data
                                       with CloudWatch Insights</a>.
                                 </p>
                                 
                                 <p>After you've created queries with CloudWatch Insights, if you've saved them,
                                    you can load and run the saved queries as needed. Alternatively, if you
                                    click the <b>History</b> button in the CloudWatch <b>Logs
                                       Insights</b> console, you can view the previously run queries and
                                    rerun them as needed, or further modify them by creating additional
                                    queries.
                                 </p>
                                 
                                 <awsdocs-copyright class="copyright-print"></awsdocs-copyright>
                                 <awsdocs-thumb-feedback right-edge="{{$ctrl.thumbFeedbackRightEdge}}"></awsdocs-thumb-feedback>
                              </div>
                              <noscript>
                                 <div>
                                    <div>
                                       <div>
                                          <div id="js_error_message">
                                             <p><img src="https://d1ge0kk1l5kms0.cloudfront.net/images/G/01/webservices/console/warning.png" alt="Warning" /> <strong>Javascript is disabled or is unavailable in your
                                                   browser.</strong></p>
                                             <p>To use the Amazon Web Services Documentation, Javascript must be
                                                enabled. Please refer to your browser's Help pages for instructions.
                                             </p>
                                          </div>
                                       </div>
                                    </div>
                                 </div>
                              </noscript>
                              <div id="main-col-footer" class="awsui-util-font-size-0">
                                 <div id="doc-conventions"><a target="_top" href="/general/latest/gr/docconventions.html">Document Conventions</a></div>
                                 <div class="prev-next">
                                    <div id="previous" class="prev-link" accesskey="p" href="./connect-iot-lorawan-wireless-log-entries.html">Log entries for
                                       wireless gateways and wireless device resources
                                    </div>
                                    <div id="next" class="next-link" accesskey="n" href="./connect-iot-lorawan-security.html">Data security with AWS IoT Core for LoRaWAN</div>
                                 </div>
                              </div>
                              <awsdocs-page-utilities></awsdocs-page-utilities>
                           </div>
                           <div id="quick-feedback-yes" style="display: none;">
                              <div class="title">Did this page help you? - Yes</div>
                              <div class="content">
                                 <p>Thanks for letting us know we're doing a good
                                    job!
                                 </p>
                                 <p>If you've got a moment, please tell us what we did right
                                    so we can do more of it.
                                 </p>
                                 <p>
                                    <awsui-button id="fblink" target="_blank" text="Feedback" click="linkClick($event)" href="https://docs.aws.amazon.com/forms/aws-doc-feedback?hidden_service_name=IoT Docs&amp;topic_url=https://docs.aws.amazon.com/en_us/iot/latest/developerguide/connect-iot-lorawan-cwl-insights.html"></awsui-button>
                                 </p>
                              </div>
                           </div>
                           <div id="quick-feedback-no" style="display: none;">
                              <div class="title">Did this page help you? - No</div>
                              <div class="content">
                                 <p>Thanks for letting us know this page needs work. We're
                                    sorry we let you down.
                                 </p>
                                 <p>If you've got a moment, please tell us how we can make
                                    the documentation better.
                                 </p>
                                 <p>
                                    <awsui-button id="fblink" target="_blank" text="Feedback" click="linkClick($event)" href="https://docs.aws.amazon.com/forms/aws-doc-feedback?hidden_service_name=IoT Docs&amp;topic_url=https://docs.aws.amazon.com/en_us/iot/latest/developerguide/connect-iot-lorawan-cwl-insights.html"></awsui-button>
                                 </p>
                              </div>
                           </div>
                        </div>
                     </body>
                  </div>
               </awsdocs-view>
               <div class="page-loading-indicator" id="page-loading-indicator">
                  <awsui-spinner size="large"></awsui-spinner>
               </div>
            </div>
            <div id="tools-panel" dom-region="tools">
               <awsdocs-tools-panel id="awsdocs-tools-panel"></awsdocs-tools-panel>
            </div>
         </awsui-app-layout>
         <awsdocs-cookie-banner class="doc-cookie-banner"></awsdocs-cookie-banner>
         <!--
                SiteCatalyst code version: H.25.2.
                Copyright 1996-2012 Adobe, Inc. All Rights Reserved
                More info available at http://www.omniture.com
            --><script language="JavaScript" type="text/javascript">
var awsdocs = awsdocs || {};
awsdocs.prop66 = 'AWS IoT Core';
awsdocs.prop65 =  'Developer Guide';
            </script><script src="https://a0.awsstatic.com/s_code/js/3.0/awshome_s_code.js" language="JavaScript" type="text/javascript"></script>
         <!--/DO NOT REMOVE/-->
         <!--End SiteCatalyst code version: H.25.2.--></div>
   </body>
</html>