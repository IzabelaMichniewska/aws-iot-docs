<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" ng-app="AWSDocsDocPageApp">
   <head>
      <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
      <title>Device Shadow REST API - AWS IoT Core</title>
      <meta name="viewport" content="width=device-width,initial-scale=1" />
      <meta name="assets_root" content="assets" />
      <meta name="target_state" content="device-shadow-rest-api" />
      <meta name="default_state" content="device-shadow-rest-api" />
      <link rel="icon" type="image/ico" href="/assets/images/favicon.ico" />
      <link rel="shortcut icon" type="image/ico" href="/assets/images/favicon.ico" />
      <link rel="canonical" href="https://docs.aws.amazon.com/iot/latest/developerguide/device-shadow-rest-api.html" />
      <meta name="description" content="Describes the REST API for working with the Device Shadow service in AWS IoT." />
      <meta name="deployment_region" content="IAD" />
      <meta name="product" content="AWS IoT Core" />
      <meta name="guide" content="Developer Guide" />
      <meta name="locales" content="de_de:Deutsch/en_us:English/es_es:Español/fr_fr:Français/it_it:Italiano/ja_jp:日本語/ko_kr:한국어/pt_br:Português/zh_cn:中文 (简体)/zh_tw:中文 (繁體)" />
      <meta name="abstract" content="AWS IoT provides secure, bi-directional communication between Internet-connected devices such as sensors, actuators, embedded micro-controllers, or smart appliances and the AWS Cloud. This enables you to collect telemetry data from multiple devices, and store and analyze the data. You can also create applications that enable your users to control these devices from their phones or tablets." />
      <meta name="guide-locale" content="en_us" />
      <meta name="tocs" content="toc-contents.json" />
      <meta name="feedback-item" content="IoT Docs" />
      <meta name="this_doc_product" content="AWS IoT Core" />
      <meta name="this_doc_guide" content="Developer Guide" />
      <link href="assets/css/vendor4.css" rel="stylesheet" />
      <link href="assets/css/awsdocs-common.css" rel="stylesheet" /><script type="text/javascript" src="assets/js/vendor3.js" defer=""></script><script type="text/javascript" src="assets/js/vendor4.js" defer=""></script><script type="text/javascript" src="assets/js/vendor1.js" defer=""></script><script type="text/javascript" src="assets/js/awsdocs-common.js" defer=""></script><script type="text/javascript" src="assets/js/awsdocs-doc-app.js" defer=""></script></head>
   <body class="awsdocs awsui">
      <div class="awsdocs-container">
         <awsdocs-header></awsdocs-header>
         <awsui-app-layout id="app-layout" class="awsui-util-no-gutters" ng-controller="ContentController as $ctrl" header-selector="awsdocs-header" navigation-hide="false" navigation-width="$ctrl.navWidth" navigation-open="$ctrl.navOpen" navigation-change="$ctrl.onNavChange($event)" tools-hide="$ctrl.hideTools" tools-width="$ctrl.toolsWidth" tools-open="$ctrl.toolsOpen" tools-change="$ctrl.onToolsChange($event)">
            <div id="guide-toc" dom-region="navigation">
               <awsdocs-toc></awsdocs-toc>
            </div>
            <div id="main-column" dom-region="content" tabindex="-1">
               <awsdocs-view class="awsdocs-view">
                  <div id="awsdocs-content">
                     <head>
                        <title>Device Shadow REST API - AWS IoT Core</title>
                        <meta name="pdf" content="iot-dg.pdf#device-shadow-rest-api" />
                        <meta name="kindle" content="https://www.amazon.com/dp/B07JBRCWWZ" />
                        <meta name="github" content="https://github.com/awsdocs/aws-iot-docs/tree/master/developerguide/device-shadow-rest-api.md" />
                        <meta name="forums" content="http://forums.aws.amazon.com/forum.jspa?forumID=210" />
                        <meta name="feedback" content="https://docs.aws.amazon.com/forms/aws-doc-feedback?hidden_service_name=IoT%20Docs&amp;topic_url=http://docs.aws.amazon.com/en_us/iot/latest/developerguide/device-shadow-rest-api.html" />
                        <meta name="feedback-yes" content="feedbackyes.html?topic_url=http://docs.aws.amazon.com/en_us/iot/latest/developerguide/device-shadow-rest-api.html" />
                        <meta name="feedback-no" content="feedbackno.html?topic_url=http://docs.aws.amazon.com/en_us/iot/latest/developerguide/device-shadow-rest-api.html" />
                        <meta name="keywords" content="AWS IoT,IoT,Internet of Things" />
                     </head>
                     <body>
                        <div id="main">
                           <div style="display: none"><a href="iot-dg.pdf#device-shadow-rest-api" target="_blank" rel="noopener noreferrer" title="Open PDF"></a><a target="_blank" rel="noopener noreferrer" href="https://www.amazon.com/dp/B07JBRCWWZ" title="Open Kindle"></a><a href="https://github.com/awsdocs/aws-iot-docs/tree/master/developerguide/device-shadow-rest-api.md" target="_blank" rel="noopener noreferrer" title="Edit this page on GitHub"></a></div>
                           <div id="breadcrumbs" class="breadcrumb"><a href="http://aws.amazon.com">AWS</a><a href="/index.html">Documentation</a><a href="/iot/index.html">AWS IoT Core</a><a href="what-is-aws-iot.html">Developer Guide</a></div>
                           <div id="page-toc-src"><a href="#API_GetThingShadow">GetThingShadow</a><a href="#API_UpdateThingShadow">UpdateThingShadow</a><a href="#API_DeleteThingShadow">DeleteThingShadow</a><a href="#API_ListNamedShadowsForThing">ListNamedShadowsForThing</a></div>
                           <div id="main-content" class="awsui-util-container">
                              <div id="main-col-body">
                                 <awsdocs-language-banner data-service="$ctrl.pageService"></awsdocs-language-banner>
                                 <h1 class="topictitle" id="device-shadow-rest-api">Device Shadow REST API</h1>
                                 <div class="awsdocs-page-header-container">
                                    <awsdocs-page-header></awsdocs-page-header>
                                    <awsdocs-filter-selector id="awsdocs-filter-selector"></awsdocs-filter-selector>
                                 </div>
                                 <p>A shadow exposes the following URI for updating state information:</p><pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class="nohighlight">https://<code class="replaceable">endpoint</code>:8443/things/<code class="replaceable">thingName</code>/shadow</code></pre><p>The endpoint is specific to your AWS account. To find your endpoint, you can:</p>
                                 <div class="itemizedlist">
                                     
                                     
                                     
                                    
                                    <ul class="itemizedlist" type="disc">
                                       <li class="listitem">
                                          <p>Use the <a href="https://docs.aws.amazon.com/cli/latest/reference/iot/describe-endpoint.html">describe-endpoint</a>
                                             command from the AWS CLI.
                                          </p>
                                       </li>
                                       <li class="listitem">
                                          <p>Use the AWS IoT console settings. In <b>Settings</b>, the endpoint is listed under
                                             <b>Custom endpoint</b></p>
                                       </li>
                                       <li class="listitem">
                                          <p>Use the AWS IoT console thing details. Open <b>Manage</b>. Under
                                             <b>Manage</b>, choose <b>Things</b> and, in the
                                             list of things, select and open a thing. In the left nav of the Thing detail
                                             page, choose <b>Interact</b> and view the endpoint URI in the
                                             <b>HTTPS</b> section of the page.
                                          </p>
                                       </li>
                                    </ul>
                                 </div>
                                 <p>The format of the endpoint is as follows:</p><pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class="nohighlight"><code class="replaceable">identifier</code>.iot.<code class="replaceable">region</code>.amazonaws.com</code></pre><p>The shadow REST API follows the same HTTPS protocols/port mappings as described in
                                    <a href="./protocols.html">Device communication protocols</a>.
                                 </p>
                                 <div class="highlights" id="inline-topiclist">
                                    <p><strong>API actions</strong></p>
                                    <ul>
                                       <li><a href="#API_GetThingShadow">GetThingShadow</a></li>
                                       <li><a href="#API_UpdateThingShadow">UpdateThingShadow</a></li>
                                       <li><a href="#API_DeleteThingShadow">DeleteThingShadow</a></li>
                                       <li><a href="#API_ListNamedShadowsForThing">ListNamedShadowsForThing</a></li>
                                    </ul>
                                 </div>
                                 
                                 <h2 id="API_GetThingShadow">GetThingShadow</h2>
                                 
                                 
                                 <p>Gets the shadow for the specified thing.</p>
                                 
                                 <p>The response state document includes the delta between the <code class="code">desired</code>
                                    and <code class="code">reported</code> states.
                                 </p>
                                  
                                 
                                 <p class="title"><b>Request</b></p>
                                 
                                 <p>The request includes the standard HTTP headers plus the following URI:</p>
                                  
                                 <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class="nohighlight">HTTP GET https://<code class="replaceable">endpoint</code>:8443/things/<code class="replaceable">thingName</code>/shadow?name=<code class="replaceable">shadowName</code>
Request body: (none)</code></pre>
                                 <p>The <code class="code">name</code> query parameter is not required for unnamed (classic)
                                    shadows.
                                 </p>
                                  
                                 
                                 <p class="title"><b>Response</b></p>
                                 
                                 <p>Upon success, the response includes the standard HTTP headers plus the
                                    following code and body:
                                 </p>
                                  
                                 <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class="nohighlight">HTTP 200
Response Body: <code class="replaceable">response state document</code></code></pre>
                                 <p>For more information, see <a href="./device-shadow-document.html#device-shadow-example-response-json">Example Response State Document</a>.
                                 </p>
                                  
                                 
                                 <p class="title"><b>Authorization</b></p>
                                 
                                 <p>Retrieving a shadow requires a policy that allows the caller to perform the
                                    <code class="code">iot:GetThingShadow</code> action. The Device Shadow service accepts
                                    two forms of authentication: Signature Version 4 with IAM credentials or TLS
                                    mutual authentication with a client certificate.
                                 </p>
                                  
                                 
                                 <p>The following is an example policy that allows a caller to retrieve a device's
                                    shadow:
                                 </p>
                                 <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class="JSON "><span>{</span>
  "Version": "2012-10-17",
  "Statement": [
    <span>{</span>
      "Effect": "Allow",
      "Action": "iot:GetThingShadow",
      "Resource": [
        "arn:aws:iot:<code class="replaceable">region</code>:<code class="replaceable">account</code>:thing/<code class="replaceable">thing</code>"
      ]
    }
  ]
}</code></pre>
                                  
                                 <h2 id="API_UpdateThingShadow">UpdateThingShadow</h2>
                                 
                                 
                                 <p>Updates the shadow for the specified thing.</p>
                                 
                                 <p>Updates affect only the fields specified in the request state document. Any field
                                    with a value of <code class="code">null</code> is removed from the device's shadow.
                                 </p>
                                  
                                 
                                 <p class="title"><b>Request</b></p>
                                 
                                 <p>The request includes the standard HTTP headers plus the following URI and
                                    body:
                                 </p>
                                  
                                 <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class="nohighlight">HTTP POST https://<code class="replaceable">endpoint</code>:8443/things/<code class="replaceable">thingName</code>/shadow?name=<code class="replaceable">shadowName</code>
Request body: <code class="replaceable">request state document</code></code></pre>
                                 <p>The <code class="code">name</code> query parameter is not required for unnamed (classic)
                                    shadows.
                                 </p>
                                 
                                 <p>For more information, see <a href="./device-shadow-document.html#device-shadow-example-request-json">Example Request State Document</a>.
                                 </p>
                                  
                                 
                                 <p class="title"><b>Response</b></p>
                                 
                                 <p>Upon success, the response includes the standard HTTP headers plus the
                                    following code and body:
                                 </p>
                                  
                                 <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class="nohighlight">HTTP 200
Response body: <code class="replaceable">response state document</code></code></pre>
                                 <p>For more information, see <a href="./device-shadow-document.html#device-shadow-example-response-json">Example Response State Document</a>.
                                 </p>
                                  
                                 
                                 <p class="title"><b>Authorization</b></p>
                                 
                                 <p>Updating a shadow requires a policy that allows the caller to perform the
                                    <code class="code">iot:UpdateThingShadow</code> action. The Device Shadow service accepts
                                    two forms of authentication: Signature Version 4 with IAM credentials or TLS
                                    mutual authentication with a client certificate.
                                 </p>
                                  
                                 
                                 <p>The following is an example policy that allows a caller to update a device's
                                    shadow:
                                 </p>
                                 <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class="JSON "><span>{</span>
  "Version": "2012-10-17",
  "Statement": [
    <span>{</span>
      "Effect": "Allow",
      "Action": "iot:UpdateThingShadow",
      "Resource": [
        "arn:aws:iot:<code class="replaceable">region</code>:<code class="replaceable">account</code>:thing/<code class="replaceable">thing</code>"
      ]
    }
  ]
}</code></pre>
                                  
                                 <h2 id="API_DeleteThingShadow">DeleteThingShadow</h2>
                                 
                                 
                                 <p>Deletes the shadow for the specified thing.</p>
                                  
                                 
                                 <p class="title"><b>Request</b></p>
                                 
                                 <p>The request includes the standard HTTP headers plus the following URI:</p>
                                  
                                 <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class="nohighlight">HTTP DELETE https://<code class="replaceable">endpoint</code>:8443/things/<code class="replaceable">thingName</code>/shadow?name=<code class="replaceable">shadowName</code>
Request body: (none)</code></pre>
                                 <p>The <code class="code">name</code> query parameter is not required for unnamed (classic)
                                    shadows.
                                 </p>
                                  
                                 
                                 <p class="title"><b>Response</b></p>
                                 
                                 <p>Upon success, the response includes the standard HTTP headers plus the
                                    following code and body:
                                 </p>
                                  
                                 <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class="nohighlight">HTTP 200
Response body: <code class="replaceable">Empty response state document</code></code></pre>
                                 <p>Note that deleting a shadow does not reset its version number to 0.</p>
                                  
                                 
                                 <p class="title"><b>Authorization</b></p>
                                 
                                 <p>Deleting a device's shadow requires a policy that allows the caller to perform
                                    the <code class="code">iot:DeleteThingShadow</code> action. The Device Shadow service accepts
                                    two forms of authentication: Signature Version 4 with IAM credentials or TLS
                                    mutual authentication with a client certificate.
                                 </p>
                                  
                                 
                                 <p>The following is an example policy that allows a caller to delete a device's
                                    shadow:
                                 </p>
                                 <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class="JSON "><span>{</span>
  "Version": "2012-10-17",
  "Statement": [
    <span>{</span>
      "Effect": "Allow",
      "Action": "iot:DeleteThingShadow",
      "Resource": [
        "arn:aws:iot:<code class="replaceable">region</code>:<code class="replaceable">account</code>:thing/<code class="replaceable">thing</code>"
      ]
    }
  ]
}</code></pre>
                                  
                                 <h2 id="API_ListNamedShadowsForThing">ListNamedShadowsForThing</h2>
                                 
                                 
                                 <p>Lists the shadows for the specified thing.</p>
                                  
                                 
                                 <p class="title"><b>Request</b></p>
                                 
                                 <p>The request includes the standard HTTP headers plus the following URI:</p>
                                  
                                 <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class="nohighlight">HTTP GET /api/things/shadow/ListNamedShadowsForThing/<code class="replaceable">thingName</code>?nextToken=<code class="replaceable">nextToken</code>&amp;pageSize=<code class="replaceable">pageSize</code>
Request body: (none)</code></pre>
                                 <div class="variablelist">
                                     
                                     
                                     
                                    
                                    <dl>
                                       
                                       <dt><span class="term">nextToken</span></dt>
                                       
                                       <dd>
                                          
                                          <p>The token to retrieve the next set of results.</p>
                                          
                                          <p>This value is returned on paged results and is used in the call that
                                             returns the next page.
                                          </p>
                                          
                                       </dd>
                                        
                                       
                                       <dt><span class="term">pageSize</span></dt>
                                       
                                       <dd>
                                          
                                          <p>The number of shadow names to return in each call. See also <code class="code">nextToken</code>.
                                          </p>
                                          
                                       </dd>
                                        
                                       
                                       <dt><span class="term">thingName</span></dt>
                                       
                                       <dd>
                                          
                                          <p>The name of the thing for which to list the named
                                             shadows.
                                          </p>
                                          
                                       </dd>
                                       
                                    </dl>
                                 </div>
                                  
                                 
                                 <p class="title"><b>Response</b></p>
                                 
                                 <p>Upon success, the response includes the standard HTTP headers plus the
                                    following response code and a <a href="./device-shadow-document.html#device-shadow-list-json">Shadow name list response
                                       document</a></p>
                                  
                                 
                                 <div class="awsdocs-note">
                                    <div class="awsdocs-note-title">
                                       <awsui-icon name="status-info" variant="link"></awsui-icon><span>Note</span></div>
                                    <div class="awsdocs-note-text">
                                       <p>The unnamed (classic) shadow does not appear in this list.</p>
                                    </div>
                                 </div>
                                 <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class="nohighlight">HTTP 200
Response body: <code class="replaceable">Shadow name list document</code></code></pre>
                                  
                                 <p class="title"><b>Authorization</b></p>
                                 
                                 <p>Listing a device's shadow requires a policy that allows the caller to perform
                                    the <code class="code">iot:ListNamedShadowsForThing</code> action. The Device Shadow service
                                    accepts two forms of authentication: Signature Version 4 with IAM credentials
                                    or TLS mutual authentication with a client certificate.
                                 </p>
                                  
                                 
                                 <p>The following is an example policy that allows a caller to list a thing's named
                                    shadows:
                                 </p>
                                 <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class="JSON "><span>{</span>
  "Version": "2012-10-17",
  "Statement": [
    <span>{</span>
      "Effect": "Allow",
      "Action": "iot:ListNamedShadowsForThing",
      "Resource": [
        "arn:aws:iot:<code class="replaceable">region</code>:<code class="replaceable">account</code>:thing/<code class="replaceable">thing</code>"
      ]
    }
  ]
}</code></pre>
                                 <awsdocs-copyright class="copyright-print"></awsdocs-copyright>
                                 <awsdocs-thumb-feedback right-edge="{{$ctrl.thumbFeedbackRightEdge}}"></awsdocs-thumb-feedback>
                              </div>
                              <noscript>
                                 <div>
                                    <div>
                                       <div>
                                          <div id="js_error_message">
                                             <p><img src="https://d1ge0kk1l5kms0.cloudfront.net/images/G/01/webservices/console/warning.png" alt="Warning" /> <strong>Javascript is disabled or is unavailable in your
                                                   browser.</strong></p>
                                             <p>To use the Amazon Web Services Documentation, Javascript must be
                                                enabled. Please refer to your browser's Help pages for instructions.
                                             </p>
                                          </div>
                                       </div>
                                    </div>
                                 </div>
                              </noscript>
                              <div id="main-col-footer" class="awsui-util-font-size-0">
                                 <div id="doc-conventions"><a target="_top" href="/general/latest/gr/docconventions.html">Document Conventions</a></div>
                                 <div class="prev-next">
                                    <div id="previous" class="prev-link" accesskey="p" href="./device-shadow-data-flow.html">Interacting with shadows</div>
                                    <div id="next" class="next-link" accesskey="n" href="./device-shadow-mqtt.html">Device Shadow MQTT topics</div>
                                 </div>
                              </div>
                              <awsdocs-page-utilities></awsdocs-page-utilities>
                           </div>
                           <div id="quick-feedback-yes" style="display: none;">
                              <div class="title">Did this page help you? - Yes</div>
                              <div class="content">
                                 <p>Thanks for letting us know we're doing a good
                                    job!
                                 </p>
                                 <p>If you've got a moment, please tell us what we did right
                                    so we can do more of it.
                                 </p>
                                 <p>
                                    <awsui-button id="fblink" target="_blank" text="Feedback" click="linkClick($event)" href="https://docs.aws.amazon.com/forms/aws-doc-feedback?hidden_service_name=IoT Docs&amp;topic_url=https://docs.aws.amazon.com/en_us/iot/latest/developerguide/device-shadow-rest-api.html"></awsui-button>
                                 </p>
                              </div>
                           </div>
                           <div id="quick-feedback-no" style="display: none;">
                              <div class="title">Did this page help you? - No</div>
                              <div class="content">
                                 <p>Thanks for letting us know this page needs work. We're
                                    sorry we let you down.
                                 </p>
                                 <p>If you've got a moment, please tell us how we can make
                                    the documentation better.
                                 </p>
                                 <p>
                                    <awsui-button id="fblink" target="_blank" text="Feedback" click="linkClick($event)" href="https://docs.aws.amazon.com/forms/aws-doc-feedback?hidden_service_name=IoT Docs&amp;topic_url=https://docs.aws.amazon.com/en_us/iot/latest/developerguide/device-shadow-rest-api.html"></awsui-button>
                                 </p>
                              </div>
                           </div>
                        </div>
                     </body>
                  </div>
               </awsdocs-view>
               <div class="page-loading-indicator" id="page-loading-indicator">
                  <awsui-spinner size="large"></awsui-spinner>
               </div>
            </div>
            <div id="tools-panel" dom-region="tools">
               <awsdocs-tools-panel id="awsdocs-tools-panel"></awsdocs-tools-panel>
            </div>
         </awsui-app-layout>
         <awsdocs-cookie-banner class="doc-cookie-banner"></awsdocs-cookie-banner>
         <!--
                SiteCatalyst code version: H.25.2.
                Copyright 1996-2012 Adobe, Inc. All Rights Reserved
                More info available at http://www.omniture.com
            --><script language="JavaScript" type="text/javascript">
var awsdocs = awsdocs || {};
awsdocs.prop66 = 'AWS IoT Core';
awsdocs.prop65 =  'Developer Guide';
            </script><script src="https://a0.awsstatic.com/s_code/js/3.0/awshome_s_code.js" language="JavaScript" type="text/javascript"></script>
         <!--/DO NOT REMOVE/-->
         <!--End SiteCatalyst code version: H.25.2.--></div>
   </body>
</html>