<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" ng-app="AWSDocsDocPageApp">
   <head>
      <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
      <title>DynamoDB - AWS IoT Core</title>
      <meta name="viewport" content="width=device-width,initial-scale=1" />
      <meta name="assets_root" content="assets" />
      <meta name="target_state" content="dynamodb-rule-action" />
      <meta name="default_state" content="dynamodb-rule-action" />
      <link rel="icon" type="image/ico" href="/assets/images/favicon.ico" />
      <link rel="shortcut icon" type="image/ico" href="/assets/images/favicon.ico" />
      <link rel="canonical" href="https://docs.aws.amazon.com/iot/latest/developerguide/dynamodb-rule-action.html" />
      <meta name="description" content="Use the DynamoDB rule action to write an MQTT message from AWS IoT to an Amazon DynamoDB table." />
      <meta name="deployment_region" content="IAD" />
      <meta name="product" content="AWS IoT Core" />
      <meta name="guide" content="Developer Guide" />
      <meta name="locales" content="de_de:Deutsch/en_us:English/es_es:Español/fr_fr:Français/it_it:Italiano/ja_jp:日本語/ko_kr:한국어/pt_br:Português/zh_cn:中文 (简体)/zh_tw:中文 (繁體)" />
      <meta name="abstract" content="AWS IoT provides secure, bi-directional communication between Internet-connected devices such as sensors, actuators, embedded micro-controllers, or smart appliances and the AWS Cloud. This enables you to collect telemetry data from multiple devices, and store and analyze the data. You can also create applications that enable your users to control these devices from their phones or tablets." />
      <meta name="guide-locale" content="en_us" />
      <meta name="tocs" content="toc-contents.json" />
      <meta name="feedback-item" content="IoT Docs" />
      <meta name="this_doc_product" content="AWS IoT Core" />
      <meta name="this_doc_guide" content="Developer Guide" />
      <link href="assets/css/vendor4.css" rel="stylesheet" />
      <link href="assets/css/awsdocs-common.css" rel="stylesheet" /><script type="text/javascript" src="assets/js/vendor3.js" defer=""></script><script type="text/javascript" src="assets/js/vendor4.js" defer=""></script><script type="text/javascript" src="assets/js/vendor1.js" defer=""></script><script type="text/javascript" src="assets/js/awsdocs-common.js" defer=""></script><script type="text/javascript" src="assets/js/awsdocs-doc-app.js" defer=""></script></head>
   <body class="awsdocs awsui">
      <div class="awsdocs-container">
         <awsdocs-header></awsdocs-header>
         <awsui-app-layout id="app-layout" class="awsui-util-no-gutters" ng-controller="ContentController as $ctrl" header-selector="awsdocs-header" navigation-hide="false" navigation-width="$ctrl.navWidth" navigation-open="$ctrl.navOpen" navigation-change="$ctrl.onNavChange($event)" tools-hide="$ctrl.hideTools" tools-width="$ctrl.toolsWidth" tools-open="$ctrl.toolsOpen" tools-change="$ctrl.onToolsChange($event)">
            <div id="guide-toc" dom-region="navigation">
               <awsdocs-toc></awsdocs-toc>
            </div>
            <div id="main-column" dom-region="content" tabindex="-1">
               <awsdocs-view class="awsdocs-view">
                  <div id="awsdocs-content">
                     <head>
                        <title>DynamoDB - AWS IoT Core</title>
                        <meta name="pdf" content="iot-dg.pdf#dynamodb-rule-action" />
                        <meta name="kindle" content="https://www.amazon.com/dp/B07JBRCWWZ" />
                        <meta name="github" content="https://github.com/awsdocs/aws-iot-docs/tree/master/developerguide/dynamodb-rule-action.md" />
                        <meta name="forums" content="http://forums.aws.amazon.com/forum.jspa?forumID=210" />
                        <meta name="feedback" content="https://docs.aws.amazon.com/forms/aws-doc-feedback?hidden_service_name=IoT%20Docs&amp;topic_url=http://docs.aws.amazon.com/en_us/iot/latest/developerguide/dynamodb-rule-action.html" />
                        <meta name="feedback-yes" content="feedbackyes.html?topic_url=http://docs.aws.amazon.com/en_us/iot/latest/developerguide/dynamodb-rule-action.html" />
                        <meta name="feedback-no" content="feedbackno.html?topic_url=http://docs.aws.amazon.com/en_us/iot/latest/developerguide/dynamodb-rule-action.html" />
                        <meta name="keywords" content="AWS IoT,IoT,Internet of Things" />
                     </head>
                     <body>
                        <div id="main">
                           <div style="display: none"><a href="iot-dg.pdf#dynamodb-rule-action" target="_blank" rel="noopener noreferrer" title="Open PDF"></a><a target="_blank" rel="noopener noreferrer" href="https://www.amazon.com/dp/B07JBRCWWZ" title="Open Kindle"></a><a href="https://github.com/awsdocs/aws-iot-docs/tree/master/developerguide/dynamodb-rule-action.md" target="_blank" rel="noopener noreferrer" title="Edit this page on GitHub"></a></div>
                           <div id="breadcrumbs" class="breadcrumb"><a href="http://aws.amazon.com">AWS</a><a href="/index.html">Documentation</a><a href="/iot/index.html">AWS IoT Core</a><a href="what-is-aws-iot.html">Developer Guide</a></div>
                           <div id="page-toc-src"><a href="#dynamodb-rule-action-requirements">Requirements</a><a href="#dynamodb-rule-action-parameters">Parameters</a><a href="#dynamodb-rule-action-examples">Examples</a><a href="#dynamodb-rule-action-see-also">See also</a></div>
                           <div id="main-content" class="awsui-util-container">
                              <div id="main-col-body">
                                 <awsdocs-language-banner data-service="$ctrl.pageService"></awsdocs-language-banner>
                                 <h1 class="topictitle" id="dynamodb-rule-action">DynamoDB</h1>
                                 <div class="awsdocs-page-header-container">
                                    <awsdocs-page-header></awsdocs-page-header>
                                    <awsdocs-filter-selector id="awsdocs-filter-selector"></awsdocs-filter-selector>
                                 </div>
                                 <p>The DynamoDB (<code class="code">dynamoDB</code>) action writes all or part of an MQTT message to
                                    an Amazon DynamoDB table. 
                                 </p>
                                 <p>You can follow a tutorial that shows you how to create and test a rule with a
                                    DynamoDB action. For more information, see <a href="./iot-ddb-rule.html">Store device data in a DynamoDB table</a>.
                                 </p>
                                 <div class="awsdocs-note">
                                    <div class="awsdocs-note-title">
                                       <awsui-icon name="status-info" variant="link"></awsui-icon><span>Note</span></div>
                                    <div class="awsdocs-note-text">
                                       <p>This rule writes non-JSON data to DynamoDB as binary data. The DynamoDB console
                                          displays the data as base64-encoded text.
                                       </p>
                                    </div>
                                 </div>
                                 
                                 <h2 id="dynamodb-rule-action-requirements">Requirements</h2>
                                 
                                 
                                 <p>This rule action has the following requirements:</p>
                                 
                                 <div class="itemizedlist">
                                     
                                     
                                    
                                    <ul class="itemizedlist" type="disc">
                                       <li class="listitem">
                                          
                                          <p>An IAM role that AWS IoT can assume to perform the <code class="code">dynamodb:PutItem</code> operation.
                                             For more information, see <a href="./iot-create-role.html">Granting AWS IoT the required access</a>.
                                          </p>
                                          
                                          <p>In the AWS IoT console, you can choose or create a role to allow AWS IoT to perform
                                             this rule action.
                                          </p>
                                          
                                       </li>
                                       <li class="listitem">
                                          
                                          <p> If you use a customer-managed AWS Key Management Service (AWS KMS) customer master
                                             key
                                             (CMK) to encrypt data at rest in DynamoDB, the service must have permission
                                             to use the CMK on the caller's behalf. For more information, see <a href="https://docs.aws.amazon.com/amazondynamodb/latest/developerguide/encryption.howitworks.html#managed-cmk-customer-managed">Customer Managed CMK</a> in the <em>Amazon DynamoDB Getting
                                                Started Guide</em>.
                                          </p>
                                          
                                       </li>
                                    </ul>
                                 </div>
                                  
                                 
                                 <h2 id="dynamodb-rule-action-parameters">Parameters</h2>
                                 
                                 
                                 <p>When you create an AWS IoT rule with this action, you must specify the following information:</p>
                                 
                                 <div class="variablelist">
                                     
                                     
                                     
                                     
                                     
                                     
                                     
                                     
                                     
                                     
                                    
                                    <dl>
                                       
                                       <dt><span class="term"><code class="code">tableName</code></span></dt>
                                       
                                       <dd>
                                          
                                          <p>The name of the DynamoDB table.</p>
                                          
                                          <p>Supports <a href="./iot-substitution-templates.html">substitution templates</a>: API and AWS CLI only
                                          </p>
                                          
                                       </dd>
                                        
                                       
                                       <dt><span class="term"><code class="code">hashKeyField</code></span></dt>
                                       
                                       <dd>
                                          
                                          <p>The name of the hash key (also called the partition key).</p>
                                          
                                          <p>Supports <a href="./iot-substitution-templates.html">substitution templates</a>: API and AWS CLI only
                                          </p>
                                          
                                       </dd>
                                        
                                       
                                       <dt><span class="term"><code class="code">hashKeyType</code></span></dt>
                                       
                                       <dd>
                                          
                                          <p>(Optional) The data type of the hash key (also called the
                                             partition key). Valid values: <code class="code">STRING</code>,
                                             <code class="code">NUMBER</code>.
                                          </p>
                                          
                                          <p>Supports <a href="./iot-substitution-templates.html">substitution templates</a>: API and AWS CLI only
                                          </p>
                                          
                                       </dd>
                                        
                                       
                                       <dt><span class="term"><code class="code">hashKeyValue</code></span></dt>
                                       
                                       <dd>
                                          
                                          <p>The value of the hash key. Consider using a substitution template
                                             such as <code class="code">$<span>{</span>topic()}</code> or
                                             <code class="code">$<span>{</span>timestamp()}</code>.
                                          </p>
                                          
                                          <p>Supports <a href="./iot-substitution-templates.html">substitution templates</a>: Yes
                                          </p>
                                          
                                       </dd>
                                        
                                       
                                       <dt><span class="term"><code class="code">rangeKeyField</code></span></dt>
                                       
                                       <dd>
                                          
                                          <p>(Optional) The name of the range key (also called the sort
                                             key).
                                          </p>
                                          
                                          <p>Supports <a href="./iot-substitution-templates.html">substitution templates</a>: API and AWS CLI only
                                          </p>
                                          
                                       </dd>
                                        
                                       
                                       <dt><span class="term"><code class="code">rangeKeyType</code></span></dt>
                                       
                                       <dd>
                                          
                                          <p>(Optional) The data type of the range key (also called the sort
                                             key). Valid values: <code class="code">STRING</code>, <code class="code">NUMBER</code>.
                                          </p>
                                          
                                          <p>Supports <a href="./iot-substitution-templates.html">substitution templates</a>: API and AWS CLI only
                                          </p>
                                          
                                       </dd>
                                        
                                       
                                       <dt><span class="term"><code class="code">rangeKeyValue</code></span></dt>
                                       
                                       <dd>
                                          
                                          <p>(Optional) The value of the range key. Consider using a
                                             substitution template such as <code class="code">$<span>{</span>topic()}</code> or
                                             <code class="code">$<span>{</span>timestamp()}</code>.
                                          </p>
                                          
                                          <p>Supports <a href="./iot-substitution-templates.html">substitution templates</a>: Yes
                                          </p>
                                          
                                       </dd>
                                        
                                       
                                       <dt><span class="term"><code class="code">payloadField</code></span></dt>
                                       
                                       <dd>
                                          
                                          <p>(Optional) The name of the column where the payload is written. If
                                             you omit this value, the payload is written to the column named
                                             <code class="code">payload</code>.
                                          </p>
                                          
                                          <p>Supports <a href="./iot-substitution-templates.html">substitution templates</a>: Yes
                                          </p>
                                          
                                       </dd>
                                        
                                       
                                       <dt><span class="term"><code class="code">operation</code></span></dt>
                                       
                                       <dd>
                                          
                                          <p>(Optional) The type of operation to be performed. Valid values:
                                             <code class="code">INSERT</code>, <code class="code">UPDATE</code>,
                                             <code class="code">DELETE</code>.
                                          </p>
                                          
                                          <p>Supports <a href="./iot-substitution-templates.html">substitution templates</a>: Yes
                                          </p>
                                          
                                       </dd>
                                        
                                       
                                       <dt><span class="term"><code class="code">roleARN</code></span></dt>
                                       
                                       <dd>
                                          
                                          <p>The IAM role that allows access to the DynamoDB table. For more
                                             information, see <a href="#dynamodb-rule-action-requirements">Requirements</a>.
                                          </p>
                                          
                                          <p>Supports <a href="./iot-substitution-templates.html">substitution templates</a>: No
                                          </p>
                                          
                                       </dd>
                                       
                                    </dl>
                                 </div>
                                 
                                 <p>The data written to the DynamoDB table is the result from the SQL statement of
                                    the rule.
                                 </p>
                                  
                                 
                                 <h2 id="dynamodb-rule-action-examples">Examples</h2>
                                 
                                 
                                 <p>The following JSON example defines a DynamoDB action in an AWS IoT rule.</p>
                                 <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class="JSON "><span>{</span>
    "topicRulePayload": <span>{</span>
        "sql": "SELECT * AS message FROM 'some/topic'", 
        "ruleDisabled": false,
        "awsIotSqlVersion": "2016-03-23",
        "actions": [
            <span>{</span>
                "dynamoDB": <span>{</span>
                    "tableName": "my_ddb_table",
                    "hashKeyField": "key",
                    "hashKeyValue": "$<span>{</span>topic()}",
                    "rangeKeyField": "timestamp",
                    "rangeKeyValue": "$<span>{</span>timestamp()}",
                    "roleArn": "arn:aws:iam::123456789012:role/aws_iot_dynamoDB"
                }
            }
        ]
    }
}</code></pre>
                                  
                                 <h2 id="dynamodb-rule-action-see-also">See also</h2>
                                 
                                 
                                 <div class="itemizedlist">
                                     
                                     
                                     
                                    
                                    <ul class="itemizedlist" type="disc">
                                       <li class="listitem">
                                          
                                          <p><a href="https://docs.aws.amazon.com/amazondynamodb/latest/developerguide/">What is Amazon DynamoDB?</a> in the
                                             <em>Amazon DynamoDB Developer Guide</em></p>
                                          
                                       </li>
                                       <li class="listitem">
                                          
                                          <p><a href="https://docs.aws.amazon.com/amazondynamodb/latest/developerguide/GettingStartedDynamoDB.html">Getting started
                                                with DynamoDB</a> in the
                                             <em>Amazon DynamoDB Developer Guide</em></p>
                                          
                                       </li>
                                       <li class="listitem">
                                          
                                          <p><a href="./iot-ddb-rule.html">Store device data in a DynamoDB table</a></p>
                                          
                                       </li>
                                    </ul>
                                 </div>
                                 
                                 <awsdocs-copyright class="copyright-print"></awsdocs-copyright>
                                 <awsdocs-thumb-feedback right-edge="{{$ctrl.thumbFeedbackRightEdge}}"></awsdocs-thumb-feedback>
                              </div>
                              <noscript>
                                 <div>
                                    <div>
                                       <div>
                                          <div id="js_error_message">
                                             <p><img src="https://d1ge0kk1l5kms0.cloudfront.net/images/G/01/webservices/console/warning.png" alt="Warning" /> <strong>Javascript is disabled or is unavailable in your
                                                   browser.</strong></p>
                                             <p>To use the Amazon Web Services Documentation, Javascript must be
                                                enabled. Please refer to your browser's Help pages for instructions.
                                             </p>
                                          </div>
                                       </div>
                                    </div>
                                 </div>
                              </noscript>
                              <div id="main-col-footer" class="awsui-util-font-size-0">
                                 <div id="doc-conventions"><a target="_top" href="/general/latest/gr/docconventions.html">Document Conventions</a></div>
                                 <div class="prev-next">
                                    <div id="previous" class="prev-link" accesskey="p" href="./cloudwatch-metrics-rule-action.html">CloudWatch metrics</div>
                                    <div id="next" class="next-link" accesskey="n" href="./dynamodb-v2-rule-action.html">DynamoDBv2</div>
                                 </div>
                              </div>
                              <awsdocs-page-utilities></awsdocs-page-utilities>
                           </div>
                           <div id="quick-feedback-yes" style="display: none;">
                              <div class="title">Did this page help you? - Yes</div>
                              <div class="content">
                                 <p>Thanks for letting us know we're doing a good
                                    job!
                                 </p>
                                 <p>If you've got a moment, please tell us what we did right
                                    so we can do more of it.
                                 </p>
                                 <p>
                                    <awsui-button id="fblink" target="_blank" text="Feedback" click="linkClick($event)" href="https://docs.aws.amazon.com/forms/aws-doc-feedback?hidden_service_name=IoT Docs&amp;topic_url=https://docs.aws.amazon.com/en_us/iot/latest/developerguide/dynamodb-rule-action.html"></awsui-button>
                                 </p>
                              </div>
                           </div>
                           <div id="quick-feedback-no" style="display: none;">
                              <div class="title">Did this page help you? - No</div>
                              <div class="content">
                                 <p>Thanks for letting us know this page needs work. We're
                                    sorry we let you down.
                                 </p>
                                 <p>If you've got a moment, please tell us how we can make
                                    the documentation better.
                                 </p>
                                 <p>
                                    <awsui-button id="fblink" target="_blank" text="Feedback" click="linkClick($event)" href="https://docs.aws.amazon.com/forms/aws-doc-feedback?hidden_service_name=IoT Docs&amp;topic_url=https://docs.aws.amazon.com/en_us/iot/latest/developerguide/dynamodb-rule-action.html"></awsui-button>
                                 </p>
                              </div>
                           </div>
                        </div>
                     </body>
                  </div>
               </awsdocs-view>
               <div class="page-loading-indicator" id="page-loading-indicator">
                  <awsui-spinner size="large"></awsui-spinner>
               </div>
            </div>
            <div id="tools-panel" dom-region="tools">
               <awsdocs-tools-panel id="awsdocs-tools-panel"></awsdocs-tools-panel>
            </div>
         </awsui-app-layout>
         <awsdocs-cookie-banner class="doc-cookie-banner"></awsdocs-cookie-banner>
         <!--
                SiteCatalyst code version: H.25.2.
                Copyright 1996-2012 Adobe, Inc. All Rights Reserved
                More info available at http://www.omniture.com
            --><script language="JavaScript" type="text/javascript">
var awsdocs = awsdocs || {};
awsdocs.prop66 = 'AWS IoT Core';
awsdocs.prop65 =  'Developer Guide';
            </script><script src="https://a0.awsstatic.com/s_code/js/3.0/awshome_s_code.js" language="JavaScript" type="text/javascript"></script>
         <!--/DO NOT REMOVE/-->
         <!--End SiteCatalyst code version: H.25.2.--></div>
   </body>
</html>