<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" ng-app="AWSDocsDocPageApp">
   <head>
      <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
      <title>Local proxy - AWS IoT Core</title>
      <meta name="viewport" content="width=device-width,initial-scale=1" />
      <meta name="assets_root" content="assets" />
      <meta name="target_state" content="local-proxy" />
      <meta name="default_state" content="local-proxy" />
      <link rel="icon" type="image/ico" href="/assets/images/favicon.ico" />
      <link rel="shortcut icon" type="image/ico" href="/assets/images/favicon.ico" />
      <link rel="canonical" href="https://docs.aws.amazon.com/iot/latest/developerguide/local-proxy.html" />
      <meta name="description" content="The local proxy is a process that acts as the recipient or sender of incoming TCP connections. It transmits data sent by the device application through the Secure Tunneling service over a WebSocket secure connection. You can download the local proxy source from" />
      <meta name="deployment_region" content="IAD" />
      <meta name="product" content="AWS IoT Core" />
      <meta name="guide" content="Developer Guide" />
      <meta name="locales" content="de_de:Deutsch/en_us:English/es_es:Español/fr_fr:Français/it_it:Italiano/ja_jp:日本語/ko_kr:한국어/pt_br:Português/zh_cn:中文 (简体)/zh_tw:中文 (繁體)" />
      <meta name="abstract" content="AWS IoT provides secure, bi-directional communication between Internet-connected devices such as sensors, actuators, embedded micro-controllers, or smart appliances and the AWS Cloud. This enables you to collect telemetry data from multiple devices, and store and analyze the data. You can also create applications that enable your users to control these devices from their phones or tablets." />
      <meta name="guide-locale" content="en_us" />
      <meta name="tocs" content="toc-contents.json" />
      <meta name="feedback-item" content="IoT Docs" />
      <meta name="this_doc_product" content="AWS IoT Core" />
      <meta name="this_doc_guide" content="Developer Guide" />
      <link href="assets/css/vendor4.css" rel="stylesheet" />
      <link href="assets/css/awsdocs-common.css" rel="stylesheet" /><script type="text/javascript" src="assets/js/vendor3.js" defer=""></script><script type="text/javascript" src="assets/js/vendor4.js" defer=""></script><script type="text/javascript" src="assets/js/vendor1.js" defer=""></script><script type="text/javascript" src="assets/js/awsdocs-common.js" defer=""></script><script type="text/javascript" src="assets/js/awsdocs-doc-app.js" defer=""></script></head>
   <body class="awsdocs awsui">
      <div class="awsdocs-container">
         <awsdocs-header></awsdocs-header>
         <awsui-app-layout id="app-layout" class="awsui-util-no-gutters" ng-controller="ContentController as $ctrl" header-selector="awsdocs-header" navigation-hide="false" navigation-width="$ctrl.navWidth" navigation-open="$ctrl.navOpen" navigation-change="$ctrl.onNavChange($event)" tools-hide="$ctrl.hideTools" tools-width="$ctrl.toolsWidth" tools-open="$ctrl.toolsOpen" tools-change="$ctrl.onToolsChange($event)">
            <div id="guide-toc" dom-region="navigation">
               <awsdocs-toc></awsdocs-toc>
            </div>
            <div id="main-column" dom-region="content" tabindex="-1">
               <awsdocs-view class="awsdocs-view">
                  <div id="awsdocs-content">
                     <head>
                        <title>Local proxy - AWS IoT Core</title>
                        <meta name="pdf" content="iot-dg.pdf#local-proxy" />
                        <meta name="kindle" content="https://www.amazon.com/dp/B07JBRCWWZ" />
                        <meta name="github" content="https://github.com/awsdocs/aws-iot-docs/tree/master/developerguide/local-proxy.md" />
                        <meta name="forums" content="http://forums.aws.amazon.com/forum.jspa?forumID=210" />
                        <meta name="feedback" content="https://docs.aws.amazon.com/forms/aws-doc-feedback?hidden_service_name=IoT%20Docs&amp;topic_url=http://docs.aws.amazon.com/en_us/iot/latest/developerguide/local-proxy.html" />
                        <meta name="feedback-yes" content="feedbackyes.html?topic_url=http://docs.aws.amazon.com/en_us/iot/latest/developerguide/local-proxy.html" />
                        <meta name="feedback-no" content="feedbackno.html?topic_url=http://docs.aws.amazon.com/en_us/iot/latest/developerguide/local-proxy.html" />
                        <meta name="keywords" content="AWS IoT,IoT,Internet of Things" />
                     </head>
                     <body>
                        <div id="main">
                           <div style="display: none"><a href="iot-dg.pdf#local-proxy" target="_blank" rel="noopener noreferrer" title="Open PDF"></a><a target="_blank" rel="noopener noreferrer" href="https://www.amazon.com/dp/B07JBRCWWZ" title="Open Kindle"></a><a href="https://github.com/awsdocs/aws-iot-docs/tree/master/developerguide/local-proxy.md" target="_blank" rel="noopener noreferrer" title="Edit this page on GitHub"></a></div>
                           <div id="breadcrumbs" class="breadcrumb"><a href="http://aws.amazon.com">AWS</a><a href="/index.html">Documentation</a><a href="/iot/index.html">AWS IoT Core</a><a href="what-is-aws-iot.html">Developer Guide</a></div>
                           <div id="page-toc-src"><a href="#local-proxy-security">Local proxy security best practices</a></div>
                           <div id="main-content" class="awsui-util-container">
                              <div id="main-col-body">
                                 <awsdocs-language-banner data-service="$ctrl.pageService"></awsdocs-language-banner>
                                 <h1 class="topictitle" id="local-proxy">Local proxy</h1>
                                 <div class="awsdocs-page-header-container">
                                    <awsdocs-page-header></awsdocs-page-header>
                                    <awsdocs-filter-selector id="awsdocs-filter-selector"></awsdocs-filter-selector>
                                 </div>
                                 <p>The local proxy is a process that acts as the recipient or sender of incoming TCP
                                    			connections. It transmits data sent by the device application through the Secure
                                    			Tunneling service over a WebSocket secure connection. You can download the local
                                    proxy source from
                                    			<a href="https://github.com/aws-samples/aws-iot-securetunneling-localproxy" rel="noopener noreferrer" target="_blank"><span>GitHub</span><awsui-icon class="awsdocs-link-icon" name="external"></awsui-icon></a>. The local proxy can run in two
                                    			modes: <code class="code">source</code> or <code class="code">destination</code>. In source mode, the local proxy
                                    			runs on the same device or network as the client application that initiates the
                                    TCP
                                    			connection. In destination mode, the local proxy runs on the remote device, along
                                    with
                                    			the destination application. Currently, a single tunnel can support only one TCP
                                    			connection at a time.
                                 </p>
                                 <p>The local proxy first establishes a connection to the Secure Tunneling service. When
                                    			you start the local proxy, use the <code class="code">-r</code> argument to specify the AWS Region in
                                    			which the tunnel is opened. Use the <code class="code">-t</code> argument to pass either the source
                                    			or destination client access token returned from the <code class="code">OpenTunnel</code>. Two local
                                    			proxies using the same client access token value cannot be connected at the same
                                    			time.
                                 </p>
                                 <p>After the WebSocket connection is established, the local proxy performs either source
                                    			mode or destination mode behaviors, depending on its configuration.
                                 </p>
                                 <p>By default, the local proxy attempts to reconnect to the Secure Tunneling service
                                    if
                                    			any I/O errors occur or if the WebSocket connection is closed unexpectedly. This
                                    causes
                                    			the TCP connection to close. If any TCP socket errors occur, the local proxy sends
                                    a
                                    			message through the tunnel to notify the other side to close its TCP connection.
                                    By
                                    			default, the local proxy always uses SSL communication.
                                 </p>
                                 <p>After you use the tunnel, it is safe to stop the local proxy process. We recommend
                                    that you
                                    			explicitly close the tunnel by calling <code class="code">CloseTunnel</code>. Active tunnel clients
                                    			might not be closed immediately after calling <code class="code">CloseTunnel</code>.
                                 </p>
                                 			
                                 <h2 id="local-proxy-security">Local proxy security best practices</h2>
                                 			
                                 <p>When running the local proxy, follow these security best practices:</p>
                                 			
                                 <div class="itemizedlist">
                                    				 
                                    				 
                                    				
                                    				 
                                    				 
                                    				 
                                    			
                                    <ul class="itemizedlist" type="disc">
                                       <li class="listitem">
                                          					
                                          <p>Avoid the use of the <code class="code">-t</code> local proxy argument to pass in an
                                             						access token. We recommend that you use the
                                             							<code class="code">AWSIOT_TUNNEL_ACCESS_TOKEN</code> environment variable to set the
                                             						access token for the local proxy.
                                          </p>
                                          				
                                       </li>
                                       <li class="listitem">
                                          					
                                          <p>Run the local proxy executable with least privileges in the operating
                                             						system or environment.
                                          </p>
                                          					
                                          <div class="itemizedlist">
                                             						 
                                             						 
                                             					
                                             <ul class="itemizedlist" type="disc">
                                                <li class="listitem">
                                                   <p>Avoid running the local proxy as an administrator on Windows.</p>
                                                </li>
                                                <li class="listitem">
                                                   <p>Avoid running the local proxy as root on Linux and macOS.</p>
                                                </li>
                                             </ul>
                                          </div>
                                          				
                                       </li>
                                       <li class="listitem">
                                          					
                                          <p>Consider running the local proxy on separate hosts, containers, sandboxes, chroot
                                             jail,
                                             						or a virtualized environment.
                                          </p>
                                          				
                                       </li>
                                       <li class="listitem">
                                          					
                                          <p>Build the local proxy with relevant security flags, depending on your
                                             						toolchain.
                                          </p>
                                          				
                                       </li>
                                       <li class="listitem">
                                          					
                                          <p>On devices with multiple network interfaces, use the <code class="code">-b</code>
                                             						argument to bind the TCP socket to the network interface used to communicate
                                             						with the destination application. 
                                          </p>
                                          				
                                       </li>
                                    </ul>
                                 </div>
                                 		
                                 <awsdocs-copyright class="copyright-print"></awsdocs-copyright>
                                 <awsdocs-thumb-feedback right-edge="{{$ctrl.thumbFeedbackRightEdge}}"></awsdocs-thumb-feedback>
                              </div>
                              <noscript>
                                 <div>
                                    <div>
                                       <div>
                                          <div id="js_error_message">
                                             <p><img src="https://d1ge0kk1l5kms0.cloudfront.net/images/G/01/webservices/console/warning.png" alt="Warning" /> <strong>Javascript is disabled or is unavailable in your
                                                   browser.</strong></p>
                                             <p>To use the Amazon Web Services Documentation, Javascript must be
                                                enabled. Please refer to your browser's Help pages for instructions.
                                             </p>
                                          </div>
                                       </div>
                                    </div>
                                 </div>
                              </noscript>
                              <div id="main-col-footer" class="awsui-util-font-size-0">
                                 <div id="doc-conventions"><a target="_top" href="/general/latest/gr/docconventions.html">Document Conventions</a></div>
                                 <div class="prev-next">
                                    <div id="previous" class="prev-link" accesskey="p" href="./secure-tunneling-tutorial-open-tunnel.html">Open a tunnel and start 
                                       SSH session to remote device
                                    </div>
                                    <div id="next" class="next-link" accesskey="n" href="./configure-local-proxy-web-proxy.html">Configure local proxy for devices 
                                       				that use web proxy
                                    </div>
                                 </div>
                              </div>
                              <awsdocs-page-utilities></awsdocs-page-utilities>
                           </div>
                           <div id="quick-feedback-yes" style="display: none;">
                              <div class="title">Did this page help you? - Yes</div>
                              <div class="content">
                                 <p>Thanks for letting us know we're doing a good
                                    job!
                                 </p>
                                 <p>If you've got a moment, please tell us what we did right
                                    so we can do more of it.
                                 </p>
                                 <p>
                                    <awsui-button id="fblink" target="_blank" text="Feedback" click="linkClick($event)" href="https://docs.aws.amazon.com/forms/aws-doc-feedback?hidden_service_name=IoT Docs&amp;topic_url=https://docs.aws.amazon.com/en_us/iot/latest/developerguide/local-proxy.html"></awsui-button>
                                 </p>
                              </div>
                           </div>
                           <div id="quick-feedback-no" style="display: none;">
                              <div class="title">Did this page help you? - No</div>
                              <div class="content">
                                 <p>Thanks for letting us know this page needs work. We're
                                    sorry we let you down.
                                 </p>
                                 <p>If you've got a moment, please tell us how we can make
                                    the documentation better.
                                 </p>
                                 <p>
                                    <awsui-button id="fblink" target="_blank" text="Feedback" click="linkClick($event)" href="https://docs.aws.amazon.com/forms/aws-doc-feedback?hidden_service_name=IoT Docs&amp;topic_url=https://docs.aws.amazon.com/en_us/iot/latest/developerguide/local-proxy.html"></awsui-button>
                                 </p>
                              </div>
                           </div>
                        </div>
                     </body>
                  </div>
               </awsdocs-view>
               <div class="page-loading-indicator" id="page-loading-indicator">
                  <awsui-spinner size="large"></awsui-spinner>
               </div>
            </div>
            <div id="tools-panel" dom-region="tools">
               <awsdocs-tools-panel id="awsdocs-tools-panel"></awsdocs-tools-panel>
            </div>
         </awsui-app-layout>
         <awsdocs-cookie-banner class="doc-cookie-banner"></awsdocs-cookie-banner>
         <!--
                SiteCatalyst code version: H.25.2.
                Copyright 1996-2012 Adobe, Inc. All Rights Reserved
                More info available at http://www.omniture.com
            --><script language="JavaScript" type="text/javascript">
var awsdocs = awsdocs || {};
awsdocs.prop66 = 'AWS IoT Core';
awsdocs.prop65 =  'Developer Guide';
            </script><script src="https://a0.awsstatic.com/s_code/js/3.0/awshome_s_code.js" language="JavaScript" type="text/javascript"></script>
         <!--/DO NOT REMOVE/-->
         <!--End SiteCatalyst code version: H.25.2.--></div>
   </body>
</html>