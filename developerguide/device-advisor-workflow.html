<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" ng-app="AWSDocsDocPageApp">
   <head>
      <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
      <title>Device Advisor workflow - AWS IoT Core</title>
      <meta name="viewport" content="width=device-width,initial-scale=1" />
      <meta name="assets_root" content="assets" />
      <meta name="target_state" content="device-advisor-workflow" />
      <meta name="default_state" content="device-advisor-workflow" />
      <link rel="icon" type="image/ico" href="/assets/images/favicon.ico" />
      <link rel="shortcut icon" type="image/ico" href="/assets/images/favicon.ico" />
      <link rel="canonical" href="https://docs.aws.amazon.com/iot/latest/developerguide/device-advisor-workflow.html" />
      <meta name="description" content="This tutorial provides instructions on how to create a custom test suite and run tests against the device you want to test in the console. After the tests are complete, you can view the test results and detailed logs." />
      <meta name="deployment_region" content="IAD" />
      <meta name="product" content="AWS IoT Core" />
      <meta name="guide" content="Developer Guide" />
      <meta name="locales" content="de_de:Deutsch/en_us:English/es_es:Español/fr_fr:Français/it_it:Italiano/ja_jp:日本語/ko_kr:한국어/pt_br:Português/zh_cn:中文 (简体)/zh_tw:中文 (繁體)" />
      <meta name="abstract" content="AWS IoT provides secure, bi-directional communication between Internet-connected devices such as sensors, actuators, embedded micro-controllers, or smart appliances and the AWS Cloud. This enables you to collect telemetry data from multiple devices, and store and analyze the data. You can also create applications that enable your users to control these devices from their phones or tablets." />
      <meta name="guide-locale" content="en_us" />
      <meta name="tocs" content="toc-contents.json" />
      <meta name="feedback-item" content="IoT Docs" />
      <meta name="this_doc_product" content="AWS IoT Core" />
      <meta name="this_doc_guide" content="Developer Guide" />
      <link href="assets/css/vendor4.css" rel="stylesheet" />
      <link href="assets/css/awsdocs-common.css" rel="stylesheet" /><script type="text/javascript" src="assets/js/vendor3.js" defer=""></script><script type="text/javascript" src="assets/js/vendor4.js" defer=""></script><script type="text/javascript" src="assets/js/vendor1.js" defer=""></script><script type="text/javascript" src="assets/js/awsdocs-common.js" defer=""></script><script type="text/javascript" src="assets/js/awsdocs-doc-app.js" defer=""></script></head>
   <body class="awsdocs awsui">
      <div class="awsdocs-container">
         <awsdocs-header></awsdocs-header>
         <awsui-app-layout id="app-layout" class="awsui-util-no-gutters" ng-controller="ContentController as $ctrl" header-selector="awsdocs-header" navigation-hide="false" navigation-width="$ctrl.navWidth" navigation-open="$ctrl.navOpen" navigation-change="$ctrl.onNavChange($event)" tools-hide="$ctrl.hideTools" tools-width="$ctrl.toolsWidth" tools-open="$ctrl.toolsOpen" tools-change="$ctrl.onToolsChange($event)">
            <div id="guide-toc" dom-region="navigation">
               <awsdocs-toc></awsdocs-toc>
            </div>
            <div id="main-column" dom-region="content" tabindex="-1">
               <awsdocs-view class="awsdocs-view">
                  <div id="awsdocs-content">
                     <head>
                        <title>Device Advisor workflow - AWS IoT Core</title>
                        <meta name="pdf" content="iot-dg.pdf#device-advisor-workflow" />
                        <meta name="kindle" content="https://www.amazon.com/dp/B07JBRCWWZ" />
                        <meta name="github" content="https://github.com/awsdocs/aws-iot-docs/tree/master/developerguide/device-advisor-workflow.md" />
                        <meta name="forums" content="http://forums.aws.amazon.com/forum.jspa?forumID=210" />
                        <meta name="feedback" content="https://docs.aws.amazon.com/forms/aws-doc-feedback?hidden_service_name=IoT%20Docs&amp;topic_url=http://docs.aws.amazon.com/en_us/iot/latest/developerguide/device-advisor-workflow.html" />
                        <meta name="feedback-yes" content="feedbackyes.html?topic_url=http://docs.aws.amazon.com/en_us/iot/latest/developerguide/device-advisor-workflow.html" />
                        <meta name="feedback-no" content="feedbackno.html?topic_url=http://docs.aws.amazon.com/en_us/iot/latest/developerguide/device-advisor-workflow.html" />
                        <meta name="keywords" content="AWS IoT,IoT,Internet of Things" />
                     </head>
                     <body>
                        <div id="main">
                           <div style="display: none"><a href="iot-dg.pdf#device-advisor-workflow" target="_blank" rel="noopener noreferrer" title="Open PDF"></a><a target="_blank" rel="noopener noreferrer" href="https://www.amazon.com/dp/B07JBRCWWZ" title="Open Kindle"></a><a href="https://github.com/awsdocs/aws-iot-docs/tree/master/developerguide/device-advisor-workflow.md" target="_blank" rel="noopener noreferrer" title="Edit this page on GitHub"></a></div>
                           <div id="breadcrumbs" class="breadcrumb"><a href="http://aws.amazon.com">AWS</a><a href="/index.html">Documentation</a><a href="/iot/index.html">AWS IoT Core</a><a href="what-is-aws-iot.html">Developer Guide</a></div>
                           <div id="page-toc-src"><a href="#device-advisor-workflow-prereqs">Prerequisites</a><a href="#device-advisor-workflow-create-suite-definition">Create a test
                                 suite definition</a><a href="#device-advisor-workflow-describe-suite">Get a test suite
                                 run</a><a href="#device-advisor-workflow-start-suite-run">Start a test suite
                                 run</a><a href="#device-advisor-workflow-describe-suite-run">Get a test suite definition
                                 </a><a href="#devive-advisor-workflow-stop-suite-run">Stop a test suite run</a><a href="#device-advisor-workflow-qualification-report">Get a qualification
                                 report for a successful qualification test suite run</a></div>
                           <div id="main-content" class="awsui-util-container">
                              <div id="main-col-body">
                                 <awsdocs-language-banner data-service="$ctrl.pageService"></awsdocs-language-banner>
                                 <h1 class="topictitle" id="device-advisor-workflow">Device Advisor workflow</h1>
                                 <div class="awsdocs-page-header-container">
                                    <awsdocs-page-header></awsdocs-page-header>
                                    <awsdocs-filter-selector id="awsdocs-filter-selector"></awsdocs-filter-selector>
                                 </div>
                                 <p>This tutorial provides instructions on how to create a custom test suite and run tests
                                    against the device you want to test in the console. After the tests are complete,
                                    you
                                    can view the test results and detailed logs.
                                 </p>
                                 <div class="highlights" id="inline-topiclist">
                                    <p><strong>Tutorials</strong></p>
                                    <ul>
                                       <li><a href="#device-advisor-workflow-prereqs">Prerequisites</a></li>
                                       <li><a href="#device-advisor-workflow-create-suite-definition">Create a test
                                             suite definition</a></li>
                                       <li><a href="#device-advisor-workflow-describe-suite">Get a test suite
                                             run</a></li>
                                       <li><a href="#device-advisor-workflow-start-suite-run">Start a test suite
                                             run</a></li>
                                       <li><a href="#device-advisor-workflow-describe-suite-run">Get a test suite definition
                                             </a></li>
                                       <li><a href="#devive-advisor-workflow-stop-suite-run">Stop a test suite run</a></li>
                                       <li><a href="#device-advisor-workflow-qualification-report">Get a qualification
                                             report for a successful qualification test suite run</a></li>
                                    </ul>
                                 </div>
                                 
                                 <h2 id="device-advisor-workflow-prereqs">Prerequisites</h2>
                                 
                                 <p>To complete this tutorial, complete the steps outlined in <a href="./device-advisor-setting-up.html">Setting up</a>.
                                 </p>
                                  
                                 
                                 <h2 id="device-advisor-workflow-create-suite-definition">Create a test
                                    suite definition
                                 </h2>
                                 
                                 <p>First, <a href="https://docs.aws.amazon.com/iot/latest/developerguide/iot-connect-service.html#iot-service-sdks">install an AWS SDK</a>.
                                 </p>
                                  
                                 
                                 <h3 id="rootGroup"><code class="code">rootGroup</code> syntax
                                 </h3>
                                 
                                 <p>A root group is a JSON string that specifies which test cases are included in
                                    your test suite and any necessary configurations for those test cases. Use the
                                    root group to structure and order your test suite in any way you like. The
                                    hierarchy of a test suite is: 
                                 </p>
                                 <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class="nohighlight">test suite → test group(s) → test case(s)</code></pre>
                                 <p>A test suite must have at least one test group, and each test group must have
                                    at least one test case. Device Advisor runs tests in the order in which you define
                                    the
                                    test groups and test cases.
                                 </p>
                                 
                                 <p>Each root group has this basic structure:</p>
                                 <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class="JSON "><span>{</span>
    "configuration": <span>{</span>  // for all tests in the test suite
        "": ""
    }
    "tests": [<span>{</span>
        "name": ""
        "configuration": <span>{</span>  // for all sub-groups in this test group 
            "": ""
        },
        "tests": [<span>{</span>
            "name": ""
            "configuration": <span>{</span>  // for all test cases in this test group 
                "": ""
            },
            "test": <span>{</span>
                "id": ""  
                "version": ""
            }
        }]
    }]
}</code></pre>
                                 <p>A block that contains a <code class="code">"name"</code>, <code class="code">"configuration"</code>, and
                                    <code class="code">"tests"</code> is referred to as a "group definition". A block that
                                    contains a <code class="code">"name"</code>, <code class="code">"configuration"</code>, and
                                    <code class="code">"test"</code> is referred to as a "test case definition". Each
                                    <code class="code">"test"</code> block that contains an <code class="code">"id"</code> and
                                    <code class="code">"version"</code> is referred to as a "test case".
                                 </p>
                                 
                                 <p>For information on how to fill in the <code class="code">"id"</code> and
                                    <code class="code">"version"</code> fields for each test case (<code class="code">"test"</code>
                                    block), see <a href="./device-advisor-tests.html">Device Advisor test cases</a>. That section also contains information on
                                    the available <code class="code">"configuration"</code> settings.
                                 </p>
                                 
                                 <p>The following is an example of a root group configuration that specifies the
                                    "MQTT Connect Happy Case" and "MQTT Connect Exponential Backoff Retries" test
                                    cases along with descriptions of the configuration fields.
                                 </p>
                                 <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class="JSON "><span>{</span>
    "configuration": <span>{</span>},  // Suite-level configuration
    "tests": [            // Group definitions should be provided here
      <span>{</span>
        "name": "My_MQTT_Connect_Group",  // Group definition name
        "configuration": <span>{</span>}               // Group definition-level configuration,
        "tests": [                        // Test case definitions should be provided here
        <span>{</span>
            "name": "My_MQTT_Connect_Happy_Case",  // Test case definition name
            "configuration": <span>{</span>
                "EXECUTION_TIMEOUT": 300        // Test case definition-level configuration, in seconds
            }, 
            "test": <span>{</span>
                "id": "MQTT_Connect",              // test case id
                "version": "0.0.0"                 // test case version
            }
        },
        <span>{</span>
            "name": "My_MQTT_Connect_Jitter_Backoff_Retries",  // Test case definition name
            "configuration": <span>{</span>
                "EXECUTION_TIMEOUT": 600                 // Test case definition-level configuration,  in seconds
            },
            "test": <span>{</span>
                "id": "MQTT_Connect_Jitter_Backoff_Retries",  // test case id
                "version": "0.0.0"                                 // test case version
            }
        }]
    }]
}</code></pre>
                                 <p>You must supply the root group configuration when you create your test suite
                                    definition. Save the <code class="code">suiteDefinitionId</code> that is returned in the
                                    response object—it's used to retrieve your test suite definition
                                    information and to run your test suite.
                                 </p>
                                  
                                 
                                 <p>Here is a Java SDK example:</p>
                                 <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class="java ">response = iotDeviceAdvisorClient.createSuiteDefinition(
        CreateSuiteDefinitionRequest.builder()
            .suiteDefinitionConfiguration(SuiteDefinitionConfiguration.builder()
                .suiteDefinitionName("<code class="replaceable">your-suite-definition-name</code>")
                .devices(
                    DeviceUnderTest.builder()
                        .thingArn("<code class="replaceable">your-test-device-thing-arn</code>")
                        .certificateArn("<code class="replaceable">your-test-device-certificate-arn</code>")
                        .build()
                )
                .rootGroup("<code class="replaceable">your-root-group-configuration</code>")
                .devicePermissionRoleArn("<code class="replaceable">your-device-permission-role-arn</code>")
                .build()
            )
            .build()
)</code></pre>
                                  
                                 <h2 id="device-advisor-workflow-describe-suite">Get a test suite
                                    run
                                 </h2>
                                 
                                 <p>After you create your test suite definition, you receive the
                                    <code class="code">suiteDefinitionId</code> in the response object of the
                                    <code class="code">CreateSuiteDefinition</code> API.
                                 </p>
                                 
                                 <p>You may see that there are new <code class="code">id</code> fields within each of the group and
                                    test case definitions in the root group that is returned. This is expected and you
                                    can use these IDs to run a subset of your test suite definition.
                                 </p>
                                 
                                 <p>Java SDK example: </p>
                                 <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class="java ">response = iotDeviceAdvisorClient.GetSuiteDefinition(
    GetSuiteDefinitionRequest.builder()
        .suiteDefinitionId("<code class="replaceable">your-suite-definition-id</code>")
        .build()
)</code></pre>
                                  
                                 <h2 id="device-advisor-workflow-start-suite-run">Start a test suite
                                    run
                                 </h2>
                                 
                                 <p>After you've successfully created a test suite definition and configured your test
                                    device to connect to your Device Advisor test endpoint, run your test suite with the
                                    <code class="code">StartSuiteRun</code> API. Use
                                    either <code class="code">certificateArn</code> or <code class="code">thingArn</code> to run the test suite.
                                    If both are configured, the certificate will be used if it belongs to the
                                    thing.
                                 </p>
                                 
                                 <p>SDK example: </p>
                                 <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class="java ">response = iotDeviceAdvisorClient.startSuiteRun(StartSuiteRunRequest.builder()
.suiteDefinitionId("<code class="replaceable">your-suite-definition-id</code>")
.suiteRunConfiguration(SuiteRunConfiguration.builder()
    .primaryDevice(DeviceUnderTest.builder()
        .certificateArn("<code class="replaceable">your-test-device-certificate-arn</code>")
        .thingArn("<code class="replaceable">your-test-device-thing-arn</code>")
        .build())
    .build())
.build())</code></pre>
                                 <p>Save the <code class="code">suiteRunId</code> that is returned in the response—you will
                                    use this to retrieve the results of this test suite run.
                                 </p>
                                  
                                 
                                 <h2 id="device-advisor-workflow-describe-suite-run">Get a test suite definition
                                    
                                 </h2>
                                 
                                 <p>After you start a test suite run, you can check its progress and its
                                    results with the <code class="code">GetSuiteRun</code> API.
                                 </p>
                                 
                                 <p>SDK example:</p>
                                 <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class="java ">// Using the SDK, call the GetSuiteRun API.

response = iotDeviceAdvisorClient.GetSuiteRun(
GetSuiteRunRequest.builder()
    .suiteDefinitionId("<code class="replaceable">your-suite-definition-id</code>")
    .suiteRunId("<code class="replaceable">your-suite-run-id</code>")
.build()) </code></pre>
                                  
                                 <h2 id="devive-advisor-workflow-stop-suite-run">Stop a test suite run</h2>
                                 
                                 <p>
                                    AWS IoT Device Advisor allows one active test suite run at a time. 
                                    To stop a test suite run still in progress, you can call the <code class="code">StopSuiteRun</code> API. 
                                    After you call the <code class="code">StopSuiteRun</code> API, the service will start the cleanup process. While the service is running the
                                    cleanup process, test suite run status will be <code class="code">Stopping</code>.
                                    The cleanup process will take several minutes, and once the process is complete, the
                                    test suite run will have the <code class="code">Stopped</code> status. After a test run has completely stopped you will be able to start another
                                    test suite run. 
                                    You can periodically check the suite run status using the <code class="code">GetSuiteRun</code> API as shown in the previous section. 
                                    
                                 </p>
                                 
                                 <p>SDK example:</p>
                                 <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class="java ">// Using the SDK, call the StopSuiteRun API.

response = iotDeviceAdvisorClient.StopSuiteRun(
StopSuiteRun.builder()
    .suiteDefinitionId("<code class="replaceable">your-suite-definition-id</code>")
    .suiteRunId("<code class="replaceable">your-suite-run-id</code>")
.build())</code></pre>
                                  
                                 <h2 id="device-advisor-workflow-qualification-report">Get a qualification
                                    report for a successful qualification test suite run
                                 </h2>
                                 
                                 <p>If you run a qualification test suite that completes, you can retrieve a
                                    qualification report by using the GetSuiteRunReport API. You can use this
                                    qualification report to qualify your device with the AWS IoT Core qualification
                                    program. To determine whether your test suite is a qualification test suite, check
                                    whether the <code class="code">intendedForQualification</code> parameter is set to
                                    <code class="code">true</code>. After you call the GetSuiteRunReport API, the download URL
                                    returned is available for you to download for 90 seconds. If more than 90 seconds
                                    elapse from the previous time you called the GetSuiteRunReport API, call the API
                                    again to retrieve a valid URL. 
                                 </p>
                                 
                                 <p>SDK example:</p>
                                 <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class="nohighlight">// Using the SDK, call the getSuiteRunReport API. 

response = iotDeviceAdvisorClient.getSuiteRunReport( 
    GetSuiteRunReportRequest.builder() 
        .suiteDefinitionId("<code class="replaceable">your-suite-definition-id</code>")
        .suiteRunId("<code class="replaceable">your-suite-run-id</code>")
        .build()
) </code></pre>
                                 <awsdocs-copyright class="copyright-print"></awsdocs-copyright>
                                 <awsdocs-thumb-feedback right-edge="{{$ctrl.thumbFeedbackRightEdge}}"></awsdocs-thumb-feedback>
                              </div>
                              <noscript>
                                 <div>
                                    <div>
                                       <div>
                                          <div id="js_error_message">
                                             <p><img src="https://d1ge0kk1l5kms0.cloudfront.net/images/G/01/webservices/console/warning.png" alt="Warning" /> <strong>Javascript is disabled or is unavailable in your
                                                   browser.</strong></p>
                                             <p>To use the Amazon Web Services Documentation, Javascript must be
                                                enabled. Please refer to your browser's Help pages for instructions.
                                             </p>
                                          </div>
                                       </div>
                                    </div>
                                 </div>
                              </noscript>
                              <div id="main-col-footer" class="awsui-util-font-size-0">
                                 <div id="doc-conventions"><a target="_top" href="/general/latest/gr/docconventions.html">Document Conventions</a></div>
                                 <div class="prev-next">
                                    <div id="previous" class="prev-link" accesskey="p" href="./da-console-guide.html">Getting started with Device Advisor in the console</div>
                                    <div id="next" class="next-link" accesskey="n" href="./device-advisor-console-tutorial.html">Device Advisor detailed console
                                       workflow
                                    </div>
                                 </div>
                              </div>
                              <awsdocs-page-utilities></awsdocs-page-utilities>
                           </div>
                           <div id="quick-feedback-yes" style="display: none;">
                              <div class="title">Did this page help you? - Yes</div>
                              <div class="content">
                                 <p>Thanks for letting us know we're doing a good
                                    job!
                                 </p>
                                 <p>If you've got a moment, please tell us what we did right
                                    so we can do more of it.
                                 </p>
                                 <p>
                                    <awsui-button id="fblink" target="_blank" text="Feedback" click="linkClick($event)" href="https://docs.aws.amazon.com/forms/aws-doc-feedback?hidden_service_name=IoT Docs&amp;topic_url=https://docs.aws.amazon.com/en_us/iot/latest/developerguide/device-advisor-workflow.html"></awsui-button>
                                 </p>
                              </div>
                           </div>
                           <div id="quick-feedback-no" style="display: none;">
                              <div class="title">Did this page help you? - No</div>
                              <div class="content">
                                 <p>Thanks for letting us know this page needs work. We're
                                    sorry we let you down.
                                 </p>
                                 <p>If you've got a moment, please tell us how we can make
                                    the documentation better.
                                 </p>
                                 <p>
                                    <awsui-button id="fblink" target="_blank" text="Feedback" click="linkClick($event)" href="https://docs.aws.amazon.com/forms/aws-doc-feedback?hidden_service_name=IoT Docs&amp;topic_url=https://docs.aws.amazon.com/en_us/iot/latest/developerguide/device-advisor-workflow.html"></awsui-button>
                                 </p>
                              </div>
                           </div>
                        </div>
                     </body>
                  </div>
               </awsdocs-view>
               <div class="page-loading-indicator" id="page-loading-indicator">
                  <awsui-spinner size="large"></awsui-spinner>
               </div>
            </div>
            <div id="tools-panel" dom-region="tools">
               <awsdocs-tools-panel id="awsdocs-tools-panel"></awsdocs-tools-panel>
            </div>
         </awsui-app-layout>
         <awsdocs-cookie-banner class="doc-cookie-banner"></awsdocs-cookie-banner>
         <!--
                SiteCatalyst code version: H.25.2.
                Copyright 1996-2012 Adobe, Inc. All Rights Reserved
                More info available at http://www.omniture.com
            --><script language="JavaScript" type="text/javascript">
var awsdocs = awsdocs || {};
awsdocs.prop66 = 'AWS IoT Core';
awsdocs.prop65 =  'Developer Guide';
            </script><script src="https://a0.awsstatic.com/s_code/js/3.0/awshome_s_code.js" language="JavaScript" type="text/javascript"></script>
         <!--/DO NOT REMOVE/-->
         <!--End SiteCatalyst code version: H.25.2.--></div>
   </body>
</html>