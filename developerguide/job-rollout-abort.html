<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" ng-app="AWSDocsDocPageApp">
   <head>
      <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
      <title>Job rollout and abort configuration - AWS IoT Core</title>
      <meta name="viewport" content="width=device-width,initial-scale=1" />
      <meta name="assets_root" content="assets" />
      <meta name="target_state" content="job-rollout-abort" />
      <meta name="default_state" content="job-rollout-abort" />
      <link rel="icon" type="image/ico" href="/assets/images/favicon.ico" />
      <link rel="shortcut icon" type="image/ico" href="/assets/images/favicon.ico" />
      <link rel="canonical" href="https://docs.aws.amazon.com/iot/latest/developerguide/job-rollout-abort.html" />
      <meta name="description" content="AWS IoT jobs can be deployed using variable rollout rates as various criteria and thresholds are met. Job rollouts can also be aborted if the number of failed jobs matches a set of criteria. These rollout configurations give you more granular control over a job's blast radius. Job rollout rate criteria are set at job creation through the" />
      <meta name="deployment_region" content="IAD" />
      <meta name="product" content="AWS IoT Core" />
      <meta name="guide" content="Developer Guide" />
      <meta name="locales" content="de_de:Deutsch/en_us:English/es_es:Español/fr_fr:Français/it_it:Italiano/ja_jp:日本語/ko_kr:한국어/pt_br:Português/zh_cn:中文 (简体)/zh_tw:中文 (繁體)" />
      <meta name="abstract" content="AWS IoT provides secure, bi-directional communication between Internet-connected devices such as sensors, actuators, embedded micro-controllers, or smart appliances and the AWS Cloud. This enables you to collect telemetry data from multiple devices, and store and analyze the data. You can also create applications that enable your users to control these devices from their phones or tablets." />
      <meta name="guide-locale" content="en_us" />
      <meta name="tocs" content="toc-contents.json" />
      <meta name="feedback-item" content="IoT Docs" />
      <meta name="this_doc_product" content="AWS IoT Core" />
      <meta name="this_doc_guide" content="Developer Guide" />
      <link href="assets/css/vendor4.css" rel="stylesheet" />
      <link href="assets/css/awsdocs-common.css" rel="stylesheet" /><script type="text/javascript" src="assets/js/vendor3.js" defer=""></script><script type="text/javascript" src="assets/js/vendor4.js" defer=""></script><script type="text/javascript" src="assets/js/vendor1.js" defer=""></script><script type="text/javascript" src="assets/js/awsdocs-common.js" defer=""></script><script type="text/javascript" src="assets/js/awsdocs-doc-app.js" defer=""></script></head>
   <body class="awsdocs awsui">
      <div class="awsdocs-container">
         <awsdocs-header></awsdocs-header>
         <awsui-app-layout id="app-layout" class="awsui-util-no-gutters" ng-controller="ContentController as $ctrl" header-selector="awsdocs-header" navigation-hide="false" navigation-width="$ctrl.navWidth" navigation-open="$ctrl.navOpen" navigation-change="$ctrl.onNavChange($event)" tools-hide="$ctrl.hideTools" tools-width="$ctrl.toolsWidth" tools-open="$ctrl.toolsOpen" tools-change="$ctrl.onToolsChange($event)">
            <div id="guide-toc" dom-region="navigation">
               <awsdocs-toc></awsdocs-toc>
            </div>
            <div id="main-column" dom-region="content" tabindex="-1">
               <awsdocs-view class="awsdocs-view">
                  <div id="awsdocs-content">
                     <head>
                        <title>Job rollout and abort configuration - AWS IoT Core</title>
                        <meta name="pdf" content="iot-dg.pdf#job-rollout-abort" />
                        <meta name="kindle" content="https://www.amazon.com/dp/B07JBRCWWZ" />
                        <meta name="github" content="https://github.com/awsdocs/aws-iot-docs/tree/master/developerguide/job-rollout-abort.md" />
                        <meta name="forums" content="http://forums.aws.amazon.com/forum.jspa?forumID=210" />
                        <meta name="feedback" content="https://docs.aws.amazon.com/forms/aws-doc-feedback?hidden_service_name=IoT%20Docs&amp;topic_url=http://docs.aws.amazon.com/en_us/iot/latest/developerguide/job-rollout-abort.html" />
                        <meta name="feedback-yes" content="feedbackyes.html?topic_url=http://docs.aws.amazon.com/en_us/iot/latest/developerguide/job-rollout-abort.html" />
                        <meta name="feedback-no" content="feedbackno.html?topic_url=http://docs.aws.amazon.com/en_us/iot/latest/developerguide/job-rollout-abort.html" />
                        <meta name="keywords" content="AWS IoT,IoT,Internet of Things" />
                     </head>
                     <body>
                        <div id="main">
                           <div style="display: none"><a href="iot-dg.pdf#job-rollout-abort" target="_blank" rel="noopener noreferrer" title="Open PDF"></a><a target="_blank" rel="noopener noreferrer" href="https://www.amazon.com/dp/B07JBRCWWZ" title="Open Kindle"></a><a href="https://github.com/awsdocs/aws-iot-docs/tree/master/developerguide/job-rollout-abort.md" target="_blank" rel="noopener noreferrer" title="Edit this page on GitHub"></a></div>
                           <div id="breadcrumbs" class="breadcrumb"><a href="http://aws.amazon.com">AWS</a><a href="/index.html">Documentation</a><a href="/iot/index.html">AWS IoT Core</a><a href="what-is-aws-iot.html">Developer Guide</a></div>
                           <div id="page-toc-src"><a href="#job-rollout-using">Using job rollout rates</a><a href="#job-abort-using">Using job rollout abort
                                 configurations</a></div>
                           <div id="main-content" class="awsui-util-container">
                              <div id="main-col-body">
                                 <awsdocs-language-banner data-service="$ctrl.pageService"></awsdocs-language-banner>
                                 <h1 class="topictitle" id="job-rollout-abort">Job rollout and abort configuration</h1>
                                 <div class="awsdocs-page-header-container">
                                    <awsdocs-page-header></awsdocs-page-header>
                                    <awsdocs-filter-selector id="awsdocs-filter-selector"></awsdocs-filter-selector>
                                 </div>
                                 <p>AWS IoT jobs can be deployed using variable rollout rates as various criteria and
                                    thresholds are met. Job rollouts can also be aborted if the number of failed jobs
                                    matches a set of criteria. These rollout configurations give you more granular control
                                    over a job's blast radius. Job rollout rate criteria are set at job creation through
                                    the
                                    <a href="https://docs.aws.amazon.com/iot/latest/apireference/API_JobExecutionsRolloutConfig.html"><code class="code">JobExecutionsRolloutConfig</code></a> object. Job abort criteria are
                                    set at job creation through the <a href="https://docs.aws.amazon.com/iot/latest/apireference/API_AbortConfig.html"><code class="code">AbortConfig</code></a> object.
                                 </p>
                                 
                                 <h2 id="job-rollout-using">Using job rollout rates</h2>
                                 
                                 <p>You set a job rollout rate by configuring the <a href="https://docs.aws.amazon.com/iot/latest/apireference/API_ExponentialRolloutRate.html"><code class="code">ExponentialRolloutRate</code></a> property of the
                                    <code class="code">JobExecutionsRolloutConfig</code> object when you run the <a href="https://docs.aws.amazon.com/iot/latest/apireference/API_CreateJob.html"><code class="code">CreateJob</code></a> API. The
                                    following example sets a variable rollout rate by using the
                                    <code class="code">exponentialRate</code> parameter.
                                 </p>
                                 <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class="JSON "><span>{</span>
...
  "jobExecutionsRolloutConfig": <span>{</span>
    "exponentialRate": <span>{</span>
      "baseRatePerMinute": 50,
      "incrementFactor": 2,
      "rateIncreaseCriteria": <span>{</span>
        "numberOfNotifiedThings": 1000,
        "numberOfSucceededThings": 1000
      },
      "maximumPerMinute": 1000
    }
  }
...
}</code></pre>
                                 <p>The <code class="code">baseRatePerMinute</code> parameter specifies the rate at which the jobs
                                    are executed until the <code class="code">numberOfNotifiedThings</code> or
                                    <code class="code">numberOfSucceededThings</code> threshold has been met.
                                 </p>
                                 
                                 <p>The <code class="code">incrementFactor</code> parameter specifies the exponential factor by
                                    which the rollout rate increases after the <code class="code">numberOfNotifiedThings</code> or
                                    <code class="code">numberOfSucceededThings</code> threshold has been met.
                                 </p>
                                 
                                 <p>The <code class="code">rateIncreaseCriteria</code> parameter is an object that specifies either
                                    the <code class="code">numberOfNotifiedThings</code> or <code class="code">numberOfSucceededThings</code>
                                    threshold.
                                 </p>
                                 
                                 <p>The <code class="code">maximumPerMinute</code> parameter specifies the upper limit of the rate
                                    at which job executions can occur. Valid values range from 1 to 1000. This parameter
                                    is required when you pass an <code class="code">ExponentialRate</code> object. In a variable rate
                                    rollout, this value establishes the upper limit of a job rollout rate.
                                 </p>
                                 
                                 <p>A job rollout with the configuration above would start at a rate of 50 job
                                    executions per minute. It would continue at that rate until either 1000 things have
                                    received job execution notifications (if a value for
                                    <code class="code">numberOfNotifiedThings</code> has been specified) or 1000 successful job
                                    executions have occurred (if a value for <code class="code">numberOfSucceededThings</code> has
                                    been specified).
                                 </p>
                                 
                                 <p>The following table illustrates how the rollout would proceed over the first four
                                    increments.
                                 </p>
                                 
                                 <div class="table-container">
                                    <div class="table-contents">
                                       <table id="w332aac31c19b5c19">
                                          
                                          <tr>
                                             
                                             <td>
                                                
                                                <p>Rollout rate per minute</p>
                                                
                                             </td>
                                             
                                             <td>
                                                
                                                <p>50</p>
                                                
                                             </td>
                                             
                                             <td>
                                                
                                                <p>100</p>
                                                
                                             </td>
                                             
                                             <td>
                                                
                                                <p>200</p>
                                                
                                             </td>
                                             
                                             <td>
                                                
                                                <p>400</p>
                                                
                                             </td>
                                             
                                          </tr>
                                          
                                          <tr>
                                             
                                             <td>
                                                
                                                <p>Number of notified devices or successful executions</p>
                                                
                                             </td>
                                             
                                             <td>
                                                
                                                <p>1000</p>
                                                
                                             </td>
                                             
                                             <td>
                                                
                                                <p>2000</p>
                                                
                                             </td>
                                             
                                             <td>
                                                
                                                <p>3000</p>
                                                
                                             </td>
                                             
                                             <td>
                                                
                                                <p>4000</p>
                                                
                                             </td>
                                             
                                          </tr>
                                          
                                       </table>
                                    </div>
                                 </div>
                                 
                                 <p>The following configuration sets a static rollout rate.</p>
                                 <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class="JSON ">
<span>{</span>  
...
  "jobExecutionsRolloutConfig": <span>{</span> 
         "maximumPerMinute": 1000
...
}
            </code></pre>
                                 <p>The <code class="code">maximumPerMinute</code> parameter specifies the upper limit of the rate
                                    at which job executions can occur. Valid values range from 1 to 1000. This parameter
                                    is optional. If you don't specify a value, the default value of 1000 is used.
                                 </p>
                                 
                                  
                                 
                                 <h2 id="job-abort-using"><a id="abort"></a>Using job rollout abort
                                    configurations
                                 </h2>
                                 
                                 <p>You set up a job abort condition by configuring the optional <a href="https://docs.aws.amazon.com/iot/latest/apireference/API_AbortConfig.html"><code class="code">AbortConfig</code></a> object
                                    when you run the <a href="https://docs.aws.amazon.com/iot/latest/apireference/API_CreateJob.html"><code class="code">CreateJob</code></a> API. This section describes the effect that the
                                    following sample configuration would have on a job rollout that was experiencing
                                    multiple failed executions.
                                 </p>
                                 <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class="JSON ">
   "abortConfig": <span>{</span> 
      "criteriaList": [ 
         <span>{</span> 
            "action": "CANCEL",
            "failureType": "FAILED",
            "minNumberOfExecutedThings": 100,
            "thresholdPercentage": 20
         },
         <span>{</span> 
            "action": "CANCEL",
            "failureType": "TIMED_OUT",
            "minNumberOfExecutedThings": 200,
            "thresholdPercentage": 50
         }
      ]
    }
            </code></pre>
                                 <p>The <code class="code">action</code> parameter specifies the action to take when the abort
                                    criteria have been met. This parameter is required, and <code class="code">CANCEL</code> is the
                                    only valid value.
                                 </p>
                                 
                                 <p>The <code class="code">failureType</code> parameter specifies which failure types should
                                    trigger a job abort. Valid values are <code class="code">FAILED</code>, <code class="code">REJECTED</code>,
                                    <code class="code">TIMED_OUT</code>, and <code class="code">ALL</code>.
                                 </p>
                                 
                                 <p>The <code class="code">minNumberOfExecutedThings</code> parameter specifies the number of
                                    completed job executions that must occur before the service checks to see if the job
                                    abort criteria have been met. In this example, AWS IoT doesn't check to see if a job
                                    abort should occur until at least 100 devices have completed job executions.
                                 </p>
                                 
                                 <p>The <code class="code">thresholdPercentage</code> parameter specifies the total number of
                                    executed things that initiate a job abort. In this example, AWS IoT initiates a job
                                    abort and cancels the job rollout if at least 20% of all completed executions have
                                    failed in any way after 100 executions have completed.
                                 </p>
                                 
                                 <div class="awsdocs-note">
                                    <div class="awsdocs-note-title">
                                       <awsui-icon name="status-info" variant="link"></awsui-icon><span>Note</span></div>
                                    <div class="awsdocs-note-text">
                                       <p>Deletion of job executions affects the computation value of the total
                                          completed execution. When a job aborts, the service creates an automated
                                          <code class="code">comment</code> and <code class="code">reasonCode</code> to differentiate a
                                          user-driven cancellation from a job abort cancellation.
                                       </p>
                                    </div>
                                 </div>
                                 
                                 <awsdocs-copyright class="copyright-print"></awsdocs-copyright>
                                 <awsdocs-thumb-feedback right-edge="{{$ctrl.thumbFeedbackRightEdge}}"></awsdocs-thumb-feedback>
                              </div>
                              <noscript>
                                 <div>
                                    <div>
                                       <div>
                                          <div id="js_error_message">
                                             <p><img src="https://d1ge0kk1l5kms0.cloudfront.net/images/G/01/webservices/console/warning.png" alt="Warning" /> <strong>Javascript is disabled or is unavailable in your
                                                   browser.</strong></p>
                                             <p>To use the Amazon Web Services Documentation, Javascript must be
                                                enabled. Please refer to your browser's Help pages for instructions.
                                             </p>
                                          </div>
                                       </div>
                                    </div>
                                 </div>
                              </noscript>
                              <div id="main-col-footer" class="awsui-util-font-size-0">
                                 <div id="doc-conventions"><a target="_top" href="/general/latest/gr/docconventions.html">Document Conventions</a></div>
                                 <div class="prev-next">
                                    <div id="previous" class="prev-link" accesskey="p" href="./jobs-data-plane-data-types.html">Jobs device MQTT and HTTPS data
                                       types
                                    </div>
                                    <div id="next" class="next-link" accesskey="n" href="./job-limits.html">Job limits</div>
                                 </div>
                              </div>
                              <awsdocs-page-utilities></awsdocs-page-utilities>
                           </div>
                           <div id="quick-feedback-yes" style="display: none;">
                              <div class="title">Did this page help you? - Yes</div>
                              <div class="content">
                                 <p>Thanks for letting us know we're doing a good
                                    job!
                                 </p>
                                 <p>If you've got a moment, please tell us what we did right
                                    so we can do more of it.
                                 </p>
                                 <p>
                                    <awsui-button id="fblink" target="_blank" text="Feedback" click="linkClick($event)" href="https://docs.aws.amazon.com/forms/aws-doc-feedback?hidden_service_name=IoT Docs&amp;topic_url=https://docs.aws.amazon.com/en_us/iot/latest/developerguide/job-rollout-abort.html"></awsui-button>
                                 </p>
                              </div>
                           </div>
                           <div id="quick-feedback-no" style="display: none;">
                              <div class="title">Did this page help you? - No</div>
                              <div class="content">
                                 <p>Thanks for letting us know this page needs work. We're
                                    sorry we let you down.
                                 </p>
                                 <p>If you've got a moment, please tell us how we can make
                                    the documentation better.
                                 </p>
                                 <p>
                                    <awsui-button id="fblink" target="_blank" text="Feedback" click="linkClick($event)" href="https://docs.aws.amazon.com/forms/aws-doc-feedback?hidden_service_name=IoT Docs&amp;topic_url=https://docs.aws.amazon.com/en_us/iot/latest/developerguide/job-rollout-abort.html"></awsui-button>
                                 </p>
                              </div>
                           </div>
                        </div>
                     </body>
                  </div>
               </awsdocs-view>
               <div class="page-loading-indicator" id="page-loading-indicator">
                  <awsui-spinner size="large"></awsui-spinner>
               </div>
            </div>
            <div id="tools-panel" dom-region="tools">
               <awsdocs-tools-panel id="awsdocs-tools-panel"></awsdocs-tools-panel>
            </div>
         </awsui-app-layout>
         <awsdocs-cookie-banner class="doc-cookie-banner"></awsdocs-cookie-banner>
         <!--
                SiteCatalyst code version: H.25.2.
                Copyright 1996-2012 Adobe, Inc. All Rights Reserved
                More info available at http://www.omniture.com
            --><script language="JavaScript" type="text/javascript">
var awsdocs = awsdocs || {};
awsdocs.prop66 = 'AWS IoT Core';
awsdocs.prop65 =  'Developer Guide';
            </script><script src="https://a0.awsstatic.com/s_code/js/3.0/awshome_s_code.js" language="JavaScript" type="text/javascript"></script>
         <!--/DO NOT REMOVE/-->
         <!--End SiteCatalyst code version: H.25.2.--></div>
   </body>
</html>