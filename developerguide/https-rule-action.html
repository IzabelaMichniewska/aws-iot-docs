<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" ng-app="AWSDocsDocPageApp">
   <head>
      <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
      <title>HTTPS - AWS IoT Core</title>
      <meta name="viewport" content="width=device-width,initial-scale=1" />
      <meta name="assets_root" content="assets" />
      <meta name="target_state" content="https-rule-action" />
      <meta name="default_state" content="https-rule-action" />
      <link rel="icon" type="image/ico" href="/assets/images/favicon.ico" />
      <link rel="shortcut icon" type="image/ico" href="/assets/images/favicon.ico" />
      <link rel="canonical" href="https://docs.aws.amazon.com/iot/latest/developerguide/https-rule-action.html" />
      <meta name="description" content="Use the HTTPS rule action to send an MQTT message from AWS IoT to your web application or service at an HTTPS endpoint." />
      <meta name="deployment_region" content="IAD" />
      <meta name="product" content="AWS IoT Core" />
      <meta name="guide" content="Developer Guide" />
      <meta name="locales" content="de_de:Deutsch/en_us:English/es_es:Español/fr_fr:Français/it_it:Italiano/ja_jp:日本語/ko_kr:한국어/pt_br:Português/zh_cn:中文 (简体)/zh_tw:中文 (繁體)" />
      <meta name="abstract" content="AWS IoT provides secure, bi-directional communication between Internet-connected devices such as sensors, actuators, embedded micro-controllers, or smart appliances and the AWS Cloud. This enables you to collect telemetry data from multiple devices, and store and analyze the data. You can also create applications that enable your users to control these devices from their phones or tablets." />
      <meta name="guide-locale" content="en_us" />
      <meta name="tocs" content="toc-contents.json" />
      <meta name="feedback-item" content="IoT Docs" />
      <meta name="this_doc_product" content="AWS IoT Core" />
      <meta name="this_doc_guide" content="Developer Guide" />
      <link href="assets/css/vendor4.css" rel="stylesheet" />
      <link href="assets/css/awsdocs-common.css" rel="stylesheet" /><script type="text/javascript" src="assets/js/vendor3.js" defer=""></script><script type="text/javascript" src="assets/js/vendor4.js" defer=""></script><script type="text/javascript" src="assets/js/vendor1.js" defer=""></script><script type="text/javascript" src="assets/js/awsdocs-common.js" defer=""></script><script type="text/javascript" src="assets/js/awsdocs-doc-app.js" defer=""></script></head>
   <body class="awsdocs awsui">
      <div class="awsdocs-container">
         <awsdocs-header></awsdocs-header>
         <awsui-app-layout id="app-layout" class="awsui-util-no-gutters" ng-controller="ContentController as $ctrl" header-selector="awsdocs-header" navigation-hide="false" navigation-width="$ctrl.navWidth" navigation-open="$ctrl.navOpen" navigation-change="$ctrl.onNavChange($event)" tools-hide="$ctrl.hideTools" tools-width="$ctrl.toolsWidth" tools-open="$ctrl.toolsOpen" tools-change="$ctrl.onToolsChange($event)">
            <div id="guide-toc" dom-region="navigation">
               <awsdocs-toc></awsdocs-toc>
            </div>
            <div id="main-column" dom-region="content" tabindex="-1">
               <awsdocs-view class="awsdocs-view">
                  <div id="awsdocs-content">
                     <head>
                        <title>HTTPS - AWS IoT Core</title>
                        <meta name="pdf" content="iot-dg.pdf#https-rule-action" />
                        <meta name="kindle" content="https://www.amazon.com/dp/B07JBRCWWZ" />
                        <meta name="github" content="https://github.com/awsdocs/aws-iot-docs/tree/master/developerguide/https-rule-action.md" />
                        <meta name="forums" content="http://forums.aws.amazon.com/forum.jspa?forumID=210" />
                        <meta name="feedback" content="https://docs.aws.amazon.com/forms/aws-doc-feedback?hidden_service_name=IoT%20Docs&amp;topic_url=http://docs.aws.amazon.com/en_us/iot/latest/developerguide/https-rule-action.html" />
                        <meta name="feedback-yes" content="feedbackyes.html?topic_url=http://docs.aws.amazon.com/en_us/iot/latest/developerguide/https-rule-action.html" />
                        <meta name="feedback-no" content="feedbackno.html?topic_url=http://docs.aws.amazon.com/en_us/iot/latest/developerguide/https-rule-action.html" />
                        <meta name="keywords" content="AWS IoT,IoT,Internet of Things" />
                     </head>
                     <body>
                        <div id="main">
                           <div style="display: none"><a href="iot-dg.pdf#https-rule-action" target="_blank" rel="noopener noreferrer" title="Open PDF"></a><a target="_blank" rel="noopener noreferrer" href="https://www.amazon.com/dp/B07JBRCWWZ" title="Open Kindle"></a><a href="https://github.com/awsdocs/aws-iot-docs/tree/master/developerguide/https-rule-action.md" target="_blank" rel="noopener noreferrer" title="Edit this page on GitHub"></a></div>
                           <div id="breadcrumbs" class="breadcrumb"><a href="http://aws.amazon.com">AWS</a><a href="/index.html">Documentation</a><a href="/iot/index.html">AWS IoT Core</a><a href="what-is-aws-iot.html">Developer Guide</a></div>
                           <div id="page-toc-src"><a href="#https-rule-action-requirements">Requirements</a><a href="#https-rule-action-parameters">Parameters</a><a href="#https-rule-action-examples">Examples</a><a href="#https-rule-action-retry-logic">HTTP action retry logic</a><a href="#https-rule-action-see-also">See also</a></div>
                           <div id="main-content" class="awsui-util-container">
                              <div id="main-col-body">
                                 <awsdocs-language-banner data-service="$ctrl.pageService"></awsdocs-language-banner>
                                 <h1 class="topictitle" id="https-rule-action">HTTPS</h1>
                                 <div class="awsdocs-page-header-container">
                                    <awsdocs-page-header></awsdocs-page-header>
                                    <awsdocs-filter-selector id="awsdocs-filter-selector"></awsdocs-filter-selector>
                                 </div>
                                 <p>The HTTPS (<code class="code">http</code>) action sends data from an MQTT message to a web
                                    application or service.
                                 </p>
                                 
                                 <h2 id="https-rule-action-requirements">Requirements</h2>
                                 
                                 
                                 <p>This rule action has the following requirements:</p>
                                 
                                 
                                 <div class="itemizedlist">
                                     
                                    
                                    <ul class="itemizedlist" type="disc">
                                       <li class="listitem">
                                          
                                          <p>You must confirm and enable HTTPS endpoints before the rules engine
                                             can use them. For more information, see <a href="./rule-destination.html"> Working with topic rule destinations</a>.
                                          </p>
                                          
                                       </li>
                                    </ul>
                                 </div>
                                  
                                 
                                 <h2 id="https-rule-action-parameters">Parameters</h2>
                                 
                                 
                                 <p>When you create an AWS IoT rule with this action, you must specify the following information:</p>
                                 
                                 <div class="variablelist">
                                     
                                     
                                     
                                     
                                    
                                    <dl>
                                       
                                       <dt><span class="term"><code class="code">url</code></span></dt>
                                       
                                       <dd>
                                          
                                          <p>The HTTPS endpoint where the message is sent using the HTTP POST
                                             method. If you use an IP address in place of a hostname, it must be
                                             an IPv4 address. IPv6 addresses are not supported.
                                          </p>
                                          
                                          <p>Supports <a href="./iot-substitution-templates.html">substitution templates</a>: Yes
                                          </p>
                                          
                                       </dd>
                                        
                                       
                                       <dt><span class="term"><code class="code">confirmationUrl</code></span></dt>
                                       
                                       <dd>
                                          
                                          <p>(Optional) If specified, AWS IoT uses the confirmation URL to create
                                             a matching topic rule destination. You must enable the topic rule
                                             destination before using it in an HTTPS action. For more
                                             information, see <a href="./rule-destination.html"> Working with topic rule destinations</a>. If you use substitution
                                             templates, you must manually create topic rule destinations before
                                             the <code class="code">http</code> action can be used.
                                             <code class="code">confirmationUrl</code> must be a prefix of
                                             <code class="code">url</code>.
                                          </p>
                                          
                                          <p>The relationship between <code class="code">url</code> and
                                             <code class="code">confirmationUrl</code> is described by the
                                             following:
                                          </p>
                                          
                                          <div class="itemizedlist">
                                              
                                              
                                              
                                             
                                             <ul class="itemizedlist" type="disc">
                                                <li class="listitem">
                                                   
                                                   <p>If <code class="code">url</code> is hardcoded and
                                                      <code class="code">confirmationUrl</code> is not provided, we
                                                      implicitly treat the <code class="code">url</code> field as the
                                                      <code class="code">confirmationUrl</code>. AWS IoT creates a topic rule
                                                      destination for <code class="code">url</code>.
                                                   </p>
                                                   
                                                </li>
                                                <li class="listitem">
                                                   
                                                   <p>If <code class="code">url</code> and <code class="code">confirmationUrl</code> are
                                                      hardcoded, <code class="code">url</code> must begin with
                                                      <code class="code">confirmationUrl</code>. AWS IoT creates a topic rule
                                                      destination for <code class="code">confirmationUrl</code>.
                                                   </p>
                                                   
                                                </li>
                                                <li class="listitem">
                                                   
                                                   <p>If <code class="code">url</code> contains a substitution template, you
                                                      must specify <code class="code">confirmationUrl</code> and
                                                      <code class="code">url</code> must begin with
                                                      <code class="code">confirmationUrl</code>. If
                                                      <code class="code">confirmationUrl</code> contains substitution
                                                      templates, you must manually create topic rule destinations
                                                      before the <code class="code">http</code> action can be used. If
                                                      <code class="code">confirmationUrl</code> does not contain
                                                      substitution templates, AWS IoT creates a topic rule
                                                      destination for <code class="code">confirmationUrl</code>.
                                                   </p>
                                                   
                                                </li>
                                             </ul>
                                          </div>
                                          
                                          <p>Supports <a href="./iot-substitution-templates.html">substitution templates</a>: Yes
                                          </p>
                                          
                                       </dd>
                                        
                                       
                                       <dt><span class="term"><code class="code">headers</code></span></dt>
                                       
                                       <dd>
                                          
                                          <p>(Optional) The list of headers to include in HTTP requests to the
                                             endpoint. Each header must contain the following information:
                                          </p>
                                          
                                          <div class="variablelist">
                                              
                                              
                                             
                                             <dl>
                                                
                                                <dt><span class="term"><code class="code">key</code></span></dt>
                                                
                                                <dd>
                                                   
                                                   <p>The key of the header.</p>
                                                   
                                                   <p>Supports <a href="./iot-substitution-templates.html">substitution templates</a>: No
                                                   </p>
                                                   
                                                </dd>
                                                 
                                                
                                                <dt><span class="term"><code class="code">value</code></span></dt>
                                                
                                                <dd>
                                                   
                                                   <p>The value of the header.</p>
                                                   
                                                   <p>Supports <a href="./iot-substitution-templates.html">substitution templates</a>: Yes
                                                   </p>
                                                   
                                                </dd>
                                                
                                             </dl>
                                          </div>
                                          
                                          <div class="awsdocs-note">
                                             <div class="awsdocs-note-title">
                                                <awsui-icon name="status-info" variant="link"></awsui-icon><span>Note</span></div>
                                             <div class="awsdocs-note-text">
                                                <p>The default content type is application/json when the payload
                                                   is in JSON format. Otherwise, it is application/octet-stream.
                                                   You can overwrite it by specifying the exact content type in the
                                                   header with the key content-type (case insensitive). 
                                                </p>
                                             </div>
                                          </div>
                                          
                                       </dd>
                                        
                                       
                                       <dt><span class="term"><code class="code">auth</code></span></dt>
                                       
                                       <dd>
                                          
                                          <p>(Optional) The authentication used by the rules engine to connect
                                             to the endpoint URL specified in the <code class="code">url</code> argument.
                                             Currently, Signature Version 4 is the only supported authentication
                                             type. For more information, see <a href="https://docs.aws.amazon.com/iot/latest/apireference/API_HttpAuthorization.html">HTTP
                                                Authorization</a>.
                                          </p>
                                          
                                          <p>Supports <a href="./iot-substitution-templates.html">substitution templates</a>: No
                                          </p>
                                          
                                       </dd>
                                       
                                    </dl>
                                 </div>
                                  
                                 
                                 <h2 id="https-rule-action-examples">Examples</h2>
                                 
                                 
                                 <p>The following JSON example defines an AWS IoT rule with an HTTPS action.</p>
                                 <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class="JSON "><span>{</span>
    "topicRulePayload": <span>{</span>
        "sql": "SELECT * FROM 'some/topic'", 
        "ruleDisabled": false,
        "awsIotSqlVersion": "2016-03-23", 
        "actions": [
            <span>{</span> 
                "http": <span>{</span> 
                    "url": "https://www.example.com/subpath",
                    "confirmationUrl": "https://www.example.com", 
                    "headers": [
                        <span>{</span> 
                            "key": "static_header_key", 
                            "value": "static_header_value" 
                        },
                        <span>{</span> 
                            "key": "substitutable_header_key", 
                            "value": "$<span>{</span>value_from_payload}" 
                        }
                    ] 
                } 
            }
        ]
    }
}</code></pre>
                                  
                                 <h2 id="https-rule-action-retry-logic">HTTP action retry logic</h2>
                                 
                                 
                                 <p>The AWS IoT rules engine retries the HTTPS action according to these
                                    rules:
                                 </p>
                                 
                                 <div class="itemizedlist">
                                     
                                     
                                     
                                    
                                    <ul class="itemizedlist" type="disc">
                                       <li class="listitem">
                                          
                                          <p>The rules engine tries to send a message at least once.</p>
                                          
                                       </li>
                                       <li class="listitem">
                                          
                                          <p>The rules engine retries at most twice. The maximum number of tries is
                                             three.
                                          </p>
                                          
                                       </li>
                                       <li class="listitem">
                                          
                                          <p>The rules engine does not attempt a retry if:</p>
                                          
                                          <div class="itemizedlist">
                                              
                                              
                                              
                                              
                                             
                                             <ul class="itemizedlist" type="disc">
                                                <li class="listitem">
                                                   
                                                   <p>The previous try provided a response larger than 16384
                                                      bytes.
                                                   </p>
                                                   
                                                </li>
                                                <li class="listitem">
                                                   
                                                   <p>The downstream web service or application closes the TCP
                                                      connection after the try.
                                                   </p>
                                                   
                                                </li>
                                                <li class="listitem">
                                                   
                                                   <p>The total time to complete a request with retries exceeded the
                                                      request timeout limit.
                                                   </p>
                                                   
                                                </li>
                                                <li class="listitem">
                                                   
                                                   <p>The request returns an HTTP status code other than 429,
                                                      500-599.
                                                   </p>
                                                   
                                                </li>
                                             </ul>
                                          </div>
                                          
                                       </li>
                                    </ul>
                                 </div>
                                 
                                 <div class="awsdocs-note">
                                    <div class="awsdocs-note-title">
                                       <awsui-icon name="status-info" variant="link"></awsui-icon><span>Note</span></div>
                                    <div class="awsdocs-note-text">
                                       <p><a href="https://aws.amazon.com/ec2/pricing/on-demand/" rel="noopener noreferrer" target="_blank"><span>Standard data transfer
                                                costs</span><awsui-icon class="awsdocs-link-icon" name="external"></awsui-icon></a> apply to retries.
                                       </p>
                                    </div>
                                 </div>
                                  
                                 
                                 <h2 id="https-rule-action-see-also">See also</h2>
                                 
                                 
                                 <div class="itemizedlist">
                                     
                                     
                                    
                                    <ul class="itemizedlist" type="disc">
                                       <li class="listitem">
                                          
                                          <p><a href="./rule-destination.html"> Working with topic rule destinations</a></p>
                                          
                                       </li>
                                       <li class="listitem">
                                          
                                          <p><a href="http://aws.amazon.com/blogs/iot/route-data-directly-from-iot-core-to-your-web-services/" rel="noopener noreferrer" target="_blank"><span>Route data directly from AWS IoT Core to your web services</span><awsui-icon class="awsdocs-link-icon" name="external"></awsui-icon></a> in
                                             the <em>Internet of Things on AWS</em> blog
                                          </p>
                                          
                                       </li>
                                    </ul>
                                 </div>
                                 
                                 <awsdocs-copyright class="copyright-print"></awsdocs-copyright>
                                 <awsdocs-thumb-feedback right-edge="{{$ctrl.thumbFeedbackRightEdge}}"></awsdocs-thumb-feedback>
                              </div>
                              <noscript>
                                 <div>
                                    <div>
                                       <div>
                                          <div id="js_error_message">
                                             <p><img src="https://d1ge0kk1l5kms0.cloudfront.net/images/G/01/webservices/console/warning.png" alt="Warning" /> <strong>Javascript is disabled or is unavailable in your
                                                   browser.</strong></p>
                                             <p>To use the Amazon Web Services Documentation, Javascript must be
                                                enabled. Please refer to your browser's Help pages for instructions.
                                             </p>
                                          </div>
                                       </div>
                                    </div>
                                 </div>
                              </noscript>
                              <div id="main-col-footer" class="awsui-util-font-size-0">
                                 <div id="doc-conventions"><a target="_top" href="/general/latest/gr/docconventions.html">Document Conventions</a></div>
                                 <div class="prev-next">
                                    <div id="previous" class="prev-link" accesskey="p" href="./elasticsearch-rule-action.html">Elasticsearch</div>
                                    <div id="next" class="next-link" accesskey="n" href="./iotanalytics-rule-action.html">IoT Analytics</div>
                                 </div>
                              </div>
                              <awsdocs-page-utilities></awsdocs-page-utilities>
                           </div>
                           <div id="quick-feedback-yes" style="display: none;">
                              <div class="title">Did this page help you? - Yes</div>
                              <div class="content">
                                 <p>Thanks for letting us know we're doing a good
                                    job!
                                 </p>
                                 <p>If you've got a moment, please tell us what we did right
                                    so we can do more of it.
                                 </p>
                                 <p>
                                    <awsui-button id="fblink" target="_blank" text="Feedback" click="linkClick($event)" href="https://docs.aws.amazon.com/forms/aws-doc-feedback?hidden_service_name=IoT Docs&amp;topic_url=https://docs.aws.amazon.com/en_us/iot/latest/developerguide/https-rule-action.html"></awsui-button>
                                 </p>
                              </div>
                           </div>
                           <div id="quick-feedback-no" style="display: none;">
                              <div class="title">Did this page help you? - No</div>
                              <div class="content">
                                 <p>Thanks for letting us know this page needs work. We're
                                    sorry we let you down.
                                 </p>
                                 <p>If you've got a moment, please tell us how we can make
                                    the documentation better.
                                 </p>
                                 <p>
                                    <awsui-button id="fblink" target="_blank" text="Feedback" click="linkClick($event)" href="https://docs.aws.amazon.com/forms/aws-doc-feedback?hidden_service_name=IoT Docs&amp;topic_url=https://docs.aws.amazon.com/en_us/iot/latest/developerguide/https-rule-action.html"></awsui-button>
                                 </p>
                              </div>
                           </div>
                        </div>
                     </body>
                  </div>
               </awsdocs-view>
               <div class="page-loading-indicator" id="page-loading-indicator">
                  <awsui-spinner size="large"></awsui-spinner>
               </div>
            </div>
            <div id="tools-panel" dom-region="tools">
               <awsdocs-tools-panel id="awsdocs-tools-panel"></awsdocs-tools-panel>
            </div>
         </awsui-app-layout>
         <awsdocs-cookie-banner class="doc-cookie-banner"></awsdocs-cookie-banner>
         <!--
                SiteCatalyst code version: H.25.2.
                Copyright 1996-2012 Adobe, Inc. All Rights Reserved
                More info available at http://www.omniture.com
            --><script language="JavaScript" type="text/javascript">
var awsdocs = awsdocs || {};
awsdocs.prop66 = 'AWS IoT Core';
awsdocs.prop65 =  'Developer Guide';
            </script><script src="https://a0.awsstatic.com/s_code/js/3.0/awshome_s_code.js" language="JavaScript" type="text/javascript"></script>
         <!--/DO NOT REMOVE/-->
         <!--End SiteCatalyst code version: H.25.2.--></div>
   </body>
</html>