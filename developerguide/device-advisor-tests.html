<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" ng-app="AWSDocsDocPageApp">
   <head>
      <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
      <title>Device Advisor test cases - AWS IoT Core</title>
      <meta name="viewport" content="width=device-width,initial-scale=1" />
      <meta name="assets_root" content="assets" />
      <meta name="target_state" content="device-advisor-tests" />
      <meta name="default_state" content="device-advisor-tests" />
      <link rel="icon" type="image/ico" href="/assets/images/favicon.ico" />
      <link rel="shortcut icon" type="image/ico" href="/assets/images/favicon.ico" />
      <link rel="canonical" href="https://docs.aws.amazon.com/iot/latest/developerguide/device-advisor-tests.html" />
      <meta name="description" content="Device Advisor provides prebuilt tests in five categories." />
      <meta name="deployment_region" content="IAD" />
      <meta name="product" content="AWS IoT Core" />
      <meta name="guide" content="Developer Guide" />
      <meta name="locales" content="de_de:Deutsch/en_us:English/es_es:Español/fr_fr:Français/it_it:Italiano/ja_jp:日本語/ko_kr:한국어/pt_br:Português/zh_cn:中文 (简体)/zh_tw:中文 (繁體)" />
      <meta name="abstract" content="AWS IoT provides secure, bi-directional communication between Internet-connected devices such as sensors, actuators, embedded micro-controllers, or smart appliances and the AWS Cloud. This enables you to collect telemetry data from multiple devices, and store and analyze the data. You can also create applications that enable your users to control these devices from their phones or tablets." />
      <meta name="guide-locale" content="en_us" />
      <meta name="tocs" content="toc-contents.json" />
      <meta name="feedback-item" content="IoT Docs" />
      <meta name="this_doc_product" content="AWS IoT Core" />
      <meta name="this_doc_guide" content="Developer Guide" />
      <link href="assets/css/vendor4.css" rel="stylesheet" />
      <link href="assets/css/awsdocs-common.css" rel="stylesheet" /><script type="text/javascript" src="assets/js/vendor3.js" defer=""></script><script type="text/javascript" src="assets/js/vendor4.js" defer=""></script><script type="text/javascript" src="assets/js/vendor1.js" defer=""></script><script type="text/javascript" src="assets/js/awsdocs-common.js" defer=""></script><script type="text/javascript" src="assets/js/awsdocs-doc-app.js" defer=""></script></head>
   <body class="awsdocs awsui">
      <div class="awsdocs-container">
         <awsdocs-header></awsdocs-header>
         <awsui-app-layout id="app-layout" class="awsui-util-no-gutters" ng-controller="ContentController as $ctrl" header-selector="awsdocs-header" navigation-hide="false" navigation-width="$ctrl.navWidth" navigation-open="$ctrl.navOpen" navigation-change="$ctrl.onNavChange($event)" tools-hide="$ctrl.hideTools" tools-width="$ctrl.toolsWidth" tools-open="$ctrl.toolsOpen" tools-change="$ctrl.onToolsChange($event)">
            <div id="guide-toc" dom-region="navigation">
               <awsdocs-toc></awsdocs-toc>
            </div>
            <div id="main-column" dom-region="content" tabindex="-1">
               <awsdocs-view class="awsdocs-view">
                  <div id="awsdocs-content">
                     <head>
                        <title>Device Advisor test cases - AWS IoT Core</title>
                        <meta name="pdf" content="iot-dg.pdf#device-advisor-tests" />
                        <meta name="kindle" content="https://www.amazon.com/dp/B07JBRCWWZ" />
                        <meta name="github" content="https://github.com/awsdocs/aws-iot-docs/tree/master/developerguide/device-advisor-tests.md" />
                        <meta name="forums" content="http://forums.aws.amazon.com/forum.jspa?forumID=210" />
                        <meta name="feedback" content="https://docs.aws.amazon.com/forms/aws-doc-feedback?hidden_service_name=IoT%20Docs&amp;topic_url=http://docs.aws.amazon.com/en_us/iot/latest/developerguide/device-advisor-tests.html" />
                        <meta name="feedback-yes" content="feedbackyes.html?topic_url=http://docs.aws.amazon.com/en_us/iot/latest/developerguide/device-advisor-tests.html" />
                        <meta name="feedback-no" content="feedbackno.html?topic_url=http://docs.aws.amazon.com/en_us/iot/latest/developerguide/device-advisor-tests.html" />
                        <meta name="keywords" content="AWS IoT,IoT,Internet of Things" />
                     </head>
                     <body>
                        <div id="main">
                           <div style="display: none"><a href="iot-dg.pdf#device-advisor-tests" target="_blank" rel="noopener noreferrer" title="Open PDF"></a><a target="_blank" rel="noopener noreferrer" href="https://www.amazon.com/dp/B07JBRCWWZ" title="Open Kindle"></a><a href="https://github.com/awsdocs/aws-iot-docs/tree/master/developerguide/device-advisor-tests.md" target="_blank" rel="noopener noreferrer" title="Edit this page on GitHub"></a></div>
                           <div id="breadcrumbs" class="breadcrumb"><a href="http://aws.amazon.com">AWS</a><a href="/index.html">Documentation</a><a href="/iot/index.html">AWS IoT Core</a><a href="what-is-aws-iot.html">Developer Guide</a></div>
                           <div id="page-toc-src"><a href="#device-advisor-tests-tls">TLS</a><a href="#device-advisor-tests-permissions-policies">Permissions and policies</a><a href="#device-advisor-tests-mqtt">MQTT</a><a href="#device-advisor-tests-shadow">Shadow</a><a href="#device-advisor-test-job-execution">Job Execution</a></div>
                           <div id="main-content" class="awsui-util-container">
                              <div id="main-col-body">
                                 <awsdocs-language-banner data-service="$ctrl.pageService"></awsdocs-language-banner>
                                 <h1 class="topictitle" id="device-advisor-tests">Device Advisor test cases</h1>
                                 <div class="awsdocs-page-header-container">
                                    <awsdocs-page-header></awsdocs-page-header>
                                    <awsdocs-filter-selector id="awsdocs-filter-selector"></awsdocs-filter-selector>
                                 </div>
                                 <p>Device Advisor provides prebuilt tests in five categories.</p>
                                 <div class="itemizedlist">
                                     
                                     
                                     
                                     
                                     
                                    
                                    <ul class="itemizedlist" type="disc">
                                       <li class="listitem">
                                          
                                          <p><b>TLS</b></p>
                                          
                                       </li>
                                       <li class="listitem">
                                          
                                          <p><b>Permissions and policies</b></p>
                                          
                                       </li>
                                       <li class="listitem">
                                          
                                          <p><b>MQTT</b></p>
                                          
                                       </li>
                                       <li class="listitem">
                                          
                                          <p><b>Shadow</b></p>
                                          
                                       </li>
                                       <li class="listitem">
                                          
                                          <p><b>Job Execution</b></p>
                                          
                                       </li>
                                    </ul>
                                 </div>
                                 <div class="awsdocs-note">
                                    <div class="awsdocs-note-title">
                                       <awsui-icon name="status-info" variant="link"></awsui-icon><span>Note</span></div>
                                    <div class="awsdocs-note-text">
                                       <p>Your device needs to pass the following tests for qualification and to be able to
                                          list your device in the AWS Partner Device Catalog:
                                       </p>
                                       <div class="itemizedlist">
                                            
                                           
                                           
                                           
                                           
                                           
                                          
                                          <ul class="itemizedlist" type="disc">
                                             <li class="listitem">
                                                <p><b>TLS Incorrect Subject Name Server Cert</b> ("Incorrect Subject Common Name (CN) / Subject Alternative Name (SAN)")
                                                </p>
                                             </li>
                                             <li class="listitem">
                                                <p><b>TLS Unsecure Server Cert</b> ("Not Signed By Recognized CA")​
                                                </p>
                                             </li>
                                             <li class="listitem">
                                                <p><b>TLS Connect</b> ("TLS Connect")​
                                                </p>
                                             </li>
                                             <li class="listitem">
                                                <p><b>MQTT Connect</b> ("Device send CONNECT to AWS IoT Core (Happy case)")​
                                                </p>
                                             </li>
                                             <li class="listitem">
                                                <p><b>MQTT Subscribe</b> ("Can Subscribe (Happy Case)")​
                                                </p>
                                             </li>
                                             <li class="listitem">
                                                <p><b>MQTT Publish</b> ("QoS0 (Happy Case)")​
                                                </p>
                                             </li>
                                          </ul>
                                       </div>
                                    </div>
                                 </div>
                                 
                                 <h2 id="device-advisor-tests-tls">TLS</h2>
                                 
                                 <p>You use these tests to determine if the
                                    transport
                                    layer security protocol (TLS) between your devices and AWS IoT is secure.
                                 </p>
                                 
                                 <div class="variablelist">
                                    
                                    <p class="title"><b>Cipher suites</b></p>
                                     
                                     
                                    
                                    <dl>
                                       
                                       <dt><b><span class="term">"TLS Connect"</span></b></dt>
                                       
                                       <dd>
                                          
                                          <p>Validates if the device under test can complete TLS handshake to AWS IoT.
                                             This test doesn't validate the MQTT implementation of the client
                                             device.
                                          </p>
                                          
                                          <p><em>API test case definition:</em></p>
                                          
                                          
                                          <div class="awsdocs-note">
                                             <div class="awsdocs-note-title">
                                                <awsui-icon name="status-info" variant="link"></awsui-icon><span>Note</span></div>
                                             <div class="awsdocs-note-text">
                                                <p><code class="code">EXECUTION_TIMEOUT</code> has a default value of 5
                                                   minutes. We recommended timeout value of 2 minutes. 
                                                </p>
                                             </div>
                                          </div>
                                          <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class="JSON ">"tests":[
   <span>{</span>
      "name":"<code class="replaceable">my_tls_connect_test</code>"
      "configuration": <span>{</span>
         // optional:
         "EXECUTION_TIMEOUT":"<code class="replaceable">300</code>",  //in seconds
      },
      "test":<span>{</span>
         "id":"TLS_Connect",
         "version":"0.0.0"
      }
   }
]      </code></pre>
                                          <p>Test case outputs:</p>
                                          
                                          <p>Pass: The device under test completed TLS handshake with AWS IoT.</p>
                                          
                                          <p>Pass with warnings: The device under test completed TLS handshake with
                                             AWS IoT, but there were TLS warning messages from the device or
                                             AWS IoT.
                                          </p>
                                          
                                          <p>Fail: The device under test failed to complete TLS handshake with AWS IoT
                                             due to handshake error.
                                          </p>
                                          
                                       </dd>
                                       
                                       
                                       <dt><b><span class="term">"TLS Device Support for AWS IoT recommended Cipher Suites"</span></b></dt>
                                       
                                       <dd>
                                          
                                          <p>Validates that the cipher suites in the TLS Client Hello message from
                                             the device under test contains <a href="./transport-security.html">AWS IoT
                                                recommended cipher suites</a>. It provides additional insights
                                             into cipher suites supported by the device.
                                          </p>
                                          
                                          <p><em>API test case definition:</em></p>
                                          
                                          
                                          <div class="awsdocs-note">
                                             <div class="awsdocs-note-title">
                                                <awsui-icon name="status-info" variant="link"></awsui-icon><span>Note</span></div>
                                             <div class="awsdocs-note-text">
                                                <p><code class="code">EXECUTION_TIMEOUT</code> has a default value of 5
                                                   minutes. We recommend a timeout value of 2 minutes.
                                                </p>
                                             </div>
                                          </div>
                                          <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class="JSON ">"tests":[
   <span>{</span>
      "name":"<code class="replaceable">my_tls_support_aws_iot_cipher_suites_test</code>"
      "configuration": <span>{</span>
         // optional:
         "EXECUTION_TIMEOUT":"<code class="replaceable">300</code>",  // in seconds
      },
      "test":<span>{</span>
         "id":"TLS_Support_AWS_IoT_Cipher_Suites",
         "version":"0.0.0"
      }
   }
]      </code></pre>
                                          <p>Test case outputs:</p>
                                          
                                          <p>Pass: The device under test cipher suites contain at least one AWS IoT
                                             recommended cipher suite and don't contain any unsupported cipher
                                             suites.
                                          </p>
                                          
                                          <p>Pass with warnings: The device cipher suites contain at least one
                                             AWS IoT cipher suite but 1) don't contain any of the recommended cipher
                                             suites, or 2) contain cipher suites not supported by AWS IoT. We suggest
                                             verifying that unsupported cipher suites are safe. 
                                          </p>
                                          
                                          <p>Fail: The device under test cipher suites don't contain any of the AWS IoT
                                             supported cipher suites.
                                          </p>
                                          
                                       </dd>
                                       
                                    </dl>
                                 </div>
                                 
                                 <div class="variablelist">
                                    
                                    <p class="title"><b>Bad server certificate</b></p>
                                     
                                     
                                    
                                    <dl>
                                       
                                       <dt><b><span class="term">"Not Signed By Recognized CA"</span></b></dt>
                                       
                                       <dd>
                                          
                                          <p>Validates that the device under test closes the connection if it's
                                             presented with a server certificate that doesn't have a valid signature
                                             from the ATS CA. A device should only connect to an endpoint that
                                             presents a valid certificate.
                                          </p>
                                          
                                          <p><em>API test case definition:</em></p>
                                          
                                          <div class="awsdocs-note">
                                             <div class="awsdocs-note-title">
                                                <awsui-icon name="status-info" variant="link"></awsui-icon><span>Note</span></div>
                                             <div class="awsdocs-note-text">
                                                <p><code class="code">EXECUTION_TIMEOUT</code> has a default value of 5
                                                   minutes. We recommend a timeout value of 2 minutes. 
                                                </p>
                                             </div>
                                          </div>
                                          <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class="JSON ">"tests":[
   <span>{</span>
      "name":"<code class="replaceable">my_tls_unsecure_server_cert_test</code>"
      "configuration": <span>{</span>
         // optional:
         "EXECUTION_TIMEOUT":"<code class="replaceable">300</code>",  //in seconds
      },
      "test":<span>{</span>
         "id":"TLS_Unsecure_Server_Cert",
         "version":"0.0.0"
      }
   }
]      </code></pre>
                                          <p>Test case outputs:</p>
                                          
                                          <p>Pass: The device under test closed the connection.</p>
                                          
                                          <p>Fail: The device under test completed TLS handshake with AWS IoT.</p>
                                          
                                       </dd>
                                       
                                       
                                       <dt><b><span class="term">"Incorrect Subject Common Name (CN) / Subject Alternative Name
                                                (SAN)"</span></b></dt>
                                       
                                       <dd>
                                          
                                          <p>Validates that the device under test closes the connection if it's
                                             presented with a server certificate for a domain name that is different
                                             than the one requested.
                                          </p>
                                          
                                          <p><em>API test case definition:</em></p>
                                          
                                          <div class="awsdocs-note">
                                             <div class="awsdocs-note-title">
                                                <awsui-icon name="status-info" variant="link"></awsui-icon><span>Note</span></div>
                                             <div class="awsdocs-note-text">
                                                <p><code class="code">EXECUTION_TIMEOUT</code> has a default value of 5
                                                   minutes. We recommend a timeout value of 2 minutes. 
                                                </p>
                                             </div>
                                          </div>
                                          <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class="JSON ">"tests":[
   <span>{</span>
      "name":"<code class="replaceable">my_tls_incorrect_subject_name_cert_test</code>"
      "configuration": <span>{</span>
         // optional:
         "EXECUTION_TIMEOUT":"<code class="replaceable">300</code>",   // in seconds
      },
      "test":<span>{</span>
         "id":"TLS_Incorrect_Subject_Name_Server_Cert",
         "version":"0.0.0"
      }
   }
]      </code></pre>
                                          <p>Test case outputs:</p>
                                          
                                          <p>Pass: The device under test closed the connection.</p>
                                          
                                          <p>Fail: The device under test completed TLS handshake with AWS IoT.</p>
                                          
                                       </dd>
                                       
                                    </dl>
                                 </div>
                                  
                                 
                                 <h2 id="device-advisor-tests-permissions-policies">Permissions and policies</h2>
                                 
                                 <p>You use these tests to determine if the policies attached to your devices’ certificates
                                    follow the best practice.
                                 </p>
                                 
                                 <div class="variablelist">
                                     
                                    
                                    <dl>
                                       
                                       <dt><b><span class="term">"Device certificate attached policies don’t contain wildcards"</span></b></dt>
                                       
                                       <dd>
                                          
                                          <p> Validates if the permission policies associated with a device follow
                                             best practices and do not grant the device more permissions than
                                             needed.
                                          </p>
                                          
                                          <p><em>API test case definition:</em></p>
                                          
                                          
                                          <div class="awsdocs-note">
                                             <div class="awsdocs-note-title">
                                                <awsui-icon name="status-info" variant="link"></awsui-icon><span>Note</span></div>
                                             <div class="awsdocs-note-text">
                                                <p><code class="code">EXECUTION_TIMEOUT</code> has a default value of 1 minute. It
                                                   is recommended to set timeout for at least 30 seconds.
                                                </p>
                                             </div>
                                          </div>
                                          <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class="JSON ">"tests":[
   <span>{</span>
        "name":<code class="replaceable">"my_security_device_policies"</code>
        "configuration": <span>{</span>
            // optional:
            "EXECUTION_TIMEOUT":"60"    // in seconds
        } 
        "test": <span>{</span>
            "id": "Security_Device_Policies",
            "version": "0.0.0"
        }
    }
]     </code></pre>
                                          </dd>
                                       
                                    </dl>
                                 </div>
                                  
                                 
                                 <h2 id="device-advisor-tests-mqtt">MQTT</h2>
                                 
                                 <div class="variablelist">
                                    
                                    <p class="title"><b>CONNECT, DISCONNECT, and RECONNECT</b></p>
                                     
                                     
                                     
                                    
                                    
                                     
                                    
                                    <dl>
                                       
                                       <dt><b><span class="term">"Device send CONNECT to AWS IoT Core (Happy case)"</span></b></dt>
                                       
                                       <dd>
                                          
                                          <p>Validates that the device under test sends a CONNECT request. </p>
                                          
                                          <p><em>API test case definition:</em></p>
                                          
                                          <div class="awsdocs-note">
                                             <div class="awsdocs-note-title">
                                                <awsui-icon name="status-info" variant="link"></awsui-icon><span>Note</span></div>
                                             <div class="awsdocs-note-text">
                                                <p><code class="code">EXECUTION_TIMEOUT</code> has a default value of 5
                                                   minutes. We recommend a timeout value of 2 minutes. 
                                                </p>
                                             </div>
                                          </div>
                                          <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class="JSON ">"tests":[
   <span>{</span>
      "name":"<code class="replaceable">my_mqtt_connect_test</code>"
      "configuration": <span>{</span>
         // optional:
         "EXECUTION_TIMEOUT":"<code class="replaceable">300</code>",   // in seconds
      },
      "test":<span>{</span>
         "id":"MQTT_Connect",
         "version":"0.0.0"
      }
   }
]      </code></pre>
                                          </dd>
                                       
                                       
                                       <dt><b><span class="term">"Device re-connect with jitter backoff - No CONNACK response"</span></b></dt>
                                       
                                       <dd>
                                          
                                          <p>Validates that the device under test uses the proper jitter backoff when reconnecting
                                             with the broker for at least five times. 
                                             The broker logs the timestamp of the device under test's CONNECT request, performs
                                             packet validation, pauses without sending a CONNACK to the device under test, and
                                             waits for the device under test to resend the request. 
                                             The sixth connection attempt is allowed to pass through and CONNACK is allowed to
                                             flow back to the device under test.
                                          </p> 
                                          
                                          <p>The above process is performed again. In total, this test case requires the device
                                             to connect at least 12 times in total. 
                                             The collected timestamps are used to validate that jitter backoff is used by the device
                                             under test. 
                                             If the device under test has strictly exponential backoff delay, this test case will
                                             pass with warnings. 
                                          </p>
                                          
                                          <p><em>API test case definition:</em></p>
                                          
                                          <div class="awsdocs-note">
                                             <div class="awsdocs-note-title">
                                                <awsui-icon name="status-info" variant="link"></awsui-icon><span>Note</span></div>
                                             <div class="awsdocs-note-text">
                                                <p><code class="code">EXECUTION_TIMEOUT</code> has a default value of 10 minutes.
                                                   We recommend a timeout value of 4 minutes. 
                                                </p>
                                             </div>
                                          </div>
                                          <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class="JSON ">"tests":[
   <span>{</span>
      "name":"my_mqtt_jitter_backoff_retries_test"
      "configuration": <span>{</span>
         // optional:
         "EXECUTION_TIMEOUT":<code class="replaceable">"300"</code>,    // in seconds
      },
      "test":<span>{</span>
         "id":"MQTT_Connect_Jitter_Backoff_Retries",
         "version":"0.0.0"
      }
   }
]</code></pre>
                                          </dd>
                                       
                                       
                                       <dt><b><span class="term">"Device can return PUBACK to an arbitrary topic for QoS1"</span></b></dt>
                                       
                                       <dd>
                                          
                                          <p>This test case will check if device(client) can return PUBACK message if it received
                                             publish message from broker after subscribing to a topic with QoS1.
                                          </p>
                                          
                                          <p><em>API test case definition:</em></p>
                                          
                                          <div class="awsdocs-note">
                                             <div class="awsdocs-note-title">
                                                <awsui-icon name="status-info" variant="link"></awsui-icon><span>Note</span></div>
                                             <div class="awsdocs-note-text">
                                                <p><code class="code">EXECUTION_TIMEOUT</code> has a default value of 5 minutes.
                                                   We recommend a timeout value of 2 minutes. 
                                                </p>
                                             </div>
                                          </div>
                                          <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class="JSON ">"tests":[
   <span>{</span>
        "name":<code class="replaceable">"my_mqtt_client_puback_qos1"</code>
        "configuration": <span>{</span>
            // optional:
            "TRIGGER_TOPIC": "myTopic",
            "EXECUTION_TIMEOUT":<code class="replaceable">"300"</code>, // in seconds
            "PAYLOAD_FOR_PUBLISH_VALIDATION":<code class="replaceable">"custom payload"</code>
        } 
        "test": <span>{</span>
            "id": "MQTT_Client_Puback_Qos1",
            "version": "0.0.0"
        }
    }
]</code></pre>
                                          </dd>
                                       
                                       
                                       <dt><b><span class="term">"Device re-connect with exponential backoff - No CONNACK response"</span></b></dt>
                                       
                                       <dd>
                                          
                                          <p>Validates that the device under test uses the proper exponential backoff
                                             when reconnecting with the broker for at least five times. The broker
                                             logs the timestamp of the device under test's CONNECT request, performs
                                             packet validation, pauses without sending a CONNACK to the client
                                             device, and waits for the device under test to resend the request. The
                                             collected timestamps are used to validate that exponential backoff is
                                             used by the device under test. 
                                          </p>
                                          
                                          <p><em>API test case definition:</em></p>
                                          
                                          <div class="awsdocs-note">
                                             <div class="awsdocs-note-title">
                                                <awsui-icon name="status-info" variant="link"></awsui-icon><span>Note</span></div>
                                             <div class="awsdocs-note-text">
                                                <p><code class="code">EXECUTION_TIMEOUT</code> has a default value of 10 minutes.
                                                   We recommend a timeout value of 4 minutes. 
                                                </p>
                                             </div>
                                          </div>
                                          <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class="JSON ">"tests":[
   <span>{</span>
      "name":"<code class="replaceable">my_mqtt_exponential_backoff_retries_test</code>"
      "configuration": <span>{</span>
         // optional:
         "EXECUTION_TIMEOUT":"<code class="replaceable">600</code>",  // in seconds
      },
      "test":<span>{</span>
         "id":"MQTT_Connect_Exponential_Backoff_Retries",
         "version":"0.0.0"
      }
   }
]      </code></pre>
                                          </dd>
                                       
                                    </dl>
                                 </div>
                                 
                                 <div class="variablelist">
                                    
                                    <p class="title"><b>Publish</b></p>
                                     
                                     
                                    
                                    <dl>
                                       
                                       <dt><b><span class="term">"QoS0 (Happy Case)"</span></b></dt>
                                       
                                       <dd>
                                          
                                          <p>Validates that the device under test publishes a message with QoS0. You
                                             can also validate the topic of the message by specifying this topic
                                             value in the test settings.
                                          </p>
                                          
                                          <p><em>API test case definition:</em></p>
                                          
                                          <div class="awsdocs-note">
                                             <div class="awsdocs-note-title">
                                                <awsui-icon name="status-info" variant="link"></awsui-icon><span>Note</span></div>
                                             <div class="awsdocs-note-text">
                                                <p><code class="code">EXECUTION_TIMEOUT</code> has a default value of 5 minutes. We recommend a timeout value of 2 minutes. 
                                                </p>
                                             </div>
                                          </div>
                                          <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class="JSON ">"tests":[
   <span>{</span>
      "name":"<code class="replaceable">my_mqtt_publish_test</code>":<span>{</span>
         // optional:
         "EXECUTION_TIMEOUT":"<code class="replaceable">300</code>",  // in seconds
         "TOPIC_FOR_PUBLISH_VALIDATION": <code class="replaceable">"my_TOPIC_FOR_PUBLISH_VALIDATION"</code>,
         "PAYLOAD_FOR_PUBLISH_VALIDATION": <code class="replaceable">"my_PAYLOAD_FOR_PUBLISH_VALIDATION"</code>,
      },
      "test":<span>{</span>
         "id":"MQTT_Publish",
         "version":"0.0.0"
      }
   }
]      </code></pre>
                                          </dd>
                                       
                                       
                                       <dt><b><span class="term">"QoS1 publish retry - No PUBACK"</span></b></dt>
                                       
                                       <dd>
                                          
                                          <p>Validates that the device under test republishes a message sent with QoS1,
                                             if the broker doesn't send PUBACK. You can also validate the topic of
                                             the message by specifying this topic in the test settings. The client
                                             device must not disconnect before republishing the message. This test
                                             also validates that the republished message has the same packet
                                             identifier as the original.
                                          </p>
                                          
                                          <p><em>API test case definition:</em></p>
                                          
                                          <div class="awsdocs-note">
                                             <div class="awsdocs-note-title">
                                                <awsui-icon name="status-info" variant="link"></awsui-icon><span>Note</span></div>
                                             <div class="awsdocs-note-text">
                                                <p><code class="code">EXECUTION_TIMEOUT</code> has a default value of 5 minutes.
                                                   It is recommended for at least 4 minutes.
                                                </p>
                                             </div>
                                          </div>
                                          <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class="JSON ">"tests":[
   <span>{</span>
      "name":"<code class="replaceable">my_mqtt_publish_retry_test</code>":<span>{</span>
         // optional:
         "EXECUTION_TIMEOUT":"<code class="replaceable">300</code>",  // in seconds
         "TOPIC_FOR_PUBLISH_VALIDATION": <code class="replaceable">"my_TOPIC_FOR_PUBLISH_VALIDATION"</code>,
         "PAYLOAD_FOR_PUBLISH_VALIDATION": <code class="replaceable">"my_PAYLOAD_FOR_PUBLISH_VALIDATION"</code>,
      },
      "test":<span>{</span>
         "id":"MQTT_Publish_Retry_No_Puback",
         "version":"0.0.0"
      }
   }
]      </code></pre>
                                          </dd>
                                       
                                    </dl>
                                 </div>
                                 
                                 <div class="variablelist">
                                    
                                    <p class="title"><b>Subscribe</b></p>
                                     
                                     
                                    
                                    <dl>
                                       
                                       <dt><b><span class="term">"Can Subscribe (Happy Case)"</span></b></dt>
                                       
                                       <dd>
                                          
                                          <p>Validates that the device under test subscribes to MQTT topics. You can
                                             also validate the topic that the device under test subscribes to by
                                             specifying this topic in the test settings. 
                                          </p>
                                          
                                          <p><em>API test case definition:</em></p>
                                          
                                          <div class="awsdocs-note">
                                             <div class="awsdocs-note-title">
                                                <awsui-icon name="status-info" variant="link"></awsui-icon><span>Note</span></div>
                                             <div class="awsdocs-note-text">
                                                <p><code class="code">EXECUTION_TIMEOUT</code> has a default value of 5
                                                   minutes. We recommend a timeout value of 2 minutes. 
                                                </p>
                                             </div>
                                          </div>
                                          <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class="JSON ">"tests":[
   <span>{</span>
      "name":"<code class="replaceable">my_mqtt_subscribe_test</code>":<span>{</span>
         // optional:
         "EXECUTION_TIMEOUT":"<code class="replaceable">300</code>",  // in seconds
         "TOPIC_LIST_FOR_SUBSCRIPTION_VALIDATION_ID":[<code class="replaceable">"my_TOPIC_FOR_PUBLISH_VALIDATION_a"</code>,<code class="replaceable">"my_TOPIC_FOR_PUBLISH_VALIDATION_b"</code>]
      },
      "test":<span>{</span>
         "id":"MQTT_Subscribe",
         "version":"0.0.0"
      }
   }
]      </code></pre>
                                          </dd>
                                       
                                       
                                       <dt><b><span class="term">"Subscribe Retry - No SUBACK"</span></b></dt>
                                       
                                       <dd>
                                          
                                          <p>Validates that the device under test retries a failed subscription to MQTT
                                             topics. The server then waits and doesn't send a SUBACK. If the client
                                             device doesn't retry the subscription, the test fails. You can also
                                             validate the topic that the device under test subscribes to by specifying
                                             this topic in the test settings. 
                                          </p>
                                          
                                          <p><em>API test case definition:</em></p>
                                          
                                          <div class="awsdocs-note">
                                             <div class="awsdocs-note-title">
                                                <awsui-icon name="status-info" variant="link"></awsui-icon><span>Note</span></div>
                                             <div class="awsdocs-note-text">
                                                <p><code class="code">EXECUTION_TIMEOUT</code> has a default value of 5
                                                   minutes. We recommend a timeout value of 4 minutes. 
                                                </p>
                                             </div>
                                          </div>
                                          <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class="JSON ">"tests":[
   <span>{</span>
      "name":"<code class="replaceable">my_mqtt_subscribe_retry_test</code>":<span>{</span>
         "EXECUTION_TIMEOUT":"<code class="replaceable">300</code>",  // in seconds
         // optional:
         "TOPIC_LIST_FOR_SUBSCRIPTION_VALIDATION_ID":[<code class="replaceable">"myTOPIC_FOR_PUBLISH_VALIDATION_a"</code>,<code class="replaceable">"my_TOPIC_FOR_PUBLISH_VALIDATION_b"</code>]
      },
      "test":<span>{</span>
         "id":"MQTT_Subscribe_Retry_No_Suback",
         "version":"0.0.0"
      }
   }
]      </code></pre>
                                          </dd>
                                       
                                    </dl>
                                 </div>
                                  
                                 
                                 <h2 id="device-advisor-tests-shadow">Shadow</h2>
                                 
                                 <p>Use these test to verify your devices under test use AWS IoT Device Shadow service
                                    correctly. See 
                                    <a href="./iot-device-shadows.html">AWS IoT Device Shadow service</a> for more information. If these test cases are
                                    configured in your test suite, then providing a thing is required when starting the
                                    suite run.
                                 </p>            
                                 
                                 <div class="variablelist">
                                    
                                    <p class="title"><b>Publish</b></p>
                                     
                                    
                                    <dl>
                                       
                                       <dt><b><span class="term"><em>"Device publishes state after it connects (Happy
                                                   case)"</em></span></b></dt>
                                       
                                       <dd>
                                          
                                          <p>Validates if a device can publish its state after it connects to AWS IoT Core</p>   
                                          
                                          <p><em>API test case definition:</em></p>   
                                          
                                          <div class="awsdocs-note">
                                             <div class="awsdocs-note-title">
                                                <awsui-icon name="status-info" variant="link"></awsui-icon><span>Note</span></div>
                                             <div class="awsdocs-note-text">
                                                <p><code class="code">EXECUTION_TIMEOUT</code> has a default value of 5 minutes.
                                                   We recommend a timeout value of 2 minutes. 
                                                </p>
                                             </div>
                                          </div>
                                          <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class="JSON ">"tests":[
   <span>{</span>
      "name":<code class="replaceable">"my_shadow_publish_reported_state"</code>,
      "configuration": <span>{</span>
         // optional:
         "EXECUTION_TIMEOUT":<code class="replaceable">"300"</code>, // in seconds
         "SHADOW_NAME": "<code class="replaceable">SHADOW_NAME</code>",
         "REPORTED_STATE": <span>{</span>
            "<code class="replaceable">STATE_ATTRIBUTE</code>": "<code class="replaceable">STATE_VALUE</code>"
         }
      },
      "test":<span>{</span>
         "id":"Shadow_Publish_Reported_State",
         "version":"0.0.0"
      }
   }
]      </code></pre>
                                          <p>The <code class="code">REPORTED_STATE</code> can be provided for additional validation on your device's exact shadow state, after
                                             it connects. By default, this test case validates your 
                                             device publishing state.
                                          </p>  
                                          
                                          <p>If <code class="code"><code class="replaceable">SHADOW_NAME</code></code> is not provided, then the test case looks for 
                                             messages published to topic prefixes of the Unnamed (classic) shadow type by default.
                                             Provide a shadow name if your device uses the named shadow type. See
                                             <a href="https://docs.aws.amazon.com/iot/latest/developerguide/device-shadow-comms-device.html">Using shadows in devices</a> for more information.
                                          </p>
                                          
                                       </dd>
                                       
                                    </dl>
                                 </div>
                                 
                                 <div class="variablelist">
                                    
                                    <p class="title"><b>Update</b></p>
                                     
                                    
                                    <dl>
                                       
                                       <dt><b><span class="term"><em>"Device updates reported state to desired state (Happy case)"</em></span></b></dt>
                                       
                                       <dd>
                                          
                                          <p>Validates if your device reads all update messages received and
                                             synchronizes the device's state to match the desired state properties.
                                             Your device should publish its latest reported state after
                                             synchronizing. If your device already has an existing shadow before running the test,
                                             
                                             make sure the desired state configured for the test case and the existing reported
                                             state do not already match. 
                                             You can identify Shadow update messages sent by Device Advisor by looking at the ClientToken
                                             field in the Shadow document as it will be <code class="code">DeviceAdvisorShadowTestCaseSetup</code>. 
                                          </p>                   
                                          
                                          <p><em>API test case definition:</em></p>
                                          
                                          <div class="awsdocs-note">
                                             <div class="awsdocs-note-title">
                                                <awsui-icon name="status-info" variant="link"></awsui-icon><span>Note</span></div>
                                             <div class="awsdocs-note-text">
                                                <p><code class="code">EXECUTION_TIMEOUT</code> has a default value of 5 minutes.
                                                   We recommend a timeout value of 2 minutes. 
                                                </p>
                                             </div>
                                          </div>
                                          <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class="JSON ">"tests":[
   <span>{</span>
      "name":<code class="replaceable">"my_shadow_update_reported_state"</code>,
      "configuration": <span>{</span>
         "DESIRED_STATE": <span>{</span>
            "<code class="replaceable">STATE_ATTRIBUTE</code>": "<code class="replaceable">STATE_VALUE</code>"
         },
         // optional:
         "EXECUTION_TIMEOUT":<code class="replaceable">"300"</code>, // in seconds
         "SHADOW_NAME": "<code class="replaceable">SHADOW_NAME</code>"
      },
      "test":<span>{</span>
         "id":"Shadow_Update_Reported_State",
         "version":"0.0.0"
      }
   }
]</code></pre>
                                          <p>The <code class="code">DESIRED_STATE</code> should have at least one attribute and associated value.
                                          </p> 
                                          
                                          <p>If <code class="code">SHADOW_NAME</code> is not provided, then the test case looks for 
                                             messages published to topic prefixes of the Unnamed (classic) shadow type by default.
                                             Provide a shadow name if your device uses the named shadow type. See
                                             <a href="https://docs.aws.amazon.com/iot/latest/developerguide/device-shadow-comms-device.html">Using shadows in devices</a> for more information.
                                          </p>
                                          
                                       </dd>
                                       
                                    </dl>
                                 </div>
                                  
                                 
                                 <h2 id="device-advisor-test-job-execution">Job Execution</h2>
                                 
                                 <div class="variablelist">
                                    
                                    <p class="title"><b></b></p>
                                     
                                    
                                    <dl>
                                       
                                       <dt><b><span class="term">"Device can complete a job execution"</span></b></dt>
                                       
                                       <dd>
                                          
                                          <p>This test case helps you validate if your device is able to receive
                                             updates using AWS IoT Jobs, and publish the status of successful update. For more
                                             information on AWS IoT Jobs, see <a href="https://docs.aws.amazon.com/iot/latest/developerguide/iot-jobs.html">
                                                Jobs</a>.
                                          </p>
                                          
                                          <p><em>API test case definition:</em></p>
                                          
                                          <div class="awsdocs-note">
                                             <div class="awsdocs-note-title">
                                                <awsui-icon name="status-info" variant="link"></awsui-icon><span>Note</span></div>
                                             <div class="awsdocs-note-text">
                                                <p><code class="code">EXECUTION_TIMEOUT</code> has a default value of 5 minutes.
                                                   We recommend a timeout value of 2 minutes. 
                                                </p>
                                             </div>
                                          </div>
                                          <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class="JSON ">"tests":[
   <span>{</span>
        "name":<code class="replaceable">"my_job_execution"</code>,
        "configuration": <span>{</span>
            // Document is a JSON formatted string
            "JOB_DOCUMENT": "<span>{</span>
                "operation":"reboot",
                "files" : <span>{</span>
                   "fileName" : "install.py",
                   "url" : "$<span>{</span>aws:iot:s3-presigned-url:https://s3.amazonaws.com/bucket/key}"
            }",
            
            // Document_SOURCE is an S3 link to the job document
            // Document and document are optional but can't be both null.
            "JOB_DOCUMENT_SOURCE": "https://s3.amazonaws.com/bucket/key",
            // optional:
            "EXECUTION_TIMEOUT": "300"  // in seconds
        },
        "test": <span>{</span>
            "id": "Job_Execution",
            "version": "0.0.0"
        }
    }
]</code></pre>
                                          <p>For more information on creating and using job documents see <a href="https://docs.aws.amazon.com/iot/latest/developerguide/iot-jobs.html">job document</a>.
                                             
                                          </p>
                                          
                                       </dd>
                                       
                                    </dl>
                                 </div>
                                 
                                 <awsdocs-copyright class="copyright-print"></awsdocs-copyright>
                                 <awsdocs-thumb-feedback right-edge="{{$ctrl.thumbFeedbackRightEdge}}"></awsdocs-thumb-feedback>
                              </div>
                              <noscript>
                                 <div>
                                    <div>
                                       <div>
                                          <div id="js_error_message">
                                             <p><img src="https://d1ge0kk1l5kms0.cloudfront.net/images/G/01/webservices/console/warning.png" alt="Warning" /> <strong>Javascript is disabled or is unavailable in your
                                                   browser.</strong></p>
                                             <p>To use the Amazon Web Services Documentation, Javascript must be
                                                enabled. Please refer to your browser's Help pages for instructions.
                                             </p>
                                          </div>
                                       </div>
                                    </div>
                                 </div>
                              </noscript>
                              <div id="main-col-footer" class="awsui-util-font-size-0">
                                 <div id="doc-conventions"><a target="_top" href="/general/latest/gr/docconventions.html">Document Conventions</a></div>
                                 <div class="prev-next">
                                    <div id="previous" class="prev-link" accesskey="p" href="./device-advisor-console-tutorial.html">Device Advisor detailed console
                                       workflow
                                    </div>
                                    <div id="next" class="next-link" accesskey="n" href="./iot-events.html">Event messages</div>
                                 </div>
                              </div>
                              <awsdocs-page-utilities></awsdocs-page-utilities>
                           </div>
                           <div id="quick-feedback-yes" style="display: none;">
                              <div class="title">Did this page help you? - Yes</div>
                              <div class="content">
                                 <p>Thanks for letting us know we're doing a good
                                    job!
                                 </p>
                                 <p>If you've got a moment, please tell us what we did right
                                    so we can do more of it.
                                 </p>
                                 <p>
                                    <awsui-button id="fblink" target="_blank" text="Feedback" click="linkClick($event)" href="https://docs.aws.amazon.com/forms/aws-doc-feedback?hidden_service_name=IoT Docs&amp;topic_url=https://docs.aws.amazon.com/en_us/iot/latest/developerguide/device-advisor-tests.html"></awsui-button>
                                 </p>
                              </div>
                           </div>
                           <div id="quick-feedback-no" style="display: none;">
                              <div class="title">Did this page help you? - No</div>
                              <div class="content">
                                 <p>Thanks for letting us know this page needs work. We're
                                    sorry we let you down.
                                 </p>
                                 <p>If you've got a moment, please tell us how we can make
                                    the documentation better.
                                 </p>
                                 <p>
                                    <awsui-button id="fblink" target="_blank" text="Feedback" click="linkClick($event)" href="https://docs.aws.amazon.com/forms/aws-doc-feedback?hidden_service_name=IoT Docs&amp;topic_url=https://docs.aws.amazon.com/en_us/iot/latest/developerguide/device-advisor-tests.html"></awsui-button>
                                 </p>
                              </div>
                           </div>
                        </div>
                     </body>
                  </div>
               </awsdocs-view>
               <div class="page-loading-indicator" id="page-loading-indicator">
                  <awsui-spinner size="large"></awsui-spinner>
               </div>
            </div>
            <div id="tools-panel" dom-region="tools">
               <awsdocs-tools-panel id="awsdocs-tools-panel"></awsdocs-tools-panel>
            </div>
         </awsui-app-layout>
         <awsdocs-cookie-banner class="doc-cookie-banner"></awsdocs-cookie-banner>
         <!--
                SiteCatalyst code version: H.25.2.
                Copyright 1996-2012 Adobe, Inc. All Rights Reserved
                More info available at http://www.omniture.com
            --><script language="JavaScript" type="text/javascript">
var awsdocs = awsdocs || {};
awsdocs.prop66 = 'AWS IoT Core';
awsdocs.prop65 =  'Developer Guide';
            </script><script src="https://a0.awsstatic.com/s_code/js/3.0/awshome_s_code.js" language="JavaScript" type="text/javascript"></script>
         <!--/DO NOT REMOVE/-->
         <!--End SiteCatalyst code version: H.25.2.--></div>
   </body>
</html>