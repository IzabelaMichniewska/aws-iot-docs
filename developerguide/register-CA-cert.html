<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" ng-app="AWSDocsDocPageApp">
   <head>
      <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
      <title>Register your CA certificate - AWS IoT Core</title>
      <meta name="viewport" content="width=device-width,initial-scale=1" />
      <meta name="assets_root" content="assets" />
      <meta name="target_state" content="register-CA-cert" />
      <meta name="default_state" content="register-CA-cert" />
      <link rel="icon" type="image/ico" href="/assets/images/favicon.ico" />
      <link rel="shortcut icon" type="image/ico" href="/assets/images/favicon.ico" />
      <link rel="canonical" href="https://docs.aws.amazon.com/iot/latest/developerguide/register-CA-cert.html" />
      <meta name="description" content="You might need to register your certificate authority (CA) with AWS IoT if you are using client certificates signed by a CA that AWS IoT doesn't recognize." />
      <meta name="deployment_region" content="IAD" />
      <meta name="product" content="AWS IoT Core" />
      <meta name="guide" content="Developer Guide" />
      <meta name="locales" content="de_de:Deutsch/en_us:English/es_es:Español/fr_fr:Français/it_it:Italiano/ja_jp:日本語/ko_kr:한국어/pt_br:Português/zh_cn:中文 (简体)/zh_tw:中文 (繁體)" />
      <meta name="abstract" content="AWS IoT provides secure, bi-directional communication between Internet-connected devices such as sensors, actuators, embedded micro-controllers, or smart appliances and the AWS Cloud. This enables you to collect telemetry data from multiple devices, and store and analyze the data. You can also create applications that enable your users to control these devices from their phones or tablets." />
      <meta name="guide-locale" content="en_us" />
      <meta name="tocs" content="toc-contents.json" />
      <meta name="feedback-item" content="IoT Docs" />
      <meta name="this_doc_product" content="AWS IoT Core" />
      <meta name="this_doc_guide" content="Developer Guide" />
      <link href="assets/css/vendor4.css" rel="stylesheet" />
      <link href="assets/css/awsdocs-common.css" rel="stylesheet" /><script type="text/javascript" src="assets/js/vendor3.js" defer=""></script><script type="text/javascript" src="assets/js/vendor4.js" defer=""></script><script type="text/javascript" src="assets/js/vendor1.js" defer=""></script><script type="text/javascript" src="assets/js/awsdocs-common.js" defer=""></script><script type="text/javascript" src="assets/js/awsdocs-doc-app.js" defer=""></script></head>
   <body class="awsdocs awsui">
      <div class="awsdocs-container">
         <awsdocs-header></awsdocs-header>
         <awsui-app-layout id="app-layout" class="awsui-util-no-gutters" ng-controller="ContentController as $ctrl" header-selector="awsdocs-header" navigation-hide="false" navigation-width="$ctrl.navWidth" navigation-open="$ctrl.navOpen" navigation-change="$ctrl.onNavChange($event)" tools-hide="$ctrl.hideTools" tools-width="$ctrl.toolsWidth" tools-open="$ctrl.toolsOpen" tools-change="$ctrl.onToolsChange($event)">
            <div id="guide-toc" dom-region="navigation">
               <awsdocs-toc></awsdocs-toc>
            </div>
            <div id="main-column" dom-region="content" tabindex="-1">
               <awsdocs-view class="awsdocs-view">
                  <div id="awsdocs-content">
                     <head>
                        <title>Register your CA certificate - AWS IoT Core</title>
                        <meta name="pdf" content="iot-dg.pdf#register-CA-cert" />
                        <meta name="kindle" content="https://www.amazon.com/dp/B07JBRCWWZ" />
                        <meta name="github" content="https://github.com/awsdocs/aws-iot-docs/tree/master/developerguide/register-CA-cert.md" />
                        <meta name="forums" content="http://forums.aws.amazon.com/forum.jspa?forumID=210" />
                        <meta name="feedback" content="https://docs.aws.amazon.com/forms/aws-doc-feedback?hidden_service_name=IoT%20Docs&amp;topic_url=http://docs.aws.amazon.com/en_us/iot/latest/developerguide/register-CA-cert.html" />
                        <meta name="feedback-yes" content="feedbackyes.html?topic_url=http://docs.aws.amazon.com/en_us/iot/latest/developerguide/register-CA-cert.html" />
                        <meta name="feedback-no" content="feedbackno.html?topic_url=http://docs.aws.amazon.com/en_us/iot/latest/developerguide/register-CA-cert.html" />
                        <meta name="keywords" content="AWS IoT,IoT,Internet of Things" />
                     </head>
                     <body>
                        <div id="main">
                           <div style="display: none"><a href="iot-dg.pdf#register-CA-cert" target="_blank" rel="noopener noreferrer" title="Open PDF"></a><a target="_blank" rel="noopener noreferrer" href="https://www.amazon.com/dp/B07JBRCWWZ" title="Open Kindle"></a><a href="https://github.com/awsdocs/aws-iot-docs/tree/master/developerguide/register-CA-cert.md" target="_blank" rel="noopener noreferrer" title="Edit this page on GitHub"></a></div>
                           <div id="breadcrumbs" class="breadcrumb"><a href="http://aws.amazon.com">AWS</a><a href="/index.html">Documentation</a><a href="/iot/index.html">AWS IoT Core</a><a href="what-is-aws-iot.html">Developer Guide</a></div>
                           <div id="page-toc-src"><a href="#register-CA-cert-console">Register a CA certificate
                                 (console)</a><a href="#register-CA-cert-cli">Register a CA certificate
                                 (CLI)</a></div>
                           <div id="main-content" class="awsui-util-container">
                              <div id="main-col-body">
                                 <awsdocs-language-banner data-service="$ctrl.pageService"></awsdocs-language-banner>
                                 <h1 class="topictitle" id="register-CA-cert">Register your CA certificate</h1>
                                 <div class="awsdocs-page-header-container">
                                    <awsdocs-page-header></awsdocs-page-header>
                                    <awsdocs-filter-selector id="awsdocs-filter-selector"></awsdocs-filter-selector>
                                 </div>
                                 <p>You might need to register your certificate authority (CA) with AWS IoT if you are
                                    using client
                                    certificates signed by a CA that AWS IoT doesn't
                                    recognize.
                                 </p>
                                 <p>If you want clients to automatically register their client
                                    certificates with AWS IoT when they first connect, the CA that signed the
                                    client certificates must be registered with AWS IoT. Otherwise, you don't need
                                    to register the CA certificate that signed the client certificates.
                                 </p>
                                 <div class="awsdocs-note">
                                    <div class="awsdocs-note-title">
                                       <awsui-icon name="status-info" variant="link"></awsui-icon><span>Note</span></div>
                                    <div class="awsdocs-note-text">
                                       <p>A CA certificate can be registered by only one account in a Region.</p>
                                    </div>
                                 </div>
                                 
                                 <h2 id="register-CA-cert-console">Register a CA certificate
                                    (console)
                                 </h2>
                                 
                                 <div class="awsdocs-note">
                                    <div class="awsdocs-note-title">
                                       <awsui-icon name="status-info" variant="link"></awsui-icon><span>Note</span></div>
                                    <div class="awsdocs-note-text">
                                       <p>Make sure you have the root CA's certificate file and private
                                          key file before you begin.
                                       </p>
                                       <p>This procedure also requires using the command line interface
                                          to run <b>OpenSSL v1.1.1i</b> commands.
                                       </p>
                                    </div>
                                 </div>
                                 
                                 <div class="procedure">
                                    <p class="title"><b>To register a CA certificate using the AWS IoT console</b></p>
                                    <ol>
                                       <li>
                                          
                                          <p>Sign in to the AWS Management Console and open the <a href="https://console.aws.amazon.com/iot/home" rel="noopener noreferrer" target="_blank"><span>AWS IoT
                                                   console</span><awsui-icon class="awsdocs-link-icon" name="external"></awsui-icon></a>.
                                          </p>
                                          
                                       </li>
                                       <li>
                                          
                                          <p>In the left navigation pane, choose
                                             <b>Secure</b>, choose
                                             <b>CAs</b>, and then
                                             <b>Register</b>.
                                          </p>
                                          
                                       </li>
                                       <li>
                                          
                                          <p>In <b>Select a CA</b>, choose
                                             <b>Register CA</b>.
                                          </p>
                                          
                                       </li>
                                       <li>
                                          
                                          <p>In <b>Register a CA certificate</b>, follow the
                                             steps displayed.
                                          </p>
                                          
                                          <p>Steps 1 - 4 are performed in the command line
                                             interface.
                                          </p>
                                          
                                          <p>Steps 5 and 6 require the files created in Steps 3 and
                                             4.
                                          </p>
                                          
                                       </li>
                                       <li>
                                          
                                          <p>If you want to activate this certificate when you register it,
                                             check <b>Activate CA certificate</b>.
                                          </p>
                                          
                                          <p>The CA certificate must be active before you can register
                                             any client certificates that are signed by it.
                                          </p>
                                          
                                       </li>
                                       <li>
                                          
                                          <p>If you want to enable this certificate to automatically
                                             register client certificates signed by this certificate, select
                                             <b>Enable auto-registration of device
                                                certificates</b>.
                                          </p>
                                          
                                       </li>
                                       <li>
                                          
                                          <p>Choose <b>Register CA certificate</b> to
                                             complete the registration.
                                          </p>
                                          
                                       </li>
                                    </ol>
                                 </div>
                                 
                                 <p>The CA certificate appears in the list of certificate authorities with
                                    its current status.
                                 </p>
                                  
                                 
                                 <h2 id="register-CA-cert-cli">Register a CA certificate
                                    (CLI)
                                 </h2>
                                 
                                 <div class="awsdocs-note">
                                    <div class="awsdocs-note-title">
                                       <awsui-icon name="status-info" variant="link"></awsui-icon><span>Note</span></div>
                                    <div class="awsdocs-note-text">
                                       <p>Make sure you have the root CA's certificate file and private
                                          key file before you begin.
                                       </p>
                                    </div>
                                 </div>
                                 
                                 <div class="procedure">
                                    <p class="title"><b>To register a CA certificate using the AWS CLI</b></p>
                                    <ol>
                                       <li>
                                          
                                          <p>Use <a href="https://awscli.amazonaws.com/v2/documentation/api/latest/reference/iot/get-registration-code.html" rel="noopener noreferrer" target="_blank"><span><b>get-registration-code</b></span><awsui-icon class="awsdocs-link-icon" name="external"></awsui-icon></a> to get
                                             a registration code from AWS IoT. Save the
                                             <code class="code">registrationCode</code> returned to use as the
                                             <code class="code">Common Name</code> of the private key verification
                                             certificate.
                                          </p>
                                          <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class="nohighlight">aws iot get-registration-code</code></pre>
                                          </li>
                                       <li>
                                          
                                          <p>Generate a key pair for the private key verification
                                             certificate:
                                          </p>
                                          <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class="nohighlight">openssl genrsa -out <code class="replaceable">verification_cert_key_filename</code> 2048</code></pre>
                                          </li>
                                       <li>
                                          
                                          <p>Create a certificate signing request (CSR) for the private key
                                             verification certificate. Set the <code class="code">Common Name</code> field
                                             of the certificate to the <code class="code">registrationCode</code> returned
                                             by <b>get-registration-code</b>.
                                          </p>
                                          <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class="nohighlight">openssl req -new \
    -key <code class="replaceable">verification_cert_key_filename</code> \
    -out <code class="replaceable">verification_cert_csr_filename</code></code></pre>
                                          <p>You are prompted for some information, including the
                                             <code class="code">Common Name</code> for the certificate.
                                          </p>
                                          <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class="nohighlight">You are about to be asked to enter information that will be incorporated
into your certificate request.
What you are about to enter is what is called a Distinguished Name or a DN.
There are quite a few fields but you can leave some blank
For some fields there will be a default value,
If you enter '.', the field will be left blank.
-----
Country Name (2 letter code) [AU]:
    State or Province Name (full name) []:
    Locality Name (for example, city) []:
    Organization Name (for example, company) []:
    Organizational Unit Name (for example, section) []:
    Common Name (e.g. server FQDN or YOUR name) []:<code class="replaceable">your_registration_code</code>
    Email Address []:

    Please enter the following 'extra' attributes
    to be sent with your certificate request
    A challenge password []:
    An optional company name []:</code></pre>
                                          </li>
                                       <li>
                                          
                                          <p>Use the CSR to create a private key verification
                                             certificate:
                                          </p>
                                          <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class="nohighlight">openssl x509 -req \
                                        -in <code class="replaceable">verification_cert_csr_filename</code> \
    -CA <code class="replaceable">root_CA_pem_filename</code> \
    -CAkey <code class="replaceable">root_CA_key_filename</code> \
    -CAcreateserial \
    -out <code class="replaceable">verification_cert_pem_filename</code> \
    -days 500 -sha256</code></pre>
                                          </li>
                                       <li>
                                          
                                          <p>Register the CA certificate with AWS IoT. Pass in the CA
                                             certificate filename and the private key verification
                                             certificate filename to the <a href="https://awscli.amazonaws.com/v2/documentation/api/latest/reference/iot/register-ca-certificate.html" rel="noopener noreferrer" target="_blank"><span><b>register-ca-certificate</b></span><awsui-icon class="awsdocs-link-icon" name="external"></awsui-icon></a>
                                             command:
                                          </p>
                                          <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class="nohighlight">aws iot register-ca-certificate \
    --ca-certificate file://<code class="replaceable">root_CA_pem_filename</code> \
    --verification-cert file://<code class="replaceable">verification_cert_pem_filename</code></code></pre>
                                          <p>This command returns the
                                             <code class="replaceable">certificateId</code>, if
                                             successful.
                                          </p>
                                          
                                       </li>
                                       <li>
                                          
                                          <p>At this point, the CA certificate has been registered with
                                             AWS IoT, but is not active. The CA certificate must be active
                                             before you can register any client certificates that are signed
                                             by it.
                                          </p>
                                          <p>This step activates the CA
                                             certificate.
                                          </p>
                                          
                                          <p>Use the <a href="https://awscli.amazonaws.com/v2/documentation/api/latest/reference/iot/update-certificate.html" rel="noopener noreferrer" target="_blank"><span><b>update-certificate</b></span><awsui-icon class="awsdocs-link-icon" name="external"></awsui-icon></a> CLI
                                             command to activate the CA certificate:
                                          </p>
                                          <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class="nohighlight">aws iot update-ca-certificate \
    --certificate-id <code class="replaceable">certificateId</code> \
    --new-status ACTIVE</code></pre>
                                          </li>
                                    </ol>
                                 </div>
                                 
                                 <p>Use the <a href="https://awscli.amazonaws.com/v2/documentation/api/latest/reference/iot/describe-ca-certificate.html" rel="noopener noreferrer" target="_blank"><span><b>describe-ca-certificate</b></span><awsui-icon class="awsdocs-link-icon" name="external"></awsui-icon></a> command to
                                    see the status of the CA certificate.
                                 </p>
                                 
                                 <awsdocs-copyright class="copyright-print"></awsdocs-copyright>
                                 <awsdocs-thumb-feedback right-edge="{{$ctrl.thumbFeedbackRightEdge}}"></awsdocs-thumb-feedback>
                              </div>
                              <noscript>
                                 <div>
                                    <div>
                                       <div>
                                          <div id="js_error_message">
                                             <p><img src="https://d1ge0kk1l5kms0.cloudfront.net/images/G/01/webservices/console/warning.png" alt="Warning" /> <strong>Javascript is disabled or is unavailable in your
                                                   browser.</strong></p>
                                             <p>To use the Amazon Web Services Documentation, Javascript must be
                                                enabled. Please refer to your browser's Help pages for instructions.
                                             </p>
                                          </div>
                                       </div>
                                    </div>
                                 </div>
                              </noscript>
                              <div id="main-col-footer" class="awsui-util-font-size-0">
                                 <div id="doc-conventions"><a target="_top" href="/general/latest/gr/docconventions.html">Document Conventions</a></div>
                                 <div class="prev-next">
                                    <div id="previous" class="prev-link" accesskey="p" href="./create-your-CA-cert.html">Create a CA certificate</div>
                                    <div id="next" class="next-link" accesskey="n" href="./deactivate-ca-cert.html">Deactivate a CA certificate</div>
                                 </div>
                              </div>
                              <awsdocs-page-utilities></awsdocs-page-utilities>
                           </div>
                           <div id="quick-feedback-yes" style="display: none;">
                              <div class="title">Did this page help you? - Yes</div>
                              <div class="content">
                                 <p>Thanks for letting us know we're doing a good
                                    job!
                                 </p>
                                 <p>If you've got a moment, please tell us what we did right
                                    so we can do more of it.
                                 </p>
                                 <p>
                                    <awsui-button id="fblink" target="_blank" text="Feedback" click="linkClick($event)" href="https://docs.aws.amazon.com/forms/aws-doc-feedback?hidden_service_name=IoT Docs&amp;topic_url=https://docs.aws.amazon.com/en_us/iot/latest/developerguide/register-CA-cert.html"></awsui-button>
                                 </p>
                              </div>
                           </div>
                           <div id="quick-feedback-no" style="display: none;">
                              <div class="title">Did this page help you? - No</div>
                              <div class="content">
                                 <p>Thanks for letting us know this page needs work. We're
                                    sorry we let you down.
                                 </p>
                                 <p>If you've got a moment, please tell us how we can make
                                    the documentation better.
                                 </p>
                                 <p>
                                    <awsui-button id="fblink" target="_blank" text="Feedback" click="linkClick($event)" href="https://docs.aws.amazon.com/forms/aws-doc-feedback?hidden_service_name=IoT Docs&amp;topic_url=https://docs.aws.amazon.com/en_us/iot/latest/developerguide/register-CA-cert.html"></awsui-button>
                                 </p>
                              </div>
                           </div>
                        </div>
                     </body>
                  </div>
               </awsdocs-view>
               <div class="page-loading-indicator" id="page-loading-indicator">
                  <awsui-spinner size="large"></awsui-spinner>
               </div>
            </div>
            <div id="tools-panel" dom-region="tools">
               <awsdocs-tools-panel id="awsdocs-tools-panel"></awsdocs-tools-panel>
            </div>
         </awsui-app-layout>
         <awsdocs-cookie-banner class="doc-cookie-banner"></awsdocs-cookie-banner>
         <!--
                SiteCatalyst code version: H.25.2.
                Copyright 1996-2012 Adobe, Inc. All Rights Reserved
                More info available at http://www.omniture.com
            --><script language="JavaScript" type="text/javascript">
var awsdocs = awsdocs || {};
awsdocs.prop66 = 'AWS IoT Core';
awsdocs.prop65 =  'Developer Guide';
            </script><script src="https://a0.awsstatic.com/s_code/js/3.0/awshome_s_code.js" language="JavaScript" type="text/javascript"></script>
         <!--/DO NOT REMOVE/-->
         <!--End SiteCatalyst code version: H.25.2.--></div>
   </body>
</html>