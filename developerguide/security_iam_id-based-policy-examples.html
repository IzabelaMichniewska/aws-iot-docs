<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" ng-app="AWSDocsDocPageApp">
   <head>
      <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
      <title>AWS IoT identity-based policy examples - AWS IoT Core</title>
      <meta name="viewport" content="width=device-width,initial-scale=1" />
      <meta name="assets_root" content="assets" />
      <meta name="target_state" content="security_iam_id-based-policy-examples" />
      <meta name="default_state" content="security_iam_id-based-policy-examples" />
      <link rel="icon" type="image/ico" href="/assets/images/favicon.ico" />
      <link rel="shortcut icon" type="image/ico" href="/assets/images/favicon.ico" />
      <link rel="canonical" href="https://docs.aws.amazon.com/iot/latest/developerguide/security_iam_id-based-policy-examples.html" />
      <meta name="description" content="By default, IAM users and roles don't have permission to create or modify AWS IoT resources. They also can't perform tasks using the AWS Management Console, AWS CLI, or AWS API. An IAM administrator must create IAM policies that grant users and roles permission to perform specific API operations on the specified resources they need. The administrator must then attach those policies to the IAM users or groups that require those permissions." />
      <meta name="deployment_region" content="IAD" />
      <meta name="product" content="AWS IoT Core" />
      <meta name="guide" content="Developer Guide" />
      <meta name="locales" content="de_de:Deutsch/en_us:English/es_es:Español/fr_fr:Français/it_it:Italiano/ja_jp:日本語/ko_kr:한국어/pt_br:Português/zh_cn:中文 (简体)/zh_tw:中文 (繁體)" />
      <meta name="abstract" content="AWS IoT provides secure, bi-directional communication between Internet-connected devices such as sensors, actuators, embedded micro-controllers, or smart appliances and the AWS Cloud. This enables you to collect telemetry data from multiple devices, and store and analyze the data. You can also create applications that enable your users to control these devices from their phones or tablets." />
      <meta name="guide-locale" content="en_us" />
      <meta name="tocs" content="toc-contents.json" />
      <meta name="feedback-item" content="IoT Docs" />
      <meta name="this_doc_product" content="AWS IoT Core" />
      <meta name="this_doc_guide" content="Developer Guide" />
      <link href="assets/css/vendor4.css" rel="stylesheet" />
      <link href="assets/css/awsdocs-common.css" rel="stylesheet" /><script type="text/javascript" src="assets/js/vendor3.js" defer=""></script><script type="text/javascript" src="assets/js/vendor4.js" defer=""></script><script type="text/javascript" src="assets/js/vendor1.js" defer=""></script><script type="text/javascript" src="assets/js/awsdocs-common.js" defer=""></script><script type="text/javascript" src="assets/js/awsdocs-doc-app.js" defer=""></script></head>
   <body class="awsdocs awsui">
      <div class="awsdocs-container">
         <awsdocs-header></awsdocs-header>
         <awsui-app-layout id="app-layout" class="awsui-util-no-gutters" ng-controller="ContentController as $ctrl" header-selector="awsdocs-header" navigation-hide="false" navigation-width="$ctrl.navWidth" navigation-open="$ctrl.navOpen" navigation-change="$ctrl.onNavChange($event)" tools-hide="$ctrl.hideTools" tools-width="$ctrl.toolsWidth" tools-open="$ctrl.toolsOpen" tools-change="$ctrl.onToolsChange($event)">
            <div id="guide-toc" dom-region="navigation">
               <awsdocs-toc></awsdocs-toc>
            </div>
            <div id="main-column" dom-region="content" tabindex="-1">
               <awsdocs-view class="awsdocs-view">
                  <div id="awsdocs-content">
                     <head>
                        <title>AWS IoT identity-based policy examples - AWS IoT Core</title>
                        <meta name="pdf" content="iot-dg.pdf#security_iam_id-based-policy-examples" />
                        <meta name="kindle" content="https://www.amazon.com/dp/B07JBRCWWZ" />
                        <meta name="github" content="https://github.com/awsdocs/aws-iot-docs/tree/master/developerguide/security_iam_id-based-policy-examples.md" />
                        <meta name="forums" content="http://forums.aws.amazon.com/forum.jspa?forumID=210" />
                        <meta name="feedback" content="https://docs.aws.amazon.com/forms/aws-doc-feedback?hidden_service_name=IoT%20Docs&amp;topic_url=http://docs.aws.amazon.com/en_us/iot/latest/developerguide/security_iam_id-based-policy-examples.html" />
                        <meta name="feedback-yes" content="feedbackyes.html?topic_url=http://docs.aws.amazon.com/en_us/iot/latest/developerguide/security_iam_id-based-policy-examples.html" />
                        <meta name="feedback-no" content="feedbackno.html?topic_url=http://docs.aws.amazon.com/en_us/iot/latest/developerguide/security_iam_id-based-policy-examples.html" />
                        <meta name="keywords" content="AWS IoT,IoT,Internet of Things" />
                     </head>
                     <body>
                        <div id="main">
                           <div style="display: none"><a href="iot-dg.pdf#security_iam_id-based-policy-examples" target="_blank" rel="noopener noreferrer" title="Open PDF"></a><a target="_blank" rel="noopener noreferrer" href="https://www.amazon.com/dp/B07JBRCWWZ" title="Open Kindle"></a><a href="https://github.com/awsdocs/aws-iot-docs/tree/master/developerguide/security_iam_id-based-policy-examples.md" target="_blank" rel="noopener noreferrer" title="Edit this page on GitHub"></a></div>
                           <div id="breadcrumbs" class="breadcrumb"><a href="http://aws.amazon.com">AWS</a><a href="/index.html">Documentation</a><a href="/iot/index.html">AWS IoT Core</a><a href="what-is-aws-iot.html">Developer Guide</a></div>
                           <div id="page-toc-src"><a href="#security_iam_service-with-iam-policy-best-practices">Policy best
                                 practices</a><a href="#security_iam_id-based-policy-examples-console">Using the console</a><a href="#security_iam_id-based-policy-examples-view-own-permissions">Allow users
                                 to view their own permissions</a><a href="#security_iam_id-based-policy-examples-view-thing-tags">Viewing
                                 AWS IoT resources based on tags</a><a href="#security_iam-device-advisor-tags">Viewing AWS IoT Device Advisor
                                 resources based on tags</a></div>
                           <div id="main-content" class="awsui-util-container">
                              <div id="main-col-body">
                                 <awsdocs-language-banner data-service="$ctrl.pageService"></awsdocs-language-banner>
                                 <h1 class="topictitle" id="security_iam_id-based-policy-examples">AWS IoT identity-based
                                    policy examples
                                 </h1>
                                 <div class="awsdocs-page-header-container">
                                    <awsdocs-page-header></awsdocs-page-header>
                                    <awsdocs-filter-selector id="awsdocs-filter-selector"></awsdocs-filter-selector>
                                 </div>
                                 <p>By default, IAM users and roles don't have permission to create or modify
                                    AWS IoT resources. They also can't perform tasks using the AWS Management Console,
                                    AWS CLI, or
                                    AWS API. An IAM administrator must create IAM policies that grant users and roles
                                    permission to perform specific API operations on the specified resources they need.
                                    The
                                    administrator must then attach those policies to the IAM users or groups that require
                                    those permissions.
                                 </p>
                                 <p>To learn how to create an IAM identity-based policy using these example JSON policy
                                    documents, see <a href="https://docs.aws.amazon.com/service-authorization/latest/reference/access_policies_create.html#access_policies_create-json-editor">Creating Policies on the JSON Tab</a> in the
                                    <em>IAM User Guide</em>.
                                 </p>
                                 <div class="highlights" id="inline-topiclist">
                                    <p><strong>Topics</strong></p>
                                    <ul>
                                       <li><a href="#security_iam_service-with-iam-policy-best-practices">Policy best
                                             practices</a></li>
                                       <li><a href="#security_iam_id-based-policy-examples-console">Using the
                                             AWS IoT console</a></li>
                                       <li><a href="#security_iam_id-based-policy-examples-view-own-permissions">Allow users
                                             to view their own permissions</a></li>
                                       <li><a href="#security_iam_id-based-policy-examples-view-thing-tags">Viewing
                                             AWS IoT resources based on tags</a></li>
                                       <li><a href="#security_iam-device-advisor-tags">Viewing AWS IoT Device Advisor
                                             resources based on tags</a></li>
                                    </ul>
                                 </div>
                                 
                                 <h2 id="security_iam_service-with-iam-policy-best-practices">Policy best
                                    practices
                                 </h2>
                                 
                                 
                                 
                                 
                                 <p>Identity-based policies are very powerful. They determine whether someone can create,
                                    access, or delete AWS IoT resources in your
                                    account. These actions can incur costs for your AWS account. When you create or edit
                                    identity-based policies, follow these guidelines and
                                    recommendations:
                                 </p>
                                 
                                 <div class="itemizedlist">
                                     
                                     
                                     
                                     
                                    
                                    <ul class="itemizedlist" type="disc">
                                       <li class="listitem">
                                          
                                          <p><b>Get started using AWS managed policies</b>
                                             – To start using AWS IoT quickly, use AWS managed policies to
                                             give your employees the permissions they need. These policies are already
                                             available in your account and are maintained and updated by AWS. For more
                                             information, see <a href="https://docs.aws.amazon.com/IAM/latest/UserGuide/best-practices.html#bp-use-aws-defined-policies">Get started
                                                using permissions with AWS managed policies</a> in the
                                             <em>IAM User Guide</em>.
                                          </p>
                                          
                                       </li>
                                       <li class="listitem">
                                          
                                          <p><b>Grant least privilege</b> – When you create
                                             custom policies, grant only the permissions required to perform a task. Start with
                                             a minimum set of permissions and grant additional permissions as necessary. Doing
                                             so is more secure than starting with permissions that are too lenient and then
                                             trying to tighten them later. For more information, see <a href="https://docs.aws.amazon.com/IAM/latest/UserGuide/best-practices.html#grant-least-privilege">Grant least
                                                privilege</a> in the <em>IAM User Guide</em>.
                                          </p>
                                          
                                       </li>
                                       <li class="listitem">
                                          
                                          <p><b>Enable MFA for sensitive operations</b> –
                                             For extra security, require IAM users to use multi-factor authentication (MFA)
                                             to access sensitive resources or API operations. For more information, see <a href="https://docs.aws.amazon.com/IAM/latest/UserGuide/id_credentials_mfa.html">Using multi-factor authentication
                                                (MFA) in AWS</a> in the <em>IAM User Guide</em>.
                                          </p>
                                          
                                       </li>
                                       <li class="listitem">
                                          
                                          <p><b>Use policy conditions for extra security</b>
                                             – To the extent that it's practical, define the conditions under which your
                                             identity-based policies allow access to a resource. For example, you can write
                                             conditions to specify a range of allowable IP addresses that a request must come
                                             from. You can also write conditions to allow requests only within a specified date
                                             or time range, or to require the use of SSL or MFA. For more information, see
                                             <a href="https://docs.aws.amazon.com/IAM/latest/UserGuide/reference_policies_elements_condition.html">IAM
                                                JSON policy elements: Condition</a> in the
                                             <em>IAM User Guide</em>.
                                          </p>
                                          
                                       </li>
                                    </ul>
                                 </div>
                                  
                                 
                                 <h2 id="security_iam_id-based-policy-examples-console">Using the
                                    AWS IoT console
                                 </h2>
                                 
                                 <p>To access the AWS IoT console, you must have a minimum set of
                                    permissions. These permissions must allow you to list and view details about the
                                    AWS IoT resources in your AWS account. If you create an identity-based policy
                                    that is more restrictive than the minimum required permissions, the console won't
                                    function as intended for entities (IAM users or roles) with that policy.
                                 </p>
                                 
                                 <p>To ensure that those entities can still use the AWS IoT console, also attach
                                    the following AWS managed policy to the entities: <code class="code">AWSIoTFullAccess</code>. For
                                    more information, see <a href="https://docs.aws.amazon.com/service-authorization/latest/reference/id_users_change-permissions.html#users_change_permissions-add-console">Adding Permissions to a User</a> in the
                                    <em>IAM User Guide</em>.
                                 </p>
                                 
                                 <p>You don't need to allow minimum console permissions for users that are making calls
                                    only to the AWS CLI or the AWS API. Instead, allow access to only the actions that
                                    match
                                    the API operation that you're trying to perform.
                                 </p>
                                  
                                 
                                 <h2 id="security_iam_id-based-policy-examples-view-own-permissions">Allow users
                                    to view their own permissions
                                 </h2>
                                 
                                 
                                 
                                 
                                 <p>This example shows how you might create a policy that allows IAM users to view the
                                    inline and managed policies that are attached to their user
                                    identity. This policy includes permissions to complete this action on the console
                                    or programmatically using the AWS CLI or AWS API.
                                 </p>
                                 <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class=""><span>{</span>
    "Version": "2012-10-17",
    "Statement": [
        <span>{</span>
            "Sid": "ViewOwnUserInfo",
            "Effect": "Allow",
            "Action": [
                "iam:GetUserPolicy",
                "iam:ListGroupsForUser",
                "iam:ListAttachedUserPolicies",
                "iam:ListUserPolicies",
                "iam:GetUser"
            ],
            "Resource": ["arn:aws:iam::*:user/$<span>{</span>aws:username}"]
        },
        <span>{</span>
            "Sid": "NavigateInConsole",
            "Effect": "Allow",
            "Action": [
                "iam:GetGroupPolicy",
                "iam:GetPolicyVersion",
                "iam:GetPolicy",
                "iam:ListAttachedGroupPolicies",
                "iam:ListGroupPolicies",
                "iam:ListPolicyVersions",
                "iam:ListPolicies",
                "iam:ListUsers"
            ],
            "Resource": "*"
        }
    ]
}</code></pre>
                                  
                                 <h2 id="security_iam_id-based-policy-examples-view-thing-tags">Viewing
                                    AWS IoT resources based on tags
                                 </h2>
                                 
                                 <p>You can use conditions in your identity-based policy to control access to
                                    AWS IoT resources based on tags. This example shows how you might create a
                                    policy that allows viewing a thing. However, permission is granted only if the thing
                                    tag
                                    <code class="code">Owner</code> has the value of that user's user name. This policy also grants
                                    the permissions necessary to complete this action on the console.
                                 </p>
                                 <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class=""><span>{</span>
    "Version": "2012-10-17",
    "Statement": [
        <span>{</span>
            "Sid": "ListBillingGroupsInConsole",
            "Effect": "Allow",
            "Action": "iot:ListBillingGroups",
            "Resource": "*"
        },
        <span>{</span>
            "Sid": "ViewBillingGroupsIfOwner",
            "Effect": "Allow",
           "Action": "iot:DescribeBillingGroup",
            "Resource": "arn:aws:iot:*:*:billinggroup/*",
            "Condition": <span>{</span>
                "StringEquals": <span>{</span>"aws:ResourceTag/Owner": "$<span>{</span>aws:username}"}
            }
        }
    ]
}</code></pre>
                                 <p>You can attach this policy to the IAM users in your account. If a user named
                                    <code class="code">richard-roe</code> attempts to view an AWS IoT billing group, the billing group must
                                    be tagged <code class="code">Owner=richard-roe</code> or <code class="code">owner=richard-roe</code>. Otherwise, he
                                    is denied access. The condition tag key <code class="code">Owner</code> matches both
                                    <code class="code">Owner</code> and <code class="code">owner</code> because condition key names are not
                                    case-sensitive. For more information, see <a href="https://docs.aws.amazon.com/service-authorization/latest/reference/reference_policies_elements_condition.html">IAM JSON Policy
                                       Elements: Condition</a> in the <em>IAM User Guide</em>.
                                 </p>
                                  
                                 
                                 <h2 id="security_iam-device-advisor-tags">Viewing AWS IoT Device Advisor
                                    resources based on tags
                                 </h2>
                                 
                                 <p>You can use conditions in your identity-based policy to control access to AWS IoT
                                    Device Advisor resources based on tags. The following example shows how you can create
                                    a
                                    policy that allows viewing a particular suite definition. However, permission is granted
                                    only if the suite definition tag has <code class="code">SuiteType</code> set to the value of
                                    <code class="code">MQTT</code>. This policy also grants the permissions necessary to complete this
                                    action on the console.
                                 </p>
                                 <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class=""><span>{</span>
    "Version": "2012-10-17",
    "Statement": [
        <span>{</span>
            "Sid": "ViewSuiteDefinition",
            "Effect": "Allow",
            "Action": "iotdeviceadvisor:GetSuiteDefinition",
            "Resource": "arn:aws:iotdeviceadvisor:*:*:suitedefinition/*",
            "Condition": <span>{</span>
                "StringEquals": <span>{</span>"aws:ResourceTag/SuiteType": "MQTT"}
            }
        }
    ]
}</code></pre>
                                 <awsdocs-copyright class="copyright-print"></awsdocs-copyright>
                                 <awsdocs-thumb-feedback right-edge="{{$ctrl.thumbFeedbackRightEdge}}"></awsdocs-thumb-feedback>
                              </div>
                              <noscript>
                                 <div>
                                    <div>
                                       <div>
                                          <div id="js_error_message">
                                             <p><img src="https://d1ge0kk1l5kms0.cloudfront.net/images/G/01/webservices/console/warning.png" alt="Warning" /> <strong>Javascript is disabled or is unavailable in your
                                                   browser.</strong></p>
                                             <p>To use the Amazon Web Services Documentation, Javascript must be
                                                enabled. Please refer to your browser's Help pages for instructions.
                                             </p>
                                          </div>
                                       </div>
                                    </div>
                                 </div>
                              </noscript>
                              <div id="main-col-footer" class="awsui-util-font-size-0">
                                 <div id="doc-conventions"><a target="_top" href="/general/latest/gr/docconventions.html">Document Conventions</a></div>
                                 <div class="prev-next">
                                    <div id="previous" class="prev-link" accesskey="p" href="./iam-policies.html">IAM policies</div>
                                    <div id="next" class="next-link" accesskey="n" href="./security_iam_troubleshoot.html">Troubleshooting</div>
                                 </div>
                              </div>
                              <awsdocs-page-utilities></awsdocs-page-utilities>
                           </div>
                           <div id="quick-feedback-yes" style="display: none;">
                              <div class="title">Did this page help you? - Yes</div>
                              <div class="content">
                                 <p>Thanks for letting us know we're doing a good
                                    job!
                                 </p>
                                 <p>If you've got a moment, please tell us what we did right
                                    so we can do more of it.
                                 </p>
                                 <p>
                                    <awsui-button id="fblink" target="_blank" text="Feedback" click="linkClick($event)" href="https://docs.aws.amazon.com/forms/aws-doc-feedback?hidden_service_name=IoT Docs&amp;topic_url=https://docs.aws.amazon.com/en_us/iot/latest/developerguide/security_iam_id-based-policy-examples.html"></awsui-button>
                                 </p>
                              </div>
                           </div>
                           <div id="quick-feedback-no" style="display: none;">
                              <div class="title">Did this page help you? - No</div>
                              <div class="content">
                                 <p>Thanks for letting us know this page needs work. We're
                                    sorry we let you down.
                                 </p>
                                 <p>If you've got a moment, please tell us how we can make
                                    the documentation better.
                                 </p>
                                 <p>
                                    <awsui-button id="fblink" target="_blank" text="Feedback" click="linkClick($event)" href="https://docs.aws.amazon.com/forms/aws-doc-feedback?hidden_service_name=IoT Docs&amp;topic_url=https://docs.aws.amazon.com/en_us/iot/latest/developerguide/security_iam_id-based-policy-examples.html"></awsui-button>
                                 </p>
                              </div>
                           </div>
                        </div>
                     </body>
                  </div>
               </awsdocs-view>
               <div class="page-loading-indicator" id="page-loading-indicator">
                  <awsui-spinner size="large"></awsui-spinner>
               </div>
            </div>
            <div id="tools-panel" dom-region="tools">
               <awsdocs-tools-panel id="awsdocs-tools-panel"></awsdocs-tools-panel>
            </div>
         </awsui-app-layout>
         <awsdocs-cookie-banner class="doc-cookie-banner"></awsdocs-cookie-banner>
         <!--
                SiteCatalyst code version: H.25.2.
                Copyright 1996-2012 Adobe, Inc. All Rights Reserved
                More info available at http://www.omniture.com
            --><script language="JavaScript" type="text/javascript">
var awsdocs = awsdocs || {};
awsdocs.prop66 = 'AWS IoT Core';
awsdocs.prop65 =  'Developer Guide';
            </script><script src="https://a0.awsstatic.com/s_code/js/3.0/awshome_s_code.js" language="JavaScript" type="text/javascript"></script>
         <!--/DO NOT REMOVE/-->
         <!--End SiteCatalyst code version: H.25.2.--></div>
   </body>
</html>