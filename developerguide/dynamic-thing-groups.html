<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" ng-app="AWSDocsDocPageApp">
   <head>
      <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
      <title>Dynamic thing groups - AWS IoT Core</title>
      <meta name="viewport" content="width=device-width,initial-scale=1" />
      <meta name="assets_root" content="assets" />
      <meta name="target_state" content="dynamic-thing-groups" />
      <meta name="default_state" content="dynamic-thing-groups" />
      <link rel="icon" type="image/ico" href="/assets/images/favicon.ico" />
      <link rel="shortcut icon" type="image/ico" href="/assets/images/favicon.ico" />
      <link rel="canonical" href="https://docs.aws.amazon.com/iot/latest/developerguide/dynamic-thing-groups.html" />
      <meta name="description" content="Dynamic thing groups update group membership through search queries. Using dynamic thing groups, you can change the way you interact with things depending on their connectivity, registry, or shadow data." />
      <meta name="deployment_region" content="IAD" />
      <meta name="product" content="AWS IoT Core" />
      <meta name="guide" content="Developer Guide" />
      <meta name="locales" content="de_de:Deutsch/en_us:English/es_es:Español/fr_fr:Français/it_it:Italiano/ja_jp:日本語/ko_kr:한국어/pt_br:Português/zh_cn:中文 (简体)/zh_tw:中文 (繁體)" />
      <meta name="abstract" content="AWS IoT provides secure, bi-directional communication between Internet-connected devices such as sensors, actuators, embedded micro-controllers, or smart appliances and the AWS Cloud. This enables you to collect telemetry data from multiple devices, and store and analyze the data. You can also create applications that enable your users to control these devices from their phones or tablets." />
      <meta name="guide-locale" content="en_us" />
      <meta name="tocs" content="toc-contents.json" />
      <meta name="feedback-item" content="IoT Docs" />
      <meta name="this_doc_product" content="AWS IoT Core" />
      <meta name="this_doc_guide" content="Developer Guide" />
      <link href="assets/css/vendor4.css" rel="stylesheet" />
      <link href="assets/css/awsdocs-common.css" rel="stylesheet" /><script type="text/javascript" src="assets/js/vendor3.js" defer=""></script><script type="text/javascript" src="assets/js/vendor4.js" defer=""></script><script type="text/javascript" src="assets/js/vendor1.js" defer=""></script><script type="text/javascript" src="assets/js/awsdocs-common.js" defer=""></script><script type="text/javascript" src="assets/js/awsdocs-doc-app.js" defer=""></script></head>
   <body class="awsdocs awsui">
      <div class="awsdocs-container">
         <awsdocs-header></awsdocs-header>
         <awsui-app-layout id="app-layout" class="awsui-util-no-gutters" ng-controller="ContentController as $ctrl" header-selector="awsdocs-header" navigation-hide="false" navigation-width="$ctrl.navWidth" navigation-open="$ctrl.navOpen" navigation-change="$ctrl.onNavChange($event)" tools-hide="$ctrl.hideTools" tools-width="$ctrl.toolsWidth" tools-open="$ctrl.toolsOpen" tools-change="$ctrl.onToolsChange($event)">
            <div id="guide-toc" dom-region="navigation">
               <awsdocs-toc></awsdocs-toc>
            </div>
            <div id="main-column" dom-region="content" tabindex="-1">
               <awsdocs-view class="awsdocs-view">
                  <div id="awsdocs-content">
                     <head>
                        <title>Dynamic thing groups - AWS IoT Core</title>
                        <meta name="pdf" content="iot-dg.pdf#dynamic-thing-groups" />
                        <meta name="kindle" content="https://www.amazon.com/dp/B07JBRCWWZ" />
                        <meta name="github" content="https://github.com/awsdocs/aws-iot-docs/tree/master/developerguide/dynamic-thing-groups.md" />
                        <meta name="forums" content="http://forums.aws.amazon.com/forum.jspa?forumID=210" />
                        <meta name="feedback" content="https://docs.aws.amazon.com/forms/aws-doc-feedback?hidden_service_name=IoT%20Docs&amp;topic_url=http://docs.aws.amazon.com/en_us/iot/latest/developerguide/dynamic-thing-groups.html" />
                        <meta name="feedback-yes" content="feedbackyes.html?topic_url=http://docs.aws.amazon.com/en_us/iot/latest/developerguide/dynamic-thing-groups.html" />
                        <meta name="feedback-no" content="feedbackno.html?topic_url=http://docs.aws.amazon.com/en_us/iot/latest/developerguide/dynamic-thing-groups.html" />
                        <meta name="keywords" content="AWS IoT,IoT,Internet of Things" />
                     </head>
                     <body>
                        <div id="main">
                           <div style="display: none"><a href="iot-dg.pdf#dynamic-thing-groups" target="_blank" rel="noopener noreferrer" title="Open PDF"></a><a target="_blank" rel="noopener noreferrer" href="https://www.amazon.com/dp/B07JBRCWWZ" title="Open Kindle"></a><a href="https://github.com/awsdocs/aws-iot-docs/tree/master/developerguide/dynamic-thing-groups.md" target="_blank" rel="noopener noreferrer" title="Edit this page on GitHub"></a></div>
                           <div id="breadcrumbs" class="breadcrumb"><a href="http://aws.amazon.com">AWS</a><a href="/index.html">Documentation</a><a href="/iot/index.html">AWS IoT Core</a><a href="what-is-aws-iot.html">Developer Guide</a></div>
                           <div id="page-toc-src"><a href="#create-dynamic-thing-group">Create a dynamic thing group</a><a href="#describe-dynamic-thing-group">Describe a dynamic thing
                                 group</a><a href="#update-dynamic-thing-group">Update a dynamic thing group</a><a href="#delete-dynamic-thing-group">Delete a dynamic thing group</a><a href="#dynamic-thing-group-limitations">Limitations and conflicts</a></div>
                           <div id="main-content" class="awsui-util-container">
                              <div id="main-col-body">
                                 <awsdocs-language-banner data-service="$ctrl.pageService"></awsdocs-language-banner>
                                 <h1 class="topictitle" id="dynamic-thing-groups">Dynamic thing groups</h1>
                                 <div class="awsdocs-page-header-container">
                                    <awsdocs-page-header></awsdocs-page-header>
                                    <awsdocs-filter-selector id="awsdocs-filter-selector"></awsdocs-filter-selector>
                                 </div>
                                 <p>Dynamic thing groups update group membership through search queries. Using dynamic
                                    thing groups, you can change the way you interact with things depending on their
                                    connectivity, registry, or shadow data.
                                 </p>
                                 <p>Because dynamic thing groups are tied to your fleet index, you must enable the fleet
                                    indexing service to use them. You can preview the things in a dynamic thing group
                                    before
                                    you create the group with a fleet indexing search query. For more information, see
                                    <a href="./iot-indexing.html">Fleet indexing service</a> and
                                    <a href="./query-syntax.html">Query syntax</a>.
                                 </p>
                                 <p>You can specify a dynamic thing group as a target for a job. Only things that meet
                                    the
                                    criteria that define the dynamic thing group perform the job.
                                 </p>
                                 <p>For example, suppose that you want to update the firmware on your devices, but, to
                                    minimize the chance that the update is interrupted, you only want to update firmware
                                    on
                                    devices with battery life greater than 80%. You can create a dynamic thing group that
                                    only includes devices with a reported battery life above 80%, and you can use that
                                    dynamic thing group as the target for your firmware update job. Only devices that
                                    meet
                                    your battery life criteria receive the firmware update. As devices reach the 80% battery
                                    life criteria, they are added to the dynamic thing group and receive the firmware
                                    update.
                                 </p>
                                 <p>For more information about specifying thing groups as job targets, see <a href="./jobs-http-api.html#jobs-CreateJob">CreateJob</a>.
                                 </p>
                                 <p></p>
                                 <p>Dynamic thing groups differ from static thing groups in the following ways:</p>
                                 <div class="itemizedlist">
                                     
                                     
                                     
                                     
                                     
                                    
                                    <ul class="itemizedlist" type="disc">
                                       <li class="listitem">
                                          
                                          <p>Thing membership is not explicitly defined. To create a dynamic thing group,
                                             you must define a query string that defines group membership.
                                          </p>
                                          
                                       </li>
                                       <li class="listitem">
                                          
                                          <p>Dynamic thing groups cannot be part of a hierarchy.</p>
                                          
                                       </li>
                                       <li class="listitem">
                                          
                                          <p>Dynamic thing groups cannot have policies applied to them.</p>
                                          
                                       </li>
                                       <li class="listitem">
                                          
                                          <p>You use a different set of commands to create, update, and delete dynamic
                                             thing groups. For all other operations, the same commands that you use to
                                             interact with static thing groups can be used to interact with dynamic thing
                                             groups.
                                          </p>
                                          
                                       </li>
                                       <li class="listitem">
                                          
                                          <p>The number of dynamic groups that a single account can have is <a href="https://docs.aws.amazon.com/general/latest/gr/iot-core.html#thing-group-limits">limited</a>.
                                          </p>
                                          
                                          
                                       </li>
                                    </ul>
                                 </div>
                                 <div class="itemizedlist">
                                     
                                     
                                    
                                    <ul class="itemizedlist" type="disc">
                                       <li class="listitem">
                                          
                                          <p>You should not use personally identifiable information in your thing group
                                             name. The thing group name can appear in unencrypted communications and reports. 
                                          </p>
                                          
                                       </li>
                                       <li class="listitem">
                                          
                                          <p> You should not use a colon character ( : ) in a thing group name. The colon
                                             character is used as a delimiter by other AWS IoT services and this can cause them
                                             to parse strings with thing group names incorrectly. 
                                          </p>
                                          
                                       </li>
                                    </ul>
                                 </div>
                                 <p>For more information about static thing groups, see <a href="./thing-groups.html">Static thing groups</a>.
                                 </p>
                                 <p>As an example, suppose we create a dynamic group that contains all rooms in a
                                    warehouse whose temperature is greater than 60 degrees Fahrenheit. When a room's
                                    temperature is 61 degrees or higher, it is added to the RoomTooWarm dynamic thing
                                    group.
                                    All rooms in the RoomTooWarm dynamic thing group have cooling fans turned on. When
                                    a
                                    room's temperature falls to 60 degrees or lower, it is removed from the dynamic thing
                                    group and its fan would be turned off.
                                 </p>
                                 
                                 <h2 id="create-dynamic-thing-group">Create a dynamic thing group</h2>
                                 
                                 <p>Use the <b>CreateDynamicThingGroup</b> command to create a dynamic
                                    thing group. To create a dynamic thing group for the room too warm scenario you
                                    would use the <b>create-dynamic-thing-group</b> CLI command:
                                 </p>
                                 <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class="nohighlight">$ aws iot create-dynamic-thing-group --thing-group-name "RoomTooWarm" --query-string "attributes.temperature&gt;60"</code></pre>
                                 <div class="awsdocs-note">
                                    <div class="awsdocs-note-title">
                                       <awsui-icon name="status-info" variant="link"></awsui-icon><span>Note</span></div>
                                    <div class="awsdocs-note-text">
                                       <p>We do not recommend using personally identifiable information in your dynamic
                                          thing group names.
                                       </p>
                                    </div>
                                 </div>
                                 
                                 <p>The <b>CreateDynamicThingGroup</b> command returns a response that
                                    contains the index name, query string, query version, thing group name, thing group
                                    ID, and thing group ARN:
                                 </p>
                                 <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class="JSON "><span>{</span>
    "indexName": "AWS_Things", 
    "queryVersion": "2017-09-30", 
    "thingGroupName": "RoomTooWarm", 
    "thingGroupArn": "arn:aws:iot:us-west-2:123456789012:thinggroup/RoomTooWarm", 
    "queryString": "attributes.temperature&gt;60\n", 
    "thingGroupId": "abcdefgh12345678ijklmnop12345678qrstuvwx"
}</code></pre>
                                 <p>Dynamic thing group creation is not instantaneous. The dynamic thing group
                                    backfill takes time to complete. When a dynamic thing group is created, the status
                                    of the group is set to <code class="code">BUILDING</code>. When the backfill is complete, the
                                    status changes to <code class="code">ACTIVE</code>. To check the status of your dynamic thing
                                    group, use the <a href="https://docs.aws.amazon.com/iot/latest/apireference/API_DescribeThingGroup.html">DescribeThingGroup</a> command.
                                 </p>
                                  
                                 
                                 <h2 id="describe-dynamic-thing-group">Describe a dynamic thing
                                    group
                                 </h2>
                                 
                                 <p>Use the <b>DescribeThingGroup</b> command to get information about a
                                    dynamic thing group:
                                 </p>
                                 <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class="nohighlight">$ aws iot describe-thing-group --thing-group-name "RoomTooWarm"</code></pre>
                                 <p>The <b>DescribeThingGroup</b> command returns information about the
                                    specified group:
                                 </p>
                                 <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class="JSON "><span>{</span>
    "status": "ACTIVE", 
    "indexName": "AWS_Things", 
    "thingGroupName": "RoomTooWarm", 
    "thingGroupArn": "arn:aws:iot:us-west-2:123456789012:thinggroup/RoomTooWarm", 
    "queryString": "attributes.temperature&gt;60\n", 
    "version": 1, 
    "thingGroupMetadata": <span>{</span>
        "creationDate": 1548716921.289
    }, 
    "thingGroupProperties": <span>{</span>}, 
    "queryVersion": "2017-09-30", 
    "thingGroupId": "84dd9b5b-2b98-4c65-84e4-be0e1ecf4fd8"
}
               
</code></pre>
                                 <p>Running <b>DescribeThingGroup</b> on a dynamic thing group returns
                                    attributes that are specific to dynamic thing groups, such as the queryString and
                                    the status.
                                 </p>
                                 
                                 <p>The status of a dynamic thing group can take the following values:</p>
                                 
                                 <div class="variablelist">
                                     
                                     
                                     
                                    
                                    <dl>
                                       
                                       <dt><span class="term"><code class="code">ACTIVE</code></span></dt>
                                       
                                       <dd>
                                          
                                          <p>The dynamic thing group is ready for use.</p>
                                          
                                       </dd>
                                        
                                       
                                       <dt><span class="term"><code class="code">BUILDING</code></span></dt>
                                       
                                       <dd>
                                          
                                          <p>The dynamic thing group is being created, and thing membership is
                                             being processed.
                                          </p>
                                          
                                       </dd>
                                        
                                       
                                       <dt><span class="term"><code class="code">REBUILDING</code></span></dt>
                                       
                                       <dd>
                                          
                                          <p>The dynamic thing group's membership is being updated, following the
                                             adjustment of the group's search query.
                                          </p>
                                          
                                       </dd>
                                       
                                    </dl>
                                 </div>
                                 
                                 <div class="awsdocs-note">
                                    <div class="awsdocs-note-title">
                                       <awsui-icon name="status-info" variant="link"></awsui-icon><span>Note</span></div>
                                    <div class="awsdocs-note-text">
                                       <p>After you create a dynamic thing group, you can use the group, regardless of
                                          its status. Only dynamic thing groups with an <code class="code">ACTIVE</code> status include
                                          all of the things that match the search query for that dynamic thing group.
                                          Dynamic thing groups with <code class="code">BUILDING</code> and <code class="code">REBUILDING</code>
                                          statuses might not include all of the things that match the search query.
                                          
                                       </p>
                                    </div>
                                 </div>
                                  
                                 
                                 <h2 id="update-dynamic-thing-group">Update a dynamic thing group</h2>
                                 
                                 <p>Use the <b>UpdateDynamicThingGroup</b> command to update the
                                    attributes of a dynamic thing group, including the group's search query. The
                                    following command updates the thing group description and the query string changing
                                    the membership criteria to temperature &gt; 65:
                                 </p>
                                 <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class="nohighlight">$ aws iot update-dynamic-thing-group --thing-group-name "RoomTooWarm" --thing-group-properties "thingGroupDescription=\"This thing group contains rooms warmer than 65F.\"" --query-string "attributes.temperature&gt;65"</code></pre>
                                 <p>The <b>UpdateDynamicThingGroup</b> command returns a response that
                                    contains the group's version number after the update:
                                 </p>
                                 <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class="JSON "><span>{</span>
    "version": 2
}</code></pre>
                                 <p>Dynamic thing group updates are not instantaneous. The dynamic thing group
                                    backfill takes time to complete. When a dynamic thing group is updated, the status
                                    of the group changes to <code class="code">REBUILDING</code> while the group updates its
                                    membership. When the backfill is complete, the status changes to
                                    <code class="code">ACTIVE</code>. To check the status of your dynamic thing group, use the <a href="https://docs.aws.amazon.com/iot/latest/apireference/API_DescribeThingGroup.html">DescribeThingGroup</a>
                                    command.
                                 </p>
                                  
                                 
                                 <h2 id="delete-dynamic-thing-group">Delete a dynamic thing group</h2>
                                 
                                 <p>Use the <b>DeleteDynamicThingGroup</b> command to delete a dynamic
                                    thing group:
                                 </p>
                                 <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class="nohighlight">$ aws iot delete-dynamic-thing-group --thing-group-name "RoomTooWarm"</code></pre>
                                 <p>The <b>DeleteDynamicThingGroup</b> command does not produce any
                                    output.
                                 </p>
                                 
                                 <p>
                                    
                                    Commands that show which groups a thing belongs to (for example,
                                    <b>ListGroupsForThing</b>) might continue to show the group while
                                    records in the cloud are being updated.
                                 </p>
                                  
                                 
                                 <h2 id="dynamic-thing-group-limitations">Limitations and conflicts</h2>
                                 
                                 <p>Dynamic thing groups share these limitations with static thing groups:</p>
                                 
                                 <div class="itemizedlist">
                                     
                                     
                                     
                                     
                                    
                                    <ul class="itemizedlist" type="disc">
                                       <li class="listitem">
                                          
                                          <p>The number of attributes a thing group can have is <a href="https://docs.aws.amazon.com/general/latest/gr/iot-core.html#thing-group-limits">limited</a>.
                                          </p>
                                          
                                       </li>
                                       <li class="listitem">
                                          
                                          <p>The number of groups to which a thing can belong is <a href="https://docs.aws.amazon.com/general/latest/gr/iot-core.html#thing-limits">limited</a>.
                                          </p>
                                          
                                       </li>
                                       <li class="listitem">
                                          
                                          <p>Thing groups cannot be renamed.</p>
                                          
                                       </li>
                                       <li class="listitem">
                                          
                                          <p>Thing group names cannot contain international characters, such as û, é,
                                             and ñ.
                                          </p>
                                          
                                       </li>
                                    </ul>
                                 </div>
                                 
                                 <p>When using dynamic thing groups, keep the following in mind.</p>
                                  
                                 
                                 <h3 id="indexing-backfill-conflict">The fleet indexing service must be
                                    enabled
                                 </h3>
                                 
                                 <p>The fleet indexing service must be enabled and the fleet indexing backfill
                                    must be complete before you can create and use dynamic thing groups. Expect a
                                    delay after you enable the fleet indexing service. The backfill can take some
                                    time to complete. The more things that you have registered, the longer the
                                    backfill process takes. After you enable the fleet indexing service for dynamic
                                    thing groups, you cannot disable it until you delete all of your dynamic thing
                                    groups.
                                 </p>
                                 
                                 <div class="awsdocs-note">
                                    <div class="awsdocs-note-title">
                                       <awsui-icon name="status-info" variant="link"></awsui-icon><span>Note</span></div>
                                    <div class="awsdocs-note-text">
                                       <p>If you have permissions to query the fleet index, you can access the data
                                          of things across the entire fleet.
                                       </p>
                                    </div>
                                 </div>
                                  
                                  
                                 
                                 <h3 id="dynamic-thing-groups-limited">The number of dynamic thing
                                    groups is limited
                                 </h3>
                                 
                                 <p>The number of dynamic groups is <a href="https://docs.aws.amazon.com/general/latest/gr/iot-core.html#thing-group-limits">limited</a>.
                                 </p>
                                  
                                  
                                 
                                 <h3 id="log-errors">Successful commands can log errors</h3>
                                 
                                 <p>When creating or updating a dynamic thing group, it's possible that some
                                    things might be eligible to be in a dynamic thing group yet not be added to it.
                                    The command to create or update a dynamic thing group, however, still succeeds
                                    in those cases while logging an error and generating an <a href="./metrics_dimensions.html#iot-metrics">
                                       AddThingToDynamicThingGroupsFailed metric</a>. 
                                 </p>
                                 
                                 <p>An <a href="https://docs.aws.amazon.com/iot/latest/apireference/cwl-format.html#dynamic-group-logs">error log
                                       entry</a> in the CloudWatch log is created for each thing when an eligible
                                    thing cannot be added to a dynamic thing group or a thing is removed from a
                                    dynamic thing group to add it to another group. When a thing cannot be added to
                                    a dynamic group, an <a href="./metrics_dimensions.html#iot-metrics">
                                       AddThingToDynamicThingGroupsFailed metric</a> is also
                                    created; however, a single metric can represent multiple log entries.
                                 </p>
                                 
                                 <p>When a thing becomes eligible to be added to a dynamic thing group, the
                                    following is considered:
                                 </p>
                                 
                                 <div class="itemizedlist">
                                     
                                    
                                    <ul class="itemizedlist" type="disc">
                                       <li class="listitem">
                                          
                                          <p>Is the thing already in as many groups as it can be? (See <a href="https://docs.aws.amazon.com/general/latest/gr/iot-core.html#thing-limits">limits</a>)
                                          </p>
                                          
                                          <div class="itemizedlist">
                                              
                                              
                                             
                                             <ul class="itemizedlist" type="disc">
                                                <li class="listitem">
                                                   
                                                   <p><b>NO: </b>The thing is added to the
                                                      dynamic thing group.
                                                   </p>
                                                   
                                                </li>
                                                <li class="listitem">
                                                   
                                                   <p><b>YES:</b> Is the thing a member of
                                                      any dynamic thing groups?
                                                   </p>
                                                   
                                                   <div class="itemizedlist">
                                                       
                                                       
                                                      
                                                      <ul class="itemizedlist" type="disc">
                                                         <li class="listitem">
                                                            
                                                            <p><b>NO:</b> The thing can't
                                                               be added to the dynamic thing group, an error is logged,
                                                               and an <a href="./metrics_dimensions.html#iot-metrics">
                                                                  AddThingToDynamicThingGroupsFailed
                                                                  metric</a> is generated.
                                                            </p>
                                                            
                                                         </li>
                                                         <li class="listitem">
                                                            
                                                            <p><b>YES:</b> Is the dynamic
                                                               thing group to join older than any dynamic thing group
                                                               that the thing is already a member of?
                                                            </p>
                                                            
                                                            <div class="itemizedlist">
                                                                
                                                                
                                                               
                                                               <ul class="itemizedlist" type="disc">
                                                                  <li class="listitem">
                                                                     
                                                                     <p><b>NO:</b> The thing
                                                                        can't be added to the dynamic thing group, an
                                                                        error is logged, and an <a href="./metrics_dimensions.html#iot-metrics">
                                                                           AddThingToDynamicThingGroupsFailed
                                                                           metric</a> is generated.
                                                                     </p>
                                                                     
                                                                  </li>
                                                                  <li class="listitem">
                                                                     
                                                                     <p><b>YES:</b> Remove
                                                                        the thing from the most recent dynamic thing group
                                                                        it is a member of, log an error, and add the thing
                                                                        to the dynamic thing group. This generates an
                                                                        error and an <a href="./metrics_dimensions.html#iot-metrics">
                                                                           AddThingToDynamicThingGroupsFailed
                                                                           metric</a> for the dynamic thing group from
                                                                        which the thing was removed.
                                                                     </p>
                                                                     
                                                                  </li>
                                                               </ul>
                                                            </div>
                                                            
                                                         </li>
                                                      </ul>
                                                   </div>
                                                   
                                                </li>
                                             </ul>
                                          </div>
                                          
                                       </li>
                                    </ul>
                                 </div>
                                 
                                 <p>When a thing in a dynamic thing group no longer meets the search query, it is
                                    removed from the dynamic thing group. Likewise, when a thing is updated to meet
                                    a dynamic thing group's search query, it is then added to the group as
                                    previously described. These additions and removals are normal and do not produce
                                    error log entries. 
                                 </p>
                                  
                                  
                                 
                                 <h3 id="membership-limit">With <code class="code">overrideDynamicGroups</code>
                                    enabled, static groups take priority over dynamic groups
                                 </h3>
                                 
                                 <p>The number of groups to which a thing can belong is <a href="https://docs.aws.amazon.com/general/latest/gr/iot-core.html#thing-limits">limited</a>. When you update thing membership by using the <a href="https://docs.aws.amazon.com/iot/latest/apireference/API_AddThingToThingGroup.html">AddThingToThingGroup</a> or <a href="https://docs.aws.amazon.com/iot/latest/apireference/API_UpdateThingGroupsForThing.html">UpdateThingGroupsForThing</a> commands, adding the
                                    <code class="code">--overrideDynamicGroups</code> parameter gives static thing groups
                                    priority over dynamic thing groups.
                                 </p>
                                 
                                 <p>When adding a thing to a static thing group, the following is
                                    considered:
                                 </p>
                                 
                                 <div class="itemizedlist">
                                     
                                    
                                    <ul class="itemizedlist" type="disc">
                                       <li class="listitem">
                                          
                                          <p>Does the thing already belong to the maximum number of groups?</p>
                                          
                                          <div class="itemizedlist">
                                              
                                              
                                             
                                             <ul class="itemizedlist" type="disc">
                                                <li class="listitem">
                                                   
                                                   <p><b>NO:</b> The thing is added to the
                                                      static thing group.
                                                   </p>
                                                   
                                                </li>
                                                <li class="listitem">
                                                   
                                                   <p><b>YES:</b> Is the thing in any
                                                      dynamic groups?
                                                   </p>
                                                   
                                                   <div class="itemizedlist">
                                                       
                                                       
                                                      
                                                      <ul class="itemizedlist" type="disc">
                                                         <li class="listitem">
                                                            
                                                            <p><b>NO:</b> The thing cannot
                                                               be added to the thing group. The command raises an
                                                               exception.
                                                            </p>
                                                            
                                                         </li>
                                                         <li class="listitem">
                                                            
                                                            <p><b>YES:</b> Was
                                                               <b>--overrideDynamicGroups</b>
                                                               enabled?
                                                            </p>
                                                            
                                                            <div class="itemizedlist">
                                                                
                                                                
                                                               
                                                               <ul class="itemizedlist" type="disc">
                                                                  <li class="listitem">
                                                                     
                                                                     <p><b>NO:</b> The thing
                                                                        cannot be added to the thing group. The command
                                                                        raises an exception.
                                                                     </p>
                                                                     
                                                                  </li>
                                                                  <li class="listitem">
                                                                     
                                                                     <p><b>YES:</b> The
                                                                        thing is removed from the most recently created
                                                                        dynamic thing group, an error is logged, and an
                                                                        <a href="./metrics_dimensions.html#iot-metrics">
                                                                           AddThingToDynamicThingGroupsFailed
                                                                           metric</a> is generated for the dynamic thing
                                                                        group from which the thing was removed. Then, the
                                                                        thing is added to the static thing group.
                                                                     </p>
                                                                     
                                                                  </li>
                                                               </ul>
                                                            </div>
                                                            
                                                         </li>
                                                      </ul>
                                                   </div>
                                                   
                                                </li>
                                             </ul>
                                          </div>
                                          
                                       </li>
                                    </ul>
                                 </div>
                                  
                                  
                                 
                                 <h3 id="group-priorities">Older dynamic thing groups take priority over
                                    newer ones
                                 </h3>
                                 
                                 <p>The number of groups to which a thing can belong is <a href="https://docs.aws.amazon.com/general/latest/gr/iot-core.html#thing-limits">limited</a>. When a thing becomes eligible to be added to a dynamic
                                    thing group beca a create or update operation, and the thing is already in as
                                    many groups as it can be, it can be removed from another dynamic thing group to
                                    enable this addition. For more information about how this occurs, see <a href="#log-errors">Successful commands can log errors</a> and <a href="#membership-limit">With overrideDynamicGroups
                                       enabled, static groups take priority over dynamic groups</a> for
                                    examples.
                                 </p>
                                 
                                 <p>When a thing is removed from a dynamic thing group, an error is logged, and an
                                    event is raised.
                                 </p>
                                  
                                  
                                 
                                 <h3 id="apply-policy">You cannot apply policies to dynamic thing
                                    groups
                                 </h3>
                                 
                                 <p> Attempting to apply a policy to a dynamic thing group generates an exception.
                                    
                                 </p>
                                  
                                  
                                 
                                 <h3 id="update-conflict">Dynamic thing group membership is eventually
                                    consistent
                                 </h3>
                                 
                                 <p>Only the final state of a thing is evaluated for the registry. Intermediary
                                    states can be skipped if states are updated rapidly. Avoid associating a rule or
                                    job, with a dynamic thing group whose membership depends on an
                                    intermediary state.
                                 </p>
                                  
                                 
                                 <awsdocs-copyright class="copyright-print"></awsdocs-copyright>
                                 <awsdocs-thumb-feedback right-edge="{{$ctrl.thumbFeedbackRightEdge}}"></awsdocs-thumb-feedback>
                              </div>
                              <noscript>
                                 <div>
                                    <div>
                                       <div>
                                          <div id="js_error_message">
                                             <p><img src="https://d1ge0kk1l5kms0.cloudfront.net/images/G/01/webservices/console/warning.png" alt="Warning" /> <strong>Javascript is disabled or is unavailable in your
                                                   browser.</strong></p>
                                             <p>To use the Amazon Web Services Documentation, Javascript must be
                                                enabled. Please refer to your browser's Help pages for instructions.
                                             </p>
                                          </div>
                                       </div>
                                    </div>
                                 </div>
                              </noscript>
                              <div id="main-col-footer" class="awsui-util-font-size-0">
                                 <div id="doc-conventions"><a target="_top" href="/general/latest/gr/docconventions.html">Document Conventions</a></div>
                                 <div class="prev-next">
                                    <div id="previous" class="prev-link" accesskey="p" href="./thing-groups.html">Static thing groups</div>
                                    <div id="next" class="next-link" accesskey="n" href="./tagging-iot.html">Tagging your AWS IoT resources</div>
                                 </div>
                              </div>
                              <awsdocs-page-utilities></awsdocs-page-utilities>
                           </div>
                           <div id="quick-feedback-yes" style="display: none;">
                              <div class="title">Did this page help you? - Yes</div>
                              <div class="content">
                                 <p>Thanks for letting us know we're doing a good
                                    job!
                                 </p>
                                 <p>If you've got a moment, please tell us what we did right
                                    so we can do more of it.
                                 </p>
                                 <p>
                                    <awsui-button id="fblink" target="_blank" text="Feedback" click="linkClick($event)" href="https://docs.aws.amazon.com/forms/aws-doc-feedback?hidden_service_name=IoT Docs&amp;topic_url=https://docs.aws.amazon.com/en_us/iot/latest/developerguide/dynamic-thing-groups.html"></awsui-button>
                                 </p>
                              </div>
                           </div>
                           <div id="quick-feedback-no" style="display: none;">
                              <div class="title">Did this page help you? - No</div>
                              <div class="content">
                                 <p>Thanks for letting us know this page needs work. We're
                                    sorry we let you down.
                                 </p>
                                 <p>If you've got a moment, please tell us how we can make
                                    the documentation better.
                                 </p>
                                 <p>
                                    <awsui-button id="fblink" target="_blank" text="Feedback" click="linkClick($event)" href="https://docs.aws.amazon.com/forms/aws-doc-feedback?hidden_service_name=IoT Docs&amp;topic_url=https://docs.aws.amazon.com/en_us/iot/latest/developerguide/dynamic-thing-groups.html"></awsui-button>
                                 </p>
                              </div>
                           </div>
                        </div>
                     </body>
                  </div>
               </awsdocs-view>
               <div class="page-loading-indicator" id="page-loading-indicator">
                  <awsui-spinner size="large"></awsui-spinner>
               </div>
            </div>
            <div id="tools-panel" dom-region="tools">
               <awsdocs-tools-panel id="awsdocs-tools-panel"></awsdocs-tools-panel>
            </div>
         </awsui-app-layout>
         <awsdocs-cookie-banner class="doc-cookie-banner"></awsdocs-cookie-banner>
         <!--
                SiteCatalyst code version: H.25.2.
                Copyright 1996-2012 Adobe, Inc. All Rights Reserved
                More info available at http://www.omniture.com
            --><script language="JavaScript" type="text/javascript">
var awsdocs = awsdocs || {};
awsdocs.prop66 = 'AWS IoT Core';
awsdocs.prop65 =  'Developer Guide';
            </script><script src="https://a0.awsstatic.com/s_code/js/3.0/awshome_s_code.js" language="JavaScript" type="text/javascript"></script>
         <!--/DO NOT REMOVE/-->
         <!--End SiteCatalyst code version: H.25.2.--></div>
   </body>
</html>