<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" ng-app="AWSDocsDocPageApp">
   <head>
      <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
      <title>Connect a Raspberry Pi or another device - AWS IoT Core</title>
      <meta name="viewport" content="width=device-width,initial-scale=1" />
      <meta name="assets_root" content="assets" />
      <meta name="target_state" content="connecting-to-existing-device" />
      <meta name="default_state" content="connecting-to-existing-device" />
      <link rel="icon" type="image/ico" href="/assets/images/favicon.ico" />
      <link rel="shortcut icon" type="image/ico" href="/assets/images/favicon.ico" />
      <link rel="canonical" href="https://docs.aws.amazon.com/iot/latest/developerguide/connecting-to-existing-device.html" />
      <meta name="description" content="In this section, we'll configure a Raspberry Pi for use with AWS IoT. If you have another device that you'd like to connect, the instructions for the Raspberry Pi include references that can help you adapt these instructions to your device." />
      <meta name="deployment_region" content="IAD" />
      <meta name="product" content="AWS IoT Core" />
      <meta name="guide" content="Developer Guide" />
      <meta name="locales" content="de_de:Deutsch/en_us:English/es_es:Español/fr_fr:Français/it_it:Italiano/ja_jp:日本語/ko_kr:한국어/pt_br:Português/zh_cn:中文 (简体)/zh_tw:中文 (繁體)" />
      <meta name="abstract" content="AWS IoT provides secure, bi-directional communication between Internet-connected devices such as sensors, actuators, embedded micro-controllers, or smart appliances and the AWS Cloud. This enables you to collect telemetry data from multiple devices, and store and analyze the data. You can also create applications that enable your users to control these devices from their phones or tablets." />
      <meta name="guide-locale" content="en_us" />
      <meta name="tocs" content="toc-contents.json" />
      <meta name="feedback-item" content="IoT Docs" />
      <meta name="this_doc_product" content="AWS IoT Core" />
      <meta name="this_doc_guide" content="Developer Guide" />
      <link href="assets/css/vendor4.css" rel="stylesheet" />
      <link href="assets/css/awsdocs-common.css" rel="stylesheet" /><script type="text/javascript" src="assets/js/vendor3.js" defer=""></script><script type="text/javascript" src="assets/js/vendor4.js" defer=""></script><script type="text/javascript" src="assets/js/vendor1.js" defer=""></script><script type="text/javascript" src="assets/js/awsdocs-common.js" defer=""></script><script type="text/javascript" src="assets/js/awsdocs-doc-app.js" defer=""></script></head>
   <body class="awsdocs awsui">
      <div class="awsdocs-container">
         <awsdocs-header></awsdocs-header>
         <awsui-app-layout id="app-layout" class="awsui-util-no-gutters" ng-controller="ContentController as $ctrl" header-selector="awsdocs-header" navigation-hide="false" navigation-width="$ctrl.navWidth" navigation-open="$ctrl.navOpen" navigation-change="$ctrl.onNavChange($event)" tools-hide="$ctrl.hideTools" tools-width="$ctrl.toolsWidth" tools-open="$ctrl.toolsOpen" tools-change="$ctrl.onToolsChange($event)">
            <div id="guide-toc" dom-region="navigation">
               <awsdocs-toc></awsdocs-toc>
            </div>
            <div id="main-column" dom-region="content" tabindex="-1">
               <awsdocs-view class="awsdocs-view">
                  <div id="awsdocs-content">
                     <head>
                        <title>Connect a Raspberry Pi or another device - AWS IoT Core</title>
                        <meta name="pdf" content="iot-dg.pdf#connecting-to-existing-device" />
                        <meta name="kindle" content="https://www.amazon.com/dp/B07JBRCWWZ" />
                        <meta name="github" content="https://github.com/awsdocs/aws-iot-docs/tree/master/developerguide/connecting-to-existing-device.md" />
                        <meta name="forums" content="http://forums.aws.amazon.com/forum.jspa?forumID=210" />
                        <meta name="feedback" content="https://docs.aws.amazon.com/forms/aws-doc-feedback?hidden_service_name=IoT%20Docs&amp;topic_url=http://docs.aws.amazon.com/en_us/iot/latest/developerguide/connecting-to-existing-device.html" />
                        <meta name="feedback-yes" content="feedbackyes.html?topic_url=http://docs.aws.amazon.com/en_us/iot/latest/developerguide/connecting-to-existing-device.html" />
                        <meta name="feedback-no" content="feedbackno.html?topic_url=http://docs.aws.amazon.com/en_us/iot/latest/developerguide/connecting-to-existing-device.html" />
                        <meta name="keywords" content="AWS IoT,IoT,Internet of Things" />
                     </head>
                     <body>
                        <div id="main">
                           <div style="display: none"><a href="iot-dg.pdf#connecting-to-existing-device" target="_blank" rel="noopener noreferrer" title="Open PDF"></a><a target="_blank" rel="noopener noreferrer" href="https://www.amazon.com/dp/B07JBRCWWZ" title="Open Kindle"></a><a href="https://github.com/awsdocs/aws-iot-docs/tree/master/developerguide/connecting-to-existing-device.md" target="_blank" rel="noopener noreferrer" title="Edit this page on GitHub"></a></div>
                           <div id="breadcrumbs" class="breadcrumb"><a href="http://aws.amazon.com">AWS</a><a href="/index.html">Documentation</a><a href="/iot/index.html">AWS IoT Core</a><a href="what-is-aws-iot.html">Developer Guide</a></div>
                           <div id="page-toc-src"><a href="#gs-device-prereqs">Set up your device</a><a href="#gs-device-sdk-tools">Install the required tools and
                                 libraries for the AWS IoT Device SDK</a><a href="#gs-device-install-sdk">Install AWS IoT Device SDK</a><a href="#gs-device-node-app-run">Install and run the sample
                                 app</a><a href="#gs-device-view-msg">View messages from the sample app in the AWS IoT console</a></div>
                           <div id="main-content" class="awsui-util-container">
                              <div id="main-col-body">
                                 <awsdocs-language-banner data-service="$ctrl.pageService"></awsdocs-language-banner>
                                 <h1 class="topictitle" id="connecting-to-existing-device">Connect a Raspberry
                                    Pi or another device
                                 </h1>
                                 <div class="awsdocs-page-header-container">
                                    <awsdocs-page-header></awsdocs-page-header>
                                    <awsdocs-filter-selector id="awsdocs-filter-selector"></awsdocs-filter-selector>
                                 </div>
                                 <p>In this section, we'll configure a Raspberry Pi for use with AWS IoT. If you
                                    have another device that you'd like to connect, the instructions for the
                                    Raspberry Pi include references that can help you adapt these instructions to
                                    your device.
                                 </p>
                                 <p>This normally takes about 20 minutes, but it can take longer if you have many
                                    system software upgrades to install.
                                 </p>
                                 <div class="highlights" id="inline-topiclist">
                                    <p><strong>In this tutorial, you'll:</strong></p>
                                    <ul>
                                       <li><a href="#gs-device-prereqs">Set up your device</a></li>
                                       <li><a href="#gs-device-sdk-tools">Install the required tools and
                                             libraries for the AWS IoT Device SDK</a></li>
                                       <li><a href="#gs-device-install-sdk">Install AWS IoT Device SDK</a></li>
                                       <li><a href="#gs-device-node-app-run">Install and run the sample
                                             app</a></li>
                                       <li><a href="#gs-device-view-msg">View messages from the sample app in the AWS IoT console</a></li>
                                    </ul>
                                 </div>
                                 <div class="awsdocs-note awsdocs-important">
                                    <div class="awsdocs-note-title">
                                       <awsui-icon name="status-warning" variant="error"></awsui-icon><span>Important</span></div>
                                    <div class="awsdocs-note-text">
                                       <p>Adapting these instructions to other devices and operating systems can be
                                          challenging. You'll need to understand your device well enough to be able to
                                          interpret these instructions and apply them to your device.
                                       </p>
                                       <p>If you encounter difficulties while configuring your device for AWS IoT, we
                                          can't offer any assistance beyond the instructions in this section. However,
                                          you might try one of the other device options as an alternative, such as
                                          <a href="./creating-a-virtual-thing.html">Create a virtual device with
                                             Amazon EC2</a> or <a href="./using-laptop-as-device.html">Use your Windows or Linux
                                             PC or Mac as an AWS IoT device</a>. 
                                       </p>
                                    </div>
                                 </div>
                                 
                                 <h2 id="gs-device-prereqs">Set up your device</h2>
                                 
                                 <p>The goal of this step is to collect what you'll need to configure your
                                    device such that it can start the operating system (OS), connect to the
                                    Internet, and allow you to interact with it at a command line interface. 
                                 </p>
                                 
                                 <p>To complete this tutorial, you need the following:</p>
                                 
                                 <div class="itemizedlist">
                                     
                                     
                                     
                                     
                                     
                                    
                                    <ul class="itemizedlist" type="disc">
                                       <li class="listitem">
                                          
                                          <p>An AWS account. If you don't have one, complete the steps
                                             described in <a href="./setting-up.html">Set up your AWS account</a>
                                             before you continue. 
                                          </p>
                                          
                                       </li>
                                       <li class="listitem">
                                          
                                          <p>A <a href="https://www.raspberrypi.org/products/" rel="noopener noreferrer" target="_blank"><span>Raspberry Pi
                                                   3 Model B</span><awsui-icon class="awsdocs-link-icon" name="external"></awsui-icon></a> or more recent model. This might work on
                                             earlier versions of the Raspberry Pi, but they have not been
                                             tested.
                                          </p>
                                          
                                       </li>
                                       <li class="listitem">
                                          
                                          <p><a href="https://www.raspberrypi.org/downloads/raspberry-pi-os/" rel="noopener noreferrer" target="_blank"><span>Raspberry Pi OS (32-bit)</span><awsui-icon class="awsdocs-link-icon" name="external"></awsui-icon></a> or later. We recommend using
                                             the latest version of the Raspberry Pi OS. Earlier versions of the
                                             OS might work, but they have not been tested.
                                          </p>
                                          
                                          <p>To run this example, you do not need to install the desktop with
                                             the graphical user interface (GUI); however, if you're new to the
                                             Raspberry Pi and your Raspberry Pi hardware supports it, using the
                                             desktop with the GUI might be easier.
                                          </p>
                                          
                                       </li>
                                       <li class="listitem">
                                          
                                          <p>An Ethernet or Wi-Fi connection.</p>
                                          
                                       </li>
                                       <li class="listitem">
                                          
                                          <p>Keyboard, mouse, monitor, cables, power supplies, and other
                                             hardware required by your device.
                                          </p>
                                          
                                       </li>
                                    </ul>
                                 </div>
                                 
                                 <div class="awsdocs-note awsdocs-important">
                                    <div class="awsdocs-note-title">
                                       <awsui-icon name="status-warning" variant="error"></awsui-icon><span>Important</span></div>
                                    <div class="awsdocs-note-text">
                                       <p>Before you continue to the next step, your device must have its
                                          operating system installed, configured, and running. The device must be
                                          connected to the Internet and you will need to be able to access the
                                          device by using its command line interface. Command line access can be
                                          through a directly-connected keyboard, mouse, and monitor, or by using
                                          an SSH terminal remote interface. 
                                       </p>
                                    </div>
                                 </div>
                                 
                                 <p>                  
                                    If you are running an operating system on your Raspberry Pi that has a 
                                    graphical user interface (GUI), open a terminal window on the device 
                                    and perform the following instructions in that window. Otherwise, 
                                    if you are connecting to your device by using a remote terminal, 
                                    such as PuTTY, open a remote terminal to your device and use that.
                                 </p>
                                  
                                 
                                 <h2 id="gs-device-sdk-tools">Install the required tools and
                                    libraries for the AWS IoT Device SDK
                                 </h2>
                                 
                                 <p>Before you install the AWS IoT Device SDK and sample code, make sure your
                                    system is up-to-date and has the required tools and libraries to install the
                                    SDKs.
                                 </p>
                                 
                                 <div class="procedure">
                                    <ol>
                                       <li>
                                           
                                          
                                          <p class="title"><b>Update the operating system and install required libraries</b></p>
                                          
                                          <p>Before you install an AWS IoT Device SDK, run these commands in a 
                                             terminal window on your device to update the operating system and
                                             install the required libraries.
                                          </p>
                                            
                                          <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class="nohighlight">sudo apt-get update</code></pre>
                                          <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class="nohighlight">sudo apt-get upgrade</code></pre>
                                          <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class="nohighlight">sudo apt-get install cmake</code></pre>
                                          <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class="nohighlight">sudo apt-get install libssl-dev</code></pre>
                                          </li>
                                       <li>
                                           
                                          
                                          <p class="title"><b>Install Git</b></p>
                                          
                                          <p>If your device's operating system doesn't come with Git installed,
                                             you'll need to install it to install the AWS IoT Device SDK for
                                             JavaScript.
                                             
                                          </p>
                                           
                                          
                                          <ol>
                                             <li>
                                                <p>Test to see if Git is already installed by running this command.</p>
                                                <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class="">git --version</code></pre>
                                                </li>
                                             <li>
                                                
                                                <p>If the previous command returns the Git
                                                   version, Git is already installed and you can skip
                                                   to Step 3.
                                                </p>
                                                
                                             </li>
                                             <li>
                                                <p>If an error is displayed when you run the <b>git</b> command, install Git by
                                                   running this command.
                                                </p>
                                                <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class="bash ">sudo apt-get install git</code></pre></li>
                                             <li>
                                                <p>Test again to see if Git is installed by running this command.</p>
                                                <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class="">git --version</code></pre>
                                                </li>
                                             <li>
                                                <p>If Git is installed, continue to the next section. If not, troubleshoot and correct
                                                   the error
                                                   before continuing. You need Git to install the AWS IoT Device SDK
                                                   for JavaScript.
                                                </p>
                                             </li>
                                          </ol>
                                          
                                       </li>
                                    </ol>
                                 </div>
                                  
                                 
                                 <h2 id="gs-device-install-sdk">Install AWS IoT Device SDK</h2>
                                 
                                 <p>Install the AWS IoT Device SDK.</p>
                                 
                                 <awsdocs-tabs>
                                    <dl style="display: none">
                                       
                                       <dt>Python</dt>
                                       <dd tab-id="python">
                                          
                                          <p>In this section, you'll install Python, its development tools, and the 
                                             AWS IoT Device SDK for Python on your device.
                                             These instructions are for a Raspberry Pi running the latest Raspberry Pi OS. If
                                             you have another device or are using another operating system, you might
                                             need to adapt these instructions for your device.
                                          </p>
                                          
                                          <div class="procedure">
                                             <ol>
                                                <li>
                                                    
                                                   
                                                   <p class="title"><b>Install Python and its development tools</b></p>
                                                   
                                                   <p>The AWS IoT Device SDK for Python requires Python v3.5 or later 
                                                      to be installed on your Raspberry Pi.
                                                   </p>
                                                    
                                                   
                                                   <p>In a terminal window to your device, run these commands.</p>                                                    
                                                   
                                                   <div class="orderedlist">
                                                       
                                                       
                                                       
                                                       
                                                      
                                                      <ol>
                                                         <li>
                                                            
                                                            <p>Run this command to determine the version of Python
                                                               installed on your device.
                                                            </p>
                                                            <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class="bash ">python3 --version</code></pre>
                                                            <p>If Python is installed, it will display its version.</p>
                                                            
                                                         </li>
                                                         <li>
                                                            
                                                            <p>If the version displayed is <code class="code">Python 3.5</code> or greater, you can
                                                               skip to Step 2.
                                                            </p>
                                                            
                                                         </li>
                                                         <li>
                                                            
                                                            <p>If the version displayed is less than <code class="code">Python 3.5</code>, 
                                                               you can install the correct version by running this command.
                                                            </p>
                                                            <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class="bash ">sudo apt install python3</code></pre>
                                                            </li>
                                                         <li>
                                                            
                                                            <p>Run this command to confirm that the correct version of Python is 
                                                               now installed.
                                                            </p>                                                    
                                                            <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class="bash ">python3 --version</code></pre>
                                                            </li>
                                                      </ol>
                                                   </div>
                                                   
                                                </li>
                                                <li>
                                                    
                                                   
                                                   <p class="title"><b>Test for pip3</b></p>
                                                   
                                                   <p>In a terminal window to your device, run these commands.</p>                                                    
                                                    
                                                   
                                                   <div class="orderedlist">
                                                       
                                                       
                                                       
                                                       
                                                      
                                                      <ol>
                                                         <li>
                                                            
                                                            <p>Run this command to see if
                                                               <b>pip3</b> is installed.
                                                            </p>
                                                            <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class="bash ">pip3 --version</code></pre>
                                                            </li>
                                                         <li>
                                                            
                                                            <p>If the command returns a version number,
                                                               <b>pip3</b> is installed and you can
                                                               skip to Step 3.
                                                            </p>
                                                            
                                                         </li>
                                                         <li>
                                                            
                                                            <p>If the previous command returns an error, run
                                                               this command to install
                                                               <b>pip3</b>.
                                                            </p>
                                                            <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class="bash ">sudo apt install python3-pip</code></pre>
                                                            </li>
                                                         <li>
                                                            
                                                            <p>Run this command to see if
                                                               <b>pip3</b> is installed.
                                                            </p>
                                                            <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class="bash ">pip3 --version</code></pre>
                                                            </li>
                                                      </ol>
                                                   </div>
                                                   
                                                </li>
                                                <li>
                                                    
                                                   
                                                   <p class="title"><b>Install the current AWS IoT Device SDK for Python</b></p>
                                                   
                                                   <p>Install the AWS IoT Device SDK for Python and
                                                      download the sample apps to your device.
                                                   </p>
                                                    
                                                   
                                                   <p>On your device, run these commands.</p>
                                                   <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class="bash ">cd ~
python3 -m pip install awsiotsdk</code></pre>
                                                   <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class="nohighlight">git clone https://github.com/aws/aws-iot-device-sdk-python-v2.git</code></pre>
                                                   </li>
                                             </ol>
                                          </div>
                                          
                                       </dd>
                                       
                                       <dt>JavaScript</dt>
                                       <dd tab-id="javascript">
                                          
                                          <p>In this section, you'll install Node.js, the
                                             npm package manager, and the AWS IoT Device SDK for JavaScript on your device.
                                             These instructions are for a Raspberry Pi running the Raspberry Pi OS. If
                                             you have another device or are using another operating system, you might
                                             need to adapt these instructions for your device.
                                          </p>
                                          
                                          <div class="procedure">
                                             <ol>
                                                <li>
                                                    
                                                   
                                                   <p class="title"><b>Install the latest version of
                                                         Node.js</b></p>
                                                   
                                                   <p>The AWS IoT Device SDK for JavaScript requires Node.js and the
                                                      npm package manager to be installed on your Raspberry Pi.
                                                   </p>
                                                    
                                                   
                                                   <ol>
                                                      <li>
                                                         
                                                         <p>Download the latest version of the Node repository by entering
                                                            this command.
                                                         </p>
                                                         <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class="bash ">cd ~
curl -sL https://deb.nodesource.com/setup_12.x | sudo -E bash -</code></pre>
                                                         </li>
                                                      <li>
                                                         
                                                         <p>Install Node and npm.</p>
                                                         <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class="bash ">sudo apt-get install -y nodejs</code></pre>
                                                         </li>
                                                      <li>
                                                         
                                                         <p>Verify the installation of Node.</p>
                                                         <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class="bash ">node -v</code></pre>
                                                         <p>Confirm that the command displays the Node version. This
                                                            tutorial requires Node v10.0 or later. If the Node version isn't
                                                            displayed, try downloading the Node repository again.
                                                         </p>
                                                         
                                                      </li>
                                                      <li>
                                                         
                                                         <p>Verify the installation of npm.</p>
                                                         <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class="bash ">npm -v</code></pre>
                                                         <p>Confirm that the command displays the npm version. If the npm
                                                            version isn't displayed, try installing Node and npm
                                                            again.
                                                         </p>
                                                         
                                                      </li>
                                                      <li>
                                                         
                                                         <p>Restart the device.</p>
                                                         <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class="nohighlight">sudo shutdown -r 0</code></pre>
                                                         <p>Continue after the device restarts.</p>
                                                         
                                                      </li>
                                                   </ol>
                                                   
                                                </li>
                                                <li>
                                                    
                                                   
                                                   <p class="title"><b>Install the AWS IoT Device SDK
                                                         for JavaScript</b></p>
                                                   
                                                   <p>Install the AWS IoT Device SDK for JavaScript on your Raspberry
                                                      Pi.
                                                   </p>
                                                    
                                                   
                                                   <ol>
                                                      <li>
                                                         
                                                         <p>Install aws-crt, the common runtime library.</p>
                                                         <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class="nohighlight">cd ~
npm install aws-crt</code></pre>
                                                         </li>
                                                      <li>
                                                         
                                                         <p>Install v2 of the AWS IoT Device SDK for JavaScript.</p>
                                                         <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class="nohighlight">npm install aws-iot-device-sdk-v2</code></pre>
                                                         </li>
                                                      <li>
                                                         
                                                         <p>Clone the AWS IoT Device SDK for JavaScript repository into the
                                                            <code class="code">aws-iot-device-sdk-js-v2</code> directory of your
                                                            <code class="replaceable">home</code> directory. On the Raspberry
                                                            Pi, the <code class="replaceable">home</code> directory is
                                                            <code class="code">~/</code>, which is used as the
                                                            <code class="replaceable">home</code> directory in the following
                                                            commands. If your device uses a different path for the
                                                            <code class="replaceable">home</code> directory, you must replace
                                                            <code class="code">~/</code> with the correct path for your device in the
                                                            following commands.
                                                         </p>
                                                         
                                                         <p>These commands create the
                                                            <code class="code">~/aws-iot-device-sdk-js-v2</code> directory
                                                            and copy the SDK code into it.
                                                         </p>
                                                         <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class="bash ">cd ~
git clone https://github.com/aws/aws-iot-device-sdk-js-v2.git</code></pre>
                                                         </li>
                                                      <li>
                                                         
                                                         <p>Change to the <code class="code">aws-iot-device-sdk-js-v2</code> directory
                                                            that you created in the preceding step and install the
                                                            SDK.
                                                         </p>
                                                         <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class="bash ">cd ~/aws-iot-device-sdk-js-v2
npm install</code></pre>
                                                         </li>
                                                   </ol>
                                                   
                                                </li>
                                             </ol>
                                          </div>
                                          
                                       </dd>
                                       
                                    </dl>
                                 </awsdocs-tabs>
                                  
                                 
                                 <h2 id="gs-device-node-app-run">Install and run the sample
                                    app
                                 </h2>
                                 
                                 <p>In this section, you'll install and run the <code class="code">pubsub</code> sample app
                                    found in the AWS IoT Device SDK. This app shows how your device uses the MQTT
                                    library to publish and subscribe to MQTT messages. The sample app subscribes
                                    to a topic, <code class="code">topic_1</code>, publishes 10 messages to that topic, and
                                    displays the messages as they're received from the message broker.
                                 </p>
                                  
                                 
                                 <p class="title"><b>Install the certificate files</b></p>
                                 
                                 <p>The sample app requires the certificate files that authenticate
                                    the device to be installed on the device.
                                 </p>
                                  
                                 
                                 <div class="procedure">
                                    <p class="title"><b>To install the device certificate files for the sample app</b></p>
                                    <ol>
                                       <li>
                                          
                                          <p>Create a <code class="code">certs</code> subdirectory in your
                                             <code class="replaceable">home</code> directory by running these
                                             commands.
                                          </p>
                                          <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class="">cd ~
mkdir certs</code></pre>
                                          </li>
                                       <li>
                                          
                                          <p>Into the <code class="code">~/certs</code> directory, copy the private key,
                                             device certificate, and root CA certificate that you created
                                             earlier in <a href="./create-iot-resources.html">Create AWS IoT resources</a>.
                                          </p>
                                          
                                          <p>How you copy the certificate files to your device depends on
                                             the device and operating system and isn't described here.
                                             However, if your device supports a graphical user interface
                                             (GUI) and has a web browser, you can perform the procedure
                                             described in <a href="./create-iot-resources.html">Create AWS IoT resources</a> from your
                                             device's web browser to download the resulting files directly to
                                             your device.
                                          </p>
                                          
                                          <p>The commands in the next section assume that your key and
                                             certificate files are stored on the device as shown in this
                                             table.
                                          </p>
                                          
                                          <div class="table-container">
                                             <div class="table-contents">
                                                <table id="w332aab7c15c21c13c17b7b4b7">
                                                   <thead>
                                                      <tr>
                                                         <th class="table-header" colspan="100%">
                                                            <div class="title">Certificate file names</div>
                                                         </th>
                                                      </tr>
                                                      
                                                      <tr>
                                                         
                                                         <th>
                                                            
                                                            <p>File</p>
                                                            
                                                         </th>
                                                         
                                                         <th>
                                                            
                                                            <p>File path</p>
                                                            
                                                         </th>
                                                         
                                                      </tr>
                                                      
                                                   </thead>
                                                   
                                                   <tr>
                                                      
                                                      <td>
                                                         
                                                         <p>Root CA certificate</p>
                                                         
                                                      </td>
                                                      
                                                      <td>
                                                         
                                                         <p><code class="code">~/certs/Amazon-root-CA-1.pem</code></p>
                                                         
                                                      </td>
                                                      
                                                   </tr>
                                                   
                                                   <tr>
                                                      
                                                      <td>
                                                         
                                                         <p>Device certificate</p>
                                                         
                                                      </td>
                                                      
                                                      <td>
                                                         
                                                         <p><code class="code">~/certs/device.pem.crt</code></p>
                                                         
                                                      </td>
                                                      
                                                   </tr>
                                                   
                                                   <tr>
                                                      
                                                      <td>
                                                         
                                                         <p>Private key</p>
                                                         
                                                      </td>
                                                      
                                                      <td>
                                                         
                                                         <p><code class="code">~/certs/private.pem.key</code></p>
                                                         
                                                      </td>
                                                      
                                                   </tr>
                                                   
                                                </table>
                                             </div>
                                          </div>
                                          
                                       </li>
                                    </ol>
                                 </div>
                                 
                                 <p>To run the sample app, you need the following
                                    information:
                                 </p>
                                 
                                 <div class="table-container">
                                    <div class="table-contents">
                                       <table id="w332aab7c15c21c13c17c11">
                                          <thead>
                                             <tr>
                                                <th class="table-header" colspan="100%">
                                                   <div class="title">Application parameter values</div>
                                                </th>
                                             </tr>
                                             
                                             <tr>
                                                
                                                <th>
                                                   
                                                   <p>Parameter</p>
                                                   
                                                </th>
                                                
                                                <th>
                                                   
                                                   <p>Where to find the value</p>
                                                   
                                                </th>
                                                
                                             </tr>
                                             
                                          </thead>
                                          
                                          <tr>
                                             
                                             <td><code class="replaceable">your-iot-endpoint</code></td>
                                             
                                             <td>
                                                
                                                <p>In the <a href="https://console.aws.amazon.com/iot/home" rel="noopener noreferrer" target="_blank"><span>AWS IoT console</span><awsui-icon class="awsdocs-link-icon" name="external"></awsui-icon></a>, choose
                                                   <b>Manage</b>, and then choose
                                                   <b>Things</b>.
                                                </p>
                                                
                                                <p>Choose the IoT thing you created for your device,
                                                   <b>MyIotThing</b> was the name used
                                                   earlier, and then choose
                                                   <b>Interact</b>.
                                                </p>
                                                
                                                <p>On the thing details page, your endpoint is displayed
                                                   in the <b> HTTPS</b> section.
                                                </p>
                                                
                                             </td>
                                             
                                          </tr>
                                          
                                       </table>
                                    </div>
                                 </div>
                                 
                                 <p>The <code class="replaceable">your-iot-endpoint</code> value has a format of:
                                    <code class="code"><code class="replaceable">endpoint_id</code>-ats.iot.<code class="replaceable">region</code>.amazonaws.com</code>,
                                    for example, <code class="code">a3qj468EXAMPLE-ats.iot.us-west-2.amazonaws.com</code>. 
                                 </p>
                                 
                                 <awsdocs-tabs>
                                    <dl style="display: none">
                                       
                                       <dt>Python</dt>
                                       <dd tab-id="python">
                                          
                                          <div class="procedure">
                                             <p class="title"><b>To install and run the sample app</b></p>
                                             <ol>
                                                <li>
                                                   
                                                   <p>Navigate to the sample app directory.</p>
                                                   <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class="bash ">cd ~/aws-iot-device-sdk-python-v2/samples</code></pre>
                                                   </li>
                                                <li>
                                                   
                                                   <p>In the command line window, replace
                                                      <code class="replaceable">your-iot-endpoint</code> as indicated and
                                                      run this command.
                                                   </p>
                                                   <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class="bash ">python3 pubsub.py --topic topic_1 --root-ca ~/certs/Amazon-root-CA-1.pem --cert ~/certs/device.pem.crt --key ~/certs/private.pem.key --endpoint <code class="replaceable">your-iot-endpoint</code></code></pre>
                                                   </li>
                                                <li>                                        
                                                   
                                                   <p>Observe that the sample app:</p>
                                                   
                                                   <div class="orderedlist">
                                                       
                                                       
                                                       
                                                       
                                                      
                                                      <ol>
                                                         <li>
                                                            
                                                            <p>Connects to the AWS IoT service for your account.</p>
                                                            
                                                         </li>
                                                         <li>
                                                            
                                                            <p>Subscribes to the message topic, <b>topic_1</b>, and displays the messages it receives
                                                               on that topic. 
                                                            </p>
                                                            
                                                         </li>
                                                         <li>
                                                            
                                                            <p>Publishes 10 messages to the topic, <b>topic_1</b>. 
                                                            </p>
                                                            
                                                         </li>
                                                         <li>
                                                            
                                                            <p>Displays output similar to the following:</p>
                                                            
                                                         </li>
                                                      </ol>
                                                   </div>
                                                   <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class="">Connecting to a3qEXAMPLEffp-ats.iot.us-west-2.amazonaws.com with client ID 'test-0c8ae2ff-cc87-49d2-a82a-ae7ba1d0ca5a'...
Connected!
Subscribing to topic 'topic_1'...
Subscribed with QoS.AT_LEAST_ONCE
Sending 10 message(s)
Publishing message to topic 'topic_1': Hello World! [1]
Received message from topic 'topic_1': b'Hello World! [1]'
Publishing message to topic 'topic_1': Hello World! [2]
Received message from topic 'topic_1': b'Hello World! [2]'
Publishing message to topic 'topic_1': Hello World! [3]
Received message from topic 'topic_1': b'Hello World! [3]'
Publishing message to topic 'topic_1': Hello World! [4]
Received message from topic 'topic_1': b'Hello World! [4]'
Publishing message to topic 'topic_1': Hello World! [5]
Received message from topic 'topic_1': b'Hello World! [5]'
Publishing message to topic 'topic_1': Hello World! [6]
Received message from topic 'topic_1': b'Hello World! [6]'
Publishing message to topic 'topic_1': Hello World! [7]
Received message from topic 'topic_1': b'Hello World! [7]'
Publishing message to topic 'topic_1': Hello World! [8]
Received message from topic 'topic_1': b'Hello World! [8]'
Publishing message to topic 'topic_1': Hello World! [9]
Received message from topic 'topic_1': b'Hello World! [9]'
Publishing message to topic 'topic_1': Hello World! [10]
Received message from topic 'topic_1': b'Hello World! [10]'
10 message(s) received.
Disconnecting...
Disconnected!</code></pre>
                                                   <p>If you're having trouble running the sample app, review <a href="./gs-device-troubleshoot.html">Troubleshooting problems with the sample app</a>.
                                                   </p> 
                                                   
                                                   <p>You can also add the <code class="code">--verbosity
                                                         debug</code> parameter to the command line so the sample app displays
                                                      detailed messages about what it’s doing. That information might provide you
                                                      the help you need to correct the problem. 
                                                   </p>
                                                   
                                                </li>
                                             </ol>
                                          </div>
                                          
                                       </dd>
                                       
                                       <dt>JavaScript</dt>
                                       <dd tab-id="javascript">
                                          
                                          <div class="procedure">
                                             <p class="title"><b>To install and run the sample app</b></p>
                                             <ol>
                                                <li>
                                                   
                                                   <p>In your command line window, navigate to the 
                                                      <code class="code">~/aws-iot-device-sdk-js-v2/samples/node/pub_sub</code> directory 
                                                      that the SDK created and install the sample app by using these commands.
                                                   </p>
                                                   <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class="bash ">cd ~/aws-iot-device-sdk-js-v2/samples/node/pub_sub
npm install</code></pre>
                                                   </li>
                                                <li>
                                                   
                                                   <p>In the command line window, replace
                                                      <code class="replaceable">your-iot-endpoint</code> as indicated and
                                                      run this command.
                                                   </p>
                                                   <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class="bash ">node dist/index.js --topic topic_1 --root-ca ~/certs/Amazon-root-CA-1.pem --cert ~/certs/device.pem.crt --key ~/certs/private.pem.key --endpoint <code class="replaceable">your-iot-endpoint</code></code></pre>
                                                   </li>
                                                <li>                                        
                                                   
                                                   <p>Observe that the sample app:</p>
                                                   
                                                   <div class="orderedlist">
                                                       
                                                       
                                                       
                                                       
                                                      
                                                      <ol>
                                                         <li>
                                                            
                                                            <p>Connects to the AWS IoT service for your account.</p>
                                                            
                                                         </li>
                                                         <li>
                                                            
                                                            <p>Subscribes to the message topic, <b>topic_1</b>, and displays the messages it receives
                                                               on that topic. 
                                                            </p>
                                                            
                                                         </li>
                                                         <li>
                                                            
                                                            <p>Publishes 10 messages to the topic, <b>topic_1</b>. 
                                                            </p>
                                                            
                                                         </li>
                                                         <li>
                                                            
                                                            <p>Displays output similar to the following:</p>
                                                            
                                                         </li>
                                                      </ol>
                                                   </div>
                                                   <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class="">Publish received on topic topic_1
<span>{</span>"message":"Hello world!","sequence":1}
Publish received on topic topic_1
<span>{</span>"message":"Hello world!","sequence":2}
Publish received on topic topic_1
<span>{</span>"message":"Hello world!","sequence":3}
Publish received on topic topic_1
<span>{</span>"message":"Hello world!","sequence":4}
Publish received on topic topic_1
<span>{</span>"message":"Hello world!","sequence":5}
Publish received on topic topic_1
<span>{</span>"message":"Hello world!","sequence":6}
Publish received on topic topic_1
<span>{</span>"message":"Hello world!","sequence":7}
Publish received on topic topic_1
<span>{</span>"message":"Hello world!","sequence":8}
Publish received on topic topic_1
<span>{</span>"message":"Hello world!","sequence":9}
Publish received on topic topic_1
<span>{</span>"message":"Hello world!","sequence":10}</code></pre>
                                                   <p>If you're having trouble running the sample app, review <a href="./gs-device-troubleshoot.html">Troubleshooting problems with the sample app</a>.
                                                   </p> 
                                                   
                                                   <p>You can also add the <code class="code">--verbosity
                                                         debug</code> parameter to the command line so the sample app displays
                                                      detailed messages about what it’s doing. That information might provide you
                                                      the help you need to correct the problem. 
                                                   </p>
                                                   
                                                </li>
                                             </ol>
                                          </div>
                                          
                                       </dd>
                                       
                                    </dl>
                                 </awsdocs-tabs>
                                  
                                 
                                 <h2 id="gs-device-view-msg">View messages from the sample app in the AWS IoT console</h2>
                                 
                                 <p>You can see the sample app's messages as they pass through the message
                                    broker by using the <b>MQTT client</b> in the <b>AWS IoT
                                       console</b>. 
                                 </p>
                                 
                                 <div class="procedure">
                                    <p class="title"><b>To view the MQTT messages published by the sample app</b></p>
                                    <ol>
                                       <li>
                                          <p>Review <a href="./view-mqtt-messages.html">View MQTT messages with the AWS IoT MQTT
                                                client</a>. This helps you
                                             learn how to use the <b>MQTT client</b> in the
                                             <b>AWS IoT console</b> to view MQTT messages as they
                                             pass through the message broker.
                                          </p>
                                       </li>
                                       <li>
                                          <p>Open the <b>MQTT client</b> in the <b>AWS IoT
                                                console</b>.
                                          </p>
                                       </li>
                                       <li>
                                          <p>Subscribe to the topic, <b>topic_1</b>.
                                          </p>
                                       </li>
                                       <li>
                                          
                                          <p>In your command line window, run
                                             the sample app again and watch the messages in the <b>MQTT
                                                client</b> in the <b>AWS IoT
                                                console</b>.
                                          </p>
                                          
                                          <awsdocs-tabs>
                                             <dl style="display: none">
                                                
                                                <dt>Python</dt>
                                                <dd tab-id="python">
                                                   <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class="bash ">cd ~/aws-iot-device-sdk-python-v2/samples
python3 pubsub.py --topic topic_1 --root-ca ~/certs/Amazon-root-CA-1.pem --cert ~/certs/device.pem.crt --key ~/certs/private.pem.key --endpoint <code class="replaceable">your-iot-endpoint</code></code></pre>
                                                   </dd>
                                                
                                                <dt>JavaScript</dt>
                                                <dd tab-id="javascript">
                                                   <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class="bash ">cd ~/aws-iot-device-sdk-js-v2/samples/node/pub_sub
node dist/index.js --topic topic_1 --root-ca ~/certs/Amazon-root-CA-1.pem --cert ~/certs/device.pem.crt --key ~/certs/private.pem.key --endpoint <code class="replaceable">your-iot-endpoint</code></code></pre>
                                                   </dd>
                                                
                                             </dl>
                                          </awsdocs-tabs>
                                          
                                       </li>
                                    </ol>
                                 </div>
                                 
                                 
                                 <awsdocs-copyright class="copyright-print"></awsdocs-copyright>
                                 <awsdocs-thumb-feedback right-edge="{{$ctrl.thumbFeedbackRightEdge}}"></awsdocs-thumb-feedback>
                              </div>
                              <noscript>
                                 <div>
                                    <div>
                                       <div>
                                          <div id="js_error_message">
                                             <p><img src="https://d1ge0kk1l5kms0.cloudfront.net/images/G/01/webservices/console/warning.png" alt="Warning" /> <strong>Javascript is disabled or is unavailable in your
                                                   browser.</strong></p>
                                             <p>To use the Amazon Web Services Documentation, Javascript must be
                                                enabled. Please refer to your browser's Help pages for instructions.
                                             </p>
                                          </div>
                                       </div>
                                    </div>
                                 </div>
                              </noscript>
                              <div id="main-col-footer" class="awsui-util-font-size-0">
                                 <div id="doc-conventions"><a target="_top" href="/general/latest/gr/docconventions.html">Document Conventions</a></div>
                                 <div class="prev-next">
                                    <div id="previous" class="prev-link" accesskey="p" href="./using-laptop-as-device.html">Use your Windows or Linux
                                       PC or Mac as an AWS IoT device
                                    </div>
                                    <div id="next" class="next-link" accesskey="n" href="./gs-device-troubleshoot.html">Troubleshooting problems with the sample app</div>
                                 </div>
                              </div>
                              <awsdocs-page-utilities></awsdocs-page-utilities>
                           </div>
                           <div id="quick-feedback-yes" style="display: none;">
                              <div class="title">Did this page help you? - Yes</div>
                              <div class="content">
                                 <p>Thanks for letting us know we're doing a good
                                    job!
                                 </p>
                                 <p>If you've got a moment, please tell us what we did right
                                    so we can do more of it.
                                 </p>
                                 <p>
                                    <awsui-button id="fblink" target="_blank" text="Feedback" click="linkClick($event)" href="https://docs.aws.amazon.com/forms/aws-doc-feedback?hidden_service_name=IoT Docs&amp;topic_url=https://docs.aws.amazon.com/en_us/iot/latest/developerguide/connecting-to-existing-device.html"></awsui-button>
                                 </p>
                              </div>
                           </div>
                           <div id="quick-feedback-no" style="display: none;">
                              <div class="title">Did this page help you? - No</div>
                              <div class="content">
                                 <p>Thanks for letting us know this page needs work. We're
                                    sorry we let you down.
                                 </p>
                                 <p>If you've got a moment, please tell us how we can make
                                    the documentation better.
                                 </p>
                                 <p>
                                    <awsui-button id="fblink" target="_blank" text="Feedback" click="linkClick($event)" href="https://docs.aws.amazon.com/forms/aws-doc-feedback?hidden_service_name=IoT Docs&amp;topic_url=https://docs.aws.amazon.com/en_us/iot/latest/developerguide/connecting-to-existing-device.html"></awsui-button>
                                 </p>
                              </div>
                           </div>
                        </div>
                     </body>
                  </div>
               </awsdocs-view>
               <div class="page-loading-indicator" id="page-loading-indicator">
                  <awsui-spinner size="large"></awsui-spinner>
               </div>
            </div>
            <div id="tools-panel" dom-region="tools">
               <awsdocs-tools-panel id="awsdocs-tools-panel"></awsdocs-tools-panel>
            </div>
         </awsui-app-layout>
         <awsdocs-cookie-banner class="doc-cookie-banner"></awsdocs-cookie-banner>
         <!--
                SiteCatalyst code version: H.25.2.
                Copyright 1996-2012 Adobe, Inc. All Rights Reserved
                More info available at http://www.omniture.com
            --><script language="JavaScript" type="text/javascript">
var awsdocs = awsdocs || {};
awsdocs.prop66 = 'AWS IoT Core';
awsdocs.prop65 =  'Developer Guide';
            </script><script src="https://a0.awsstatic.com/s_code/js/3.0/awshome_s_code.js" language="JavaScript" type="text/javascript"></script>
         <!--/DO NOT REMOVE/-->
         <!--End SiteCatalyst code version: H.25.2.--></div>
   </body>
</html>