<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" ng-app="AWSDocsDocPageApp">
   <head>
      <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
      <title>Managing a stream in the AWS Cloud - AWS IoT Core</title>
      <meta name="viewport" content="width=device-width,initial-scale=1" />
      <meta name="assets_root" content="assets" />
      <meta name="target_state" content="mqtt-based-file-delivery-managing" />
      <meta name="default_state" content="mqtt-based-file-delivery-managing" />
      <link rel="icon" type="image/ico" href="/assets/images/favicon.ico" />
      <link rel="shortcut icon" type="image/ico" href="/assets/images/favicon.ico" />
      <link rel="canonical" href="https://docs.aws.amazon.com/iot/latest/developerguide/mqtt-based-file-delivery-managing.html" />
      <meta name="description" content="AWS IoT provides AWS SDK and AWS CLI commands that you can use to manage a stream in the AWS Cloud. You can use these commands to do the following:" />
      <meta name="deployment_region" content="IAD" />
      <meta name="product" content="AWS IoT Core" />
      <meta name="guide" content="Developer Guide" />
      <meta name="locales" content="de_de:Deutsch/en_us:English/es_es:Español/fr_fr:Français/it_it:Italiano/ja_jp:日本語/ko_kr:한국어/pt_br:Português/zh_cn:中文 (简体)/zh_tw:中文 (繁體)" />
      <meta name="abstract" content="AWS IoT provides secure, bi-directional communication between Internet-connected devices such as sensors, actuators, embedded micro-controllers, or smart appliances and the AWS Cloud. This enables you to collect telemetry data from multiple devices, and store and analyze the data. You can also create applications that enable your users to control these devices from their phones or tablets." />
      <meta name="guide-locale" content="en_us" />
      <meta name="tocs" content="toc-contents.json" />
      <meta name="feedback-item" content="IoT Docs" />
      <meta name="this_doc_product" content="AWS IoT Core" />
      <meta name="this_doc_guide" content="Developer Guide" />
      <link href="assets/css/vendor4.css" rel="stylesheet" />
      <link href="assets/css/awsdocs-common.css" rel="stylesheet" /><script type="text/javascript" src="assets/js/vendor3.js" defer=""></script><script type="text/javascript" src="assets/js/vendor4.js" defer=""></script><script type="text/javascript" src="assets/js/vendor1.js" defer=""></script><script type="text/javascript" src="assets/js/awsdocs-common.js" defer=""></script><script type="text/javascript" src="assets/js/awsdocs-doc-app.js" defer=""></script></head>
   <body class="awsdocs awsui">
      <div class="awsdocs-container">
         <awsdocs-header></awsdocs-header>
         <awsui-app-layout id="app-layout" class="awsui-util-no-gutters" ng-controller="ContentController as $ctrl" header-selector="awsdocs-header" navigation-hide="false" navigation-width="$ctrl.navWidth" navigation-open="$ctrl.navOpen" navigation-change="$ctrl.onNavChange($event)" tools-hide="$ctrl.hideTools" tools-width="$ctrl.toolsWidth" tools-open="$ctrl.toolsOpen" tools-change="$ctrl.onToolsChange($event)">
            <div id="guide-toc" dom-region="navigation">
               <awsdocs-toc></awsdocs-toc>
            </div>
            <div id="main-column" dom-region="content" tabindex="-1">
               <awsdocs-view class="awsdocs-view">
                  <div id="awsdocs-content">
                     <head>
                        <title>Managing a stream in the AWS Cloud - AWS IoT Core</title>
                        <meta name="pdf" content="iot-dg.pdf#mqtt-based-file-delivery-managing" />
                        <meta name="kindle" content="https://www.amazon.com/dp/B07JBRCWWZ" />
                        <meta name="github" content="https://github.com/awsdocs/aws-iot-docs/tree/master/developerguide/mqtt-based-file-delivery-managing.md" />
                        <meta name="forums" content="http://forums.aws.amazon.com/forum.jspa?forumID=210" />
                        <meta name="feedback" content="https://docs.aws.amazon.com/forms/aws-doc-feedback?hidden_service_name=IoT%20Docs&amp;topic_url=http://docs.aws.amazon.com/en_us/iot/latest/developerguide/mqtt-based-file-delivery-managing.html" />
                        <meta name="feedback-yes" content="feedbackyes.html?topic_url=http://docs.aws.amazon.com/en_us/iot/latest/developerguide/mqtt-based-file-delivery-managing.html" />
                        <meta name="feedback-no" content="feedbackno.html?topic_url=http://docs.aws.amazon.com/en_us/iot/latest/developerguide/mqtt-based-file-delivery-managing.html" />
                        <meta name="keywords" content="AWS IoT,IoT,Internet of Things" />
                     </head>
                     <body>
                        <div id="main">
                           <div style="display: none"><a href="iot-dg.pdf#mqtt-based-file-delivery-managing" target="_blank" rel="noopener noreferrer" title="Open PDF"></a><a target="_blank" rel="noopener noreferrer" href="https://www.amazon.com/dp/B07JBRCWWZ" title="Open Kindle"></a><a href="https://github.com/awsdocs/aws-iot-docs/tree/master/developerguide/mqtt-based-file-delivery-managing.md" target="_blank" rel="noopener noreferrer" title="Edit this page on GitHub"></a></div>
                           <div id="breadcrumbs" class="breadcrumb"><a href="http://aws.amazon.com">AWS</a><a href="/index.html">Documentation</a><a href="/iot/index.html">AWS IoT Core</a><a href="what-is-aws-iot.html">Developer Guide</a></div>
                           <div id="page-toc-src"><a href="#mqtt-based-file-delivery-permissions">Grant permissions to your devices</a><a href="#mqtt-based-file-delivery-connect-devices">Connect your devices to AWS IoT</a></div>
                           <div id="main-content" class="awsui-util-container">
                              <div id="main-col-body">
                                 <awsdocs-language-banner data-service="$ctrl.pageService"></awsdocs-language-banner>
                                 <h1 class="topictitle" id="mqtt-based-file-delivery-managing">Managing a stream in the AWS Cloud</h1>
                                 <div class="awsdocs-page-header-container">
                                    <awsdocs-page-header></awsdocs-page-header>
                                    <awsdocs-filter-selector id="awsdocs-filter-selector"></awsdocs-filter-selector>
                                 </div>
                                 <p>AWS IoT provides AWS SDK and AWS CLI commands that you can use to manage a stream
                                    in the AWS Cloud. You
                                    can use these commands to do the following:
                                 </p>
                                 <div class="itemizedlist">
                                     
                                     
                                     
                                     
                                     
                                    
                                    <ul class="itemizedlist" type="disc">
                                       <li class="listitem">
                                          
                                          <p>Create a stream. 
                                             <a href="https://docs.aws.amazon.com//cli/latest/reference/iot/create-stream.html">CLI</a> /
                                             <a href="https://docs.aws.amazon.com/iot/latest/apireference/API_CreateStream.html">SDK</a></p>
                                          
                                       </li>
                                       <li class="listitem">
                                          
                                          <p>Describe a stream to get its information. 
                                             <a href="https://docs.aws.amazon.com/cli/latest/reference/iot/describe-stream.html">CLI</a> /
                                             <a href="https://docs.aws.amazon.com/iot/latest/apireference/API_DescribeStream.html">SDK</a></p>
                                          
                                       </li>
                                       <li class="listitem">
                                          
                                          <p>List streams in your AWS account. 
                                             <a href="https://docs.aws.amazon.com/cli/latest/reference/iot/list-streams.html">CLI</a> / 
                                             <a href="https://docs.aws.amazon.com/iot/latest/apireference/API_ListStreams.html">SDK</a></p>
                                          
                                       </li>
                                       <li class="listitem">
                                          
                                          <p>Update the file list or stream description in a stream. 
                                             <a href="https://docs.aws.amazon.com/cli/latest/reference/iot/update-stream.html">CLI</a> / 
                                             <a href="https://docs.aws.amazon.com/iot/latest/apireference/API_UpdateStream.html">SDK</a></p>
                                          
                                       </li>
                                       <li class="listitem">
                                          
                                          <p>Delete a
                                             stream.
                                             <a href="https://docs.aws.amazon.com/cli/latest/reference/iot/delete-stream.html">CLI</a> / 
                                             <a href="https://docs.aws.amazon.com/iot/latest/apireference/API_DeleteStream.html">SDK</a></p>
                                          
                                       </li>
                                    </ul>
                                 </div>
                                 <div class="awsdocs-note">
                                    <div class="awsdocs-note-title">
                                       <awsui-icon name="status-info" variant="link"></awsui-icon><span>Note</span></div>
                                    <div class="awsdocs-note-text">
                                       <p>At this time, streams are not visible in the AWS Management Console.  You must use
                                          the AWS CLI or AWS
                                          SDK to manage a stream in AWS IoT.
                                       </p>
                                    </div>
                                 </div>
                                 <p>Before you use AWS IoT MQTT-based file delivery from your devices, you must follow
                                    the steps in the
                                    next sections to make sure that your devices are properly authorized and can connect
                                    to the AWS IoT 
                                    Device Gateway.
                                 </p>
                                 
                                 <h2 id="mqtt-based-file-delivery-permissions">Grant permissions to your devices</h2>
                                 
                                 
                                 <p>You can follow the steps in <a href="https://docs.aws.amazon.com/iot/latest/developerguide/create-iot-resources.html#create-iot-policy">Create an AWS IoT 
                                       policy</a> to create a device policy or use an existing device policy. Attach the policy to
                                    the 
                                    certificates associated with your devices and add the following permissions to the
                                    device policy.
                                 </p>
                                 
                                 <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class="JSON "><span>{</span>
    "Version": "2012-10-17",
    "Statement": [
        <span>{</span>   "Effect": "Allow",
            "Action": [ "iot:Connect" ],
            "Resource": [ 
                "arn:<code class="replaceable">partition</code>:iot:<code class="replaceable">region</code>:<code class="replaceable">accountID</code>:client/$<span>{</span>iot:Connection.Thing.ThingName}"
            ]
        },
        <span>{</span>
            "Effect": "Allow",
            "Action": [ "iot:Receive", "iot:Publish" ],
            "Resource": [
                "arn:<code class="replaceable">partition</code>:iot:<code class="replaceable">region</code>:<code class="replaceable">accountID</code>:topic/$aws/things/$<span>{</span>iot:Connection.Thing.ThingName}/streams/*"
            ]
        },
        <span>{</span>
            "Effect": "Allow",
            "Action": "iot:Subscribe",
            "Resource": [
                "arn:<code class="replaceable">partition</code>:iot:<code class="replaceable">region</code>:<code class="replaceable">accountID</code>:topicfilter/$aws/things/$<span>{</span>iot:Connection.Thing.ThingName}/streams/*"
            ]
        }
    ]
}</code></pre>
                                 
                                  
                                 <h2 id="mqtt-based-file-delivery-connect-devices">Connect your devices to AWS IoT</h2>
                                 
                                 
                                 <p>Devices that use AWS IoT MQTT-based file delivery are required to connect with AWS
                                    IoT. AWS IoT
                                    MQTT-based file delivery integrates with AWS IoT in the AWS Cloud, so your devices
                                    should directly connect to 
                                    <a href="https://docs.aws.amazon.com/iot/latest/apireference/Welcome.html#Welcome_AWS_IoT_Data_Plane">the endpoint 
                                       of the AWS IoT Data Plane</a>. 
                                 </p>
                                 
                                 
                                 <div class="awsdocs-note">
                                    <div class="awsdocs-note-title">
                                       <awsui-icon name="status-info" variant="link"></awsui-icon><span>Note</span></div>
                                    <div class="awsdocs-note-text">
                                       <p>The endpoint of the AWS IoT data plane is specific to the AWS account and Region.
                                          You must use the 
                                          endpoint for the AWS account and the Region in which your devices are registered in
                                          AWS IoT.
                                       </p>
                                    </div>
                                 </div>
                                 
                                 
                                 <p>See <a href="./connect-to-iot.html">Connecting to AWS IoT Core</a> for more information.
                                 </p>
                                 
                                 
                                 <awsdocs-copyright class="copyright-print"></awsdocs-copyright>
                                 <awsdocs-thumb-feedback right-edge="{{$ctrl.thumbFeedbackRightEdge}}"></awsdocs-thumb-feedback>
                              </div>
                              <noscript>
                                 <div>
                                    <div>
                                       <div>
                                          <div id="js_error_message">
                                             <p><img src="https://d1ge0kk1l5kms0.cloudfront.net/images/G/01/webservices/console/warning.png" alt="Warning" /> <strong>Javascript is disabled or is unavailable in your
                                                   browser.</strong></p>
                                             <p>To use the Amazon Web Services Documentation, Javascript must be
                                                enabled. Please refer to your browser's Help pages for instructions.
                                             </p>
                                          </div>
                                       </div>
                                    </div>
                                 </div>
                              </noscript>
                              <div id="main-col-footer" class="awsui-util-font-size-0">
                                 <div id="doc-conventions"><a target="_top" href="/general/latest/gr/docconventions.html">Document Conventions</a></div>
                                 <div class="prev-next">
                                    <div id="previous" class="prev-link" accesskey="p" href="./mqtt-based-file-delivery-what-is.html">What is a stream?</div>
                                    <div id="next" class="next-link" accesskey="n" href="./mqtt-based-file-delivery-in-devices.html">Using AWS IoT MQTT-based file delivery in devices</div>
                                 </div>
                              </div>
                              <awsdocs-page-utilities></awsdocs-page-utilities>
                           </div>
                           <div id="quick-feedback-yes" style="display: none;">
                              <div class="title">Did this page help you? - Yes</div>
                              <div class="content">
                                 <p>Thanks for letting us know we're doing a good
                                    job!
                                 </p>
                                 <p>If you've got a moment, please tell us what we did right
                                    so we can do more of it.
                                 </p>
                                 <p>
                                    <awsui-button id="fblink" target="_blank" text="Feedback" click="linkClick($event)" href="https://docs.aws.amazon.com/forms/aws-doc-feedback?hidden_service_name=IoT Docs&amp;topic_url=https://docs.aws.amazon.com/en_us/iot/latest/developerguide/mqtt-based-file-delivery-managing.html"></awsui-button>
                                 </p>
                              </div>
                           </div>
                           <div id="quick-feedback-no" style="display: none;">
                              <div class="title">Did this page help you? - No</div>
                              <div class="content">
                                 <p>Thanks for letting us know this page needs work. We're
                                    sorry we let you down.
                                 </p>
                                 <p>If you've got a moment, please tell us how we can make
                                    the documentation better.
                                 </p>
                                 <p>
                                    <awsui-button id="fblink" target="_blank" text="Feedback" click="linkClick($event)" href="https://docs.aws.amazon.com/forms/aws-doc-feedback?hidden_service_name=IoT Docs&amp;topic_url=https://docs.aws.amazon.com/en_us/iot/latest/developerguide/mqtt-based-file-delivery-managing.html"></awsui-button>
                                 </p>
                              </div>
                           </div>
                        </div>
                     </body>
                  </div>
               </awsdocs-view>
               <div class="page-loading-indicator" id="page-loading-indicator">
                  <awsui-spinner size="large"></awsui-spinner>
               </div>
            </div>
            <div id="tools-panel" dom-region="tools">
               <awsdocs-tools-panel id="awsdocs-tools-panel"></awsdocs-tools-panel>
            </div>
         </awsui-app-layout>
         <awsdocs-cookie-banner class="doc-cookie-banner"></awsdocs-cookie-banner>
         <!--
                SiteCatalyst code version: H.25.2.
                Copyright 1996-2012 Adobe, Inc. All Rights Reserved
                More info available at http://www.omniture.com
            --><script language="JavaScript" type="text/javascript">
var awsdocs = awsdocs || {};
awsdocs.prop66 = 'AWS IoT Core';
awsdocs.prop65 =  'Developer Guide';
            </script><script src="https://a0.awsstatic.com/s_code/js/3.0/awshome_s_code.js" language="JavaScript" type="text/javascript"></script>
         <!--/DO NOT REMOVE/-->
         <!--End SiteCatalyst code version: H.25.2.--></div>
   </body>
</html>