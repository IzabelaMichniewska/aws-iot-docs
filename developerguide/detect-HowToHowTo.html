<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" ng-app="AWSDocsDocPageApp">
   <head>
      <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
      <title>How to use AWS IoT Device Defender detect - AWS IoT Core</title>
      <meta name="viewport" content="width=device-width,initial-scale=1" />
      <meta name="assets_root" content="assets" />
      <meta name="target_state" content="detect-HowToHowTo" />
      <meta name="default_state" content="detect-HowToHowTo" />
      <link rel="icon" type="image/ico" href="/assets/images/favicon.ico" />
      <link rel="shortcut icon" type="image/ico" href="/assets/images/favicon.ico" />
      <link rel="canonical" href="https://docs.aws.amazon.com/iot/latest/developerguide/detect-HowToHowTo.html" />
      <meta name="description" content="You can use AWS IoT Device Defender Detect with just cloud-side metrics, but if you plan to use device-reported metrics, you must first deploy the AWS IoT SDK on your AWS IoT connected devices or device gateways. For more information, see . Consider viewing the metrics that your devices generate before you define behaviors and create alarms. AWS IoT can collect metrics from your devices so you can first identify usual or unusual behavior for a group of devices, or for all devices in your account. Use" />
      <meta name="deployment_region" content="IAD" />
      <meta name="product" content="AWS IoT Core" />
      <meta name="guide" content="Developer Guide" />
      <meta name="locales" content="de_de:Deutsch/en_us:English/es_es:Español/fr_fr:Français/it_it:Italiano/ja_jp:日本語/ko_kr:한국어/pt_br:Português/zh_cn:中文 (简体)/zh_tw:中文 (繁體)" />
      <meta name="abstract" content="AWS IoT provides secure, bi-directional communication between Internet-connected devices such as sensors, actuators, embedded micro-controllers, or smart appliances and the AWS Cloud. This enables you to collect telemetry data from multiple devices, and store and analyze the data. You can also create applications that enable your users to control these devices from their phones or tablets." />
      <meta name="guide-locale" content="en_us" />
      <meta name="tocs" content="toc-contents.json" />
      <meta name="feedback-item" content="IoT Docs" />
      <meta name="this_doc_product" content="AWS IoT Core" />
      <meta name="this_doc_guide" content="Developer Guide" />
      <link href="assets/css/vendor4.css" rel="stylesheet" />
      <link href="assets/css/awsdocs-common.css" rel="stylesheet" /><script type="text/javascript" src="assets/js/vendor3.js" defer=""></script><script type="text/javascript" src="assets/js/vendor4.js" defer=""></script><script type="text/javascript" src="assets/js/vendor1.js" defer=""></script><script type="text/javascript" src="assets/js/awsdocs-common.js" defer=""></script><script type="text/javascript" src="assets/js/awsdocs-doc-app.js" defer=""></script></head>
   <body class="awsdocs awsui">
      <div class="awsdocs-container">
         <awsdocs-header></awsdocs-header>
         <awsui-app-layout id="app-layout" class="awsui-util-no-gutters" ng-controller="ContentController as $ctrl" header-selector="awsdocs-header" navigation-hide="false" navigation-width="$ctrl.navWidth" navigation-open="$ctrl.navOpen" navigation-change="$ctrl.onNavChange($event)" tools-hide="$ctrl.hideTools" tools-width="$ctrl.toolsWidth" tools-open="$ctrl.toolsOpen" tools-change="$ctrl.onToolsChange($event)">
            <div id="guide-toc" dom-region="navigation">
               <awsdocs-toc></awsdocs-toc>
            </div>
            <div id="main-column" dom-region="content" tabindex="-1">
               <awsdocs-view class="awsdocs-view">
                  <div id="awsdocs-content">
                     <head>
                        <title>How to use AWS IoT Device Defender detect - AWS IoT Core</title>
                        <meta name="pdf" content="iot-dg.pdf#detect-HowToHowTo" />
                        <meta name="kindle" content="https://www.amazon.com/dp/B07JBRCWWZ" />
                        <meta name="github" content="https://github.com/awsdocs/aws-iot-docs/tree/master/developerguide/detect-HowToHowTo.md" />
                        <meta name="forums" content="http://forums.aws.amazon.com/forum.jspa?forumID=210" />
                        <meta name="feedback" content="https://docs.aws.amazon.com/forms/aws-doc-feedback?hidden_service_name=IoT%20Docs&amp;topic_url=http://docs.aws.amazon.com/en_us/iot/latest/developerguide/detect-HowToHowTo.html" />
                        <meta name="feedback-yes" content="feedbackyes.html?topic_url=http://docs.aws.amazon.com/en_us/iot/latest/developerguide/detect-HowToHowTo.html" />
                        <meta name="feedback-no" content="feedbackno.html?topic_url=http://docs.aws.amazon.com/en_us/iot/latest/developerguide/detect-HowToHowTo.html" />
                        <meta name="keywords" content="AWS IoT,IoT,Internet of Things" />
                     </head>
                     <body>
                        <div id="main">
                           <div style="display: none"><a href="iot-dg.pdf#detect-HowToHowTo" target="_blank" rel="noopener noreferrer" title="Open PDF"></a><a target="_blank" rel="noopener noreferrer" href="https://www.amazon.com/dp/B07JBRCWWZ" title="Open Kindle"></a><a href="https://github.com/awsdocs/aws-iot-docs/tree/master/developerguide/detect-HowToHowTo.md" target="_blank" rel="noopener noreferrer" title="Edit this page on GitHub"></a></div>
                           <div id="breadcrumbs" class="breadcrumb"><a href="http://aws.amazon.com">AWS</a><a href="/index.html">Documentation</a><a href="/iot/index.html">AWS IoT Core</a><a href="what-is-aws-iot.html">Developer Guide</a></div>
                           <div id="main-content" class="awsui-util-container">
                              <div id="main-col-body">
                                 <awsdocs-language-banner data-service="$ctrl.pageService"></awsdocs-language-banner>
                                 <h1 class="topictitle" id="detect-HowToHowTo">How to use AWS IoT Device Defender detect</h1>
                                 <div class="awsdocs-page-header-container">
                                    <awsdocs-page-header></awsdocs-page-header>
                                    <awsdocs-filter-selector id="awsdocs-filter-selector"></awsdocs-filter-selector>
                                 </div>
                                 <div class="procedure">
                                    <ol>
                                       <li>
                                          
                                          <p>You can use AWS IoT Device Defender Detect with just cloud-side metrics, but if you
                                             plan to use
                                             device-reported metrics, you must first deploy the AWS IoT SDK on your AWS IoT connected
                                             devices or device gateways. For more information, see <a href="./detect-device-side-metrics.html#DetectMetricsMessages">Sending metrics from devices</a>.
                                          </p>
                                          
                                       </li>
                                       <li>
                                          
                                          <p>Consider viewing the metrics that your devices generate before you define behaviors
                                             and create alarms. AWS IoT can collect metrics from your devices so you can first
                                             identify
                                             usual or unusual behavior for a group of devices, or for all devices in your account.
                                             Use
                                             <a href="https://docs.aws.amazon.com/iot/latest/apireference/API_CreateSecurityProfile.html">CreateSecurityProfile</a>, but specify only those
                                             <code class="code">additionalMetricsToRetain</code> that you're interested in. Don't specify
                                             <code class="code">behaviors</code> at this point.
                                             
                                          </p>
                                          
                                          <p>Use the AWS IoT console to look at your device metrics to see what constitutes typical
                                             behavior for your devices.
                                          </p>
                                          
                                       </li>
                                       <li>
                                          
                                          <p>Create a set of behaviors for your security profile. Behaviors contain metrics that
                                             specify normal behavior for a group of devices or for all devices in your account.
                                             For
                                             more information and examples, see <a href="./detect-cloud-side-metrics.html">Cloud-side metrics</a> and <a href="./detect-device-side-metrics.html">Device-side metrics</a>. After you create a set of behaviors, you can validate
                                             them with <a href="https://docs.aws.amazon.com/iot/latest/apireference/API_ValidateSecurityProfileBehaviors.html">ValidateSecurityProfileBehaviors</a>. 
                                          </p>
                                          
                                       </li>
                                       <li>
                                          
                                          <p>Use the <a href="https://docs.aws.amazon.com/iot/latest/apireference/API_CreateSecurityProfile.html">CreateSecurityProfile</a> action to create a security
                                             profile that includes your behaviors. You can use the <code class="code">alertTargets</code>
                                             parameter to have alarms sent to a target (an SNS topic) when a device violates a
                                             behavior. (If you send alarms using SNS, be aware that these count against your
                                             AWS account's SNS topic quota. It's possible that a large burst of violations can
                                             exceed your SNS topic quota. You can also use CloudWatch metrics to check for violations.
                                             For more information, see <a href="./monitoring-cloudwatch.html#how_to_use_metrics"></a>. 
                                          </p>
                                          
                                       </li>
                                       <li>
                                          
                                          <p>Use the <a href="https://docs.aws.amazon.com/iot/latest/apireference/API_AttachSecurityProfile.html">AttachSecurityProfile</a> action to attach the security
                                             profile to a group of devices (a thing group), all registered things in your
                                             account, all unregistered things, or all devices. AWS IoT Device Defender Detect starts
                                             checking for
                                             abnormal behavior and, if any behavior violations are detected, sends alarms. You
                                             might want to attach a security profile to all unregistered things if, for example,
                                             you expect to interact with mobile devices that are not in your account's thing
                                             registry. You can define different sets of behaviors for different groups of devices
                                             to meet your needs.
                                          </p>
                                          
                                          <p>To attach a security profile to a group of devices, you must specify the ARN of the
                                             thing group that contains them. A thing group ARN has the following format.
                                          </p>
                                          <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class="nohighlight">arn:aws:iot:<code class="replaceable">region</code>:<code class="replaceable">account-id</code>:thinggroup/<code class="replaceable">thing-group-name</code></code></pre>
                                          <p>To attach a security profile to all of the registered things in an AWS account
                                             (ignoring unregistered things), you must specify an ARN with the following format.
                                          </p>
                                          <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class="nohighlight">arn:aws:iot:<code class="replaceable">region</code>:<code class="replaceable">account-id</code>:all/registered-things</code></pre>
                                          <p>To attach a security profile to all unregistered things, you must specify an ARN with
                                             the following format.
                                          </p>
                                          <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class="nohighlight">arn:aws:iot:<code class="replaceable">region</code>:<code class="replaceable">account-id</code>:all/unregistered-things</code></pre>
                                          <p>To attach a security profile to all devices, you must specify an ARN with the
                                             following format.
                                          </p>
                                          <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class="nohighlight">arn:aws:iot:<code class="replaceable">region</code>:<code class="replaceable">account-id</code>:all/things</code></pre>
                                          </li>
                                       <li>
                                          
                                          <p>You can also keep track of violations with the <a href="https://docs.aws.amazon.com/iot/latest/apireference/API_ListActiveViolations.html">ListActiveViolations</a> action, which lets you to see which
                                             violations were detected for a given security profile or target device.
                                          </p>
                                          
                                          <p>Use the <a href="https://docs.aws.amazon.com/iot/latest/apireference/API_ListViolationEvents.html">ListViolationEvents</a> action to see which violations were
                                             detected during a specified time period. You can filter these results by security
                                             profile
                                             or device.
                                          </p>
                                          
                                       </li>
                                       <li>
                                          
                                          <p>If your devices violate the defined behaviors too often, or not often enough, you
                                             should fine-tune the behavior definitions.
                                             
                                          </p>
                                          
                                       </li>
                                       <li>
                                          
                                          <p>To review the security profiles that you set up and the devices that are being
                                             monitored, use the <a href="https://docs.aws.amazon.com/iot/latest/apireference/API_ListSecurityProfiles.html">ListSecurityProfiles</a>, <a href="https://docs.aws.amazon.com/iot/latest/apireference/API_ListSecurityProfilesForTarget.html">ListSecurityProfilesForTarget</a>, and <a href="https://docs.aws.amazon.com/iot/latest/apireference/API_ListTargetsForSecurityProfile.html">ListTargetsForSecurityProfile</a> actions. 
                                          </p>
                                          
                                          <p>Use the <a href="https://docs.aws.amazon.com/iot/latest/apireference/API_DescribeSecurityProfile.html">DescribeSecurityProfile</a> action to get more details about a
                                             security profile. 
                                          </p>
                                          
                                       </li>
                                       <li>
                                          
                                          <p>To update a security profile, use the <a href="https://docs.aws.amazon.com/iot/latest/apireference/API_UpdateSecurityProfile.html">UpdateSecurityProfile</a> action. Use the <a href="https://docs.aws.amazon.com/iot/latest/apireference/API_DetachSecurityProfile.html">DetachSecurityProfile</a> action to detach a security profile
                                             from an account or target thing group. Use the <a href="https://docs.aws.amazon.com/iot/latest/apireference/API_DeleteSecurityProfile.html">DeleteSecurityProfile</a> action to delete a security profile
                                             entirely. 
                                          </p>
                                          
                                       </li>
                                    </ol>
                                 </div>
                                 <awsdocs-copyright class="copyright-print"></awsdocs-copyright>
                                 <awsdocs-thumb-feedback right-edge="{{$ctrl.thumbFeedbackRightEdge}}"></awsdocs-thumb-feedback>
                              </div>
                              <noscript>
                                 <div>
                                    <div>
                                       <div>
                                          <div id="js_error_message">
                                             <p><img src="https://d1ge0kk1l5kms0.cloudfront.net/images/G/01/webservices/console/warning.png" alt="Warning" /> <strong>Javascript is disabled or is unavailable in your
                                                   browser.</strong></p>
                                             <p>To use the Amazon Web Services Documentation, Javascript must be
                                                enabled. Please refer to your browser's Help pages for instructions.
                                             </p>
                                          </div>
                                       </div>
                                    </div>
                                 </div>
                              </noscript>
                              <div id="main-col-footer" class="awsui-util-font-size-0">
                                 <div id="doc-conventions"><a target="_top" href="/general/latest/gr/docconventions.html">Document Conventions</a></div>
                                 <div class="prev-next">
                                    <div id="previous" class="prev-link" accesskey="p" href="./detect-commands.html">Detect commands</div>
                                    <div id="next" class="next-link" accesskey="n" href="./dd-mitigation-actions.html">Mitigation actions</div>
                                 </div>
                              </div>
                              <awsdocs-page-utilities></awsdocs-page-utilities>
                           </div>
                           <div id="quick-feedback-yes" style="display: none;">
                              <div class="title">Did this page help you? - Yes</div>
                              <div class="content">
                                 <p>Thanks for letting us know we're doing a good
                                    job!
                                 </p>
                                 <p>If you've got a moment, please tell us what we did right
                                    so we can do more of it.
                                 </p>
                                 <p>
                                    <awsui-button id="fblink" target="_blank" text="Feedback" click="linkClick($event)" href="https://docs.aws.amazon.com/forms/aws-doc-feedback?hidden_service_name=IoT Docs&amp;topic_url=https://docs.aws.amazon.com/en_us/iot/latest/developerguide/detect-HowToHowTo.html"></awsui-button>
                                 </p>
                              </div>
                           </div>
                           <div id="quick-feedback-no" style="display: none;">
                              <div class="title">Did this page help you? - No</div>
                              <div class="content">
                                 <p>Thanks for letting us know this page needs work. We're
                                    sorry we let you down.
                                 </p>
                                 <p>If you've got a moment, please tell us how we can make
                                    the documentation better.
                                 </p>
                                 <p>
                                    <awsui-button id="fblink" target="_blank" text="Feedback" click="linkClick($event)" href="https://docs.aws.amazon.com/forms/aws-doc-feedback?hidden_service_name=IoT Docs&amp;topic_url=https://docs.aws.amazon.com/en_us/iot/latest/developerguide/detect-HowToHowTo.html"></awsui-button>
                                 </p>
                              </div>
                           </div>
                        </div>
                     </body>
                  </div>
               </awsdocs-view>
               <div class="page-loading-indicator" id="page-loading-indicator">
                  <awsui-spinner size="large"></awsui-spinner>
               </div>
            </div>
            <div id="tools-panel" dom-region="tools">
               <awsdocs-tools-panel id="awsdocs-tools-panel"></awsdocs-tools-panel>
            </div>
         </awsui-app-layout>
         <awsdocs-cookie-banner class="doc-cookie-banner"></awsdocs-cookie-banner>
         <!--
                SiteCatalyst code version: H.25.2.
                Copyright 1996-2012 Adobe, Inc. All Rights Reserved
                More info available at http://www.omniture.com
            --><script language="JavaScript" type="text/javascript">
var awsdocs = awsdocs || {};
awsdocs.prop66 = 'AWS IoT Core';
awsdocs.prop65 =  'Developer Guide';
            </script><script src="https://a0.awsstatic.com/s_code/js/3.0/awshome_s_code.js" language="JavaScript" type="text/javascript"></script>
         <!--/DO NOT REMOVE/-->
         <!--End SiteCatalyst code version: H.25.2.--></div>
   </body>
</html>