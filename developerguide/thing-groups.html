<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" ng-app="AWSDocsDocPageApp">
   <head>
      <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
      <title>Static thing groups - AWS IoT Core</title>
      <meta name="viewport" content="width=device-width,initial-scale=1" />
      <meta name="assets_root" content="assets" />
      <meta name="target_state" content="thing-groups" />
      <meta name="default_state" content="thing-groups" />
      <link rel="icon" type="image/ico" href="/assets/images/favicon.ico" />
      <link rel="shortcut icon" type="image/ico" href="/assets/images/favicon.ico" />
      <link rel="canonical" href="https://docs.aws.amazon.com/iot/latest/developerguide/thing-groups.html" />
      <meta name="description" content="Static thing groups allow you to manage several things at once by categorizing them into groups. Static thing groups contain a group of things that are managed by using the console, CLI, or the API. Dynamic thing groups , on the other hand, contain things that match a specified query. Static thing groups can also contain other static thing groups — you can build a hierarchy of groups. You can attach a policy to a parent group and it is inherited by its child groups, and by all of the things in the group and in its child groups. This makes control of permissions easy for large numbers of things." />
      <meta name="deployment_region" content="IAD" />
      <meta name="product" content="AWS IoT Core" />
      <meta name="guide" content="Developer Guide" />
      <meta name="locales" content="de_de:Deutsch/en_us:English/es_es:Español/fr_fr:Français/it_it:Italiano/ja_jp:日本語/ko_kr:한국어/pt_br:Português/zh_cn:中文 (简体)/zh_tw:中文 (繁體)" />
      <meta name="abstract" content="AWS IoT provides secure, bi-directional communication between Internet-connected devices such as sensors, actuators, embedded micro-controllers, or smart appliances and the AWS Cloud. This enables you to collect telemetry data from multiple devices, and store and analyze the data. You can also create applications that enable your users to control these devices from their phones or tablets." />
      <meta name="guide-locale" content="en_us" />
      <meta name="tocs" content="toc-contents.json" />
      <meta name="feedback-item" content="IoT Docs" />
      <meta name="this_doc_product" content="AWS IoT Core" />
      <meta name="this_doc_guide" content="Developer Guide" />
      <link href="assets/css/vendor4.css" rel="stylesheet" />
      <link href="assets/css/awsdocs-common.css" rel="stylesheet" /><script type="text/javascript" src="assets/js/vendor3.js" defer=""></script><script type="text/javascript" src="assets/js/vendor4.js" defer=""></script><script type="text/javascript" src="assets/js/vendor1.js" defer=""></script><script type="text/javascript" src="assets/js/awsdocs-common.js" defer=""></script><script type="text/javascript" src="assets/js/awsdocs-doc-app.js" defer=""></script></head>
   <body class="awsdocs awsui">
      <div class="awsdocs-container">
         <awsdocs-header></awsdocs-header>
         <awsui-app-layout id="app-layout" class="awsui-util-no-gutters" ng-controller="ContentController as $ctrl" header-selector="awsdocs-header" navigation-hide="false" navigation-width="$ctrl.navWidth" navigation-open="$ctrl.navOpen" navigation-change="$ctrl.onNavChange($event)" tools-hide="$ctrl.hideTools" tools-width="$ctrl.toolsWidth" tools-open="$ctrl.toolsOpen" tools-change="$ctrl.onToolsChange($event)">
            <div id="guide-toc" dom-region="navigation">
               <awsdocs-toc></awsdocs-toc>
            </div>
            <div id="main-column" dom-region="content" tabindex="-1">
               <awsdocs-view class="awsdocs-view">
                  <div id="awsdocs-content">
                     <head>
                        <title>Static thing groups - AWS IoT Core</title>
                        <meta name="pdf" content="iot-dg.pdf#thing-groups" />
                        <meta name="kindle" content="https://www.amazon.com/dp/B07JBRCWWZ" />
                        <meta name="github" content="https://github.com/awsdocs/aws-iot-docs/tree/master/developerguide/thing-groups.md" />
                        <meta name="forums" content="http://forums.aws.amazon.com/forum.jspa?forumID=210" />
                        <meta name="feedback" content="https://docs.aws.amazon.com/forms/aws-doc-feedback?hidden_service_name=IoT%20Docs&amp;topic_url=http://docs.aws.amazon.com/en_us/iot/latest/developerguide/thing-groups.html" />
                        <meta name="feedback-yes" content="feedbackyes.html?topic_url=http://docs.aws.amazon.com/en_us/iot/latest/developerguide/thing-groups.html" />
                        <meta name="feedback-no" content="feedbackno.html?topic_url=http://docs.aws.amazon.com/en_us/iot/latest/developerguide/thing-groups.html" />
                        <meta name="keywords" content="AWS IoT,IoT,Internet of Things" />
                     </head>
                     <body>
                        <div id="main">
                           <div style="display: none"><a href="iot-dg.pdf#thing-groups" target="_blank" rel="noopener noreferrer" title="Open PDF"></a><a target="_blank" rel="noopener noreferrer" href="https://www.amazon.com/dp/B07JBRCWWZ" title="Open Kindle"></a><a href="https://github.com/awsdocs/aws-iot-docs/tree/master/developerguide/thing-groups.md" target="_blank" rel="noopener noreferrer" title="Edit this page on GitHub"></a></div>
                           <div id="breadcrumbs" class="breadcrumb"><a href="http://aws.amazon.com">AWS</a><a href="/index.html">Documentation</a><a href="/iot/index.html">AWS IoT Core</a><a href="what-is-aws-iot.html">Developer Guide</a></div>
                           <div id="page-toc-src"><a href="#create-group">Create a static thing group</a><a href="#describe-thing-group">Describe a thing group</a><a href="#add-thing-to-group">Add a thing to a static thing group</a><a href="#remove-thing-from-group">Remove a thing from a static thing
                                 group</a><a href="#list-things-in-thing-group">List things in a thing group</a><a href="#list-thing-groups">List thing groups</a><a href="#list-thing-groups-for-thing">List groups for a thing</a><a href="#update-group">Update a static thing group</a><a href="#delete-thing-group">Delete a thing group</a><a href="#group-attach-policy">Attach a policy to a static thing
                                 group</a><a href="#group-detach-policy">Detach a policy from a static thing
                                 group</a><a href="#group-list-policies">List the policies attached to a static thing
                                 group</a><a href="#group-list-targets-for-policy">List the groups for a policy</a><a href="#group-get-effective-policies">Get effective policies for a
                                 thing</a><a href="#group-test-authorization">Test authorization for MQTT
                                 actions</a></div>
                           <div id="main-content" class="awsui-util-container">
                              <div id="main-col-body">
                                 <awsdocs-language-banner data-service="$ctrl.pageService"></awsdocs-language-banner>
                                 <h1 class="topictitle" id="thing-groups">Static thing groups</h1>
                                 <div class="awsdocs-page-header-container">
                                    <awsdocs-page-header></awsdocs-page-header>
                                    <awsdocs-filter-selector id="awsdocs-filter-selector"></awsdocs-filter-selector>
                                 </div>
                                 <p>Static thing groups allow you to manage several things at once by categorizing them
                                    into groups. Static thing groups contain a group of things that are managed by using
                                    the
                                    console, CLI, or the API. <a href="./dynamic-thing-groups.html">Dynamic
                                       thing groups</a>, on the other hand, contain things that match a specified
                                    query. Static thing groups can also contain other static thing groups — you can
                                    build a hierarchy of groups. You can attach a policy to a parent group and it is
                                    inherited by its child groups, and by all of the things in the group and in its child
                                    groups. This makes control of permissions easy for large numbers of things.
                                 </p>
                                 <p>Here are the things you can do with static thing groups:</p>
                                 <div class="itemizedlist">
                                     
                                     
                                     
                                     
                                     
                                     
                                     
                                     
                                     
                                     
                                     
                                     
                                     
                                    
                                    <ul class="itemizedlist" type="disc">
                                       <li class="listitem">
                                          
                                          <p>Create, describe or delete a group.</p>
                                          
                                       </li>
                                       <li class="listitem">
                                          
                                          <p>Add a thing to a group, or to more than one group.</p>
                                          
                                       </li>
                                       <li class="listitem">
                                          
                                          <p>Remove a thing from a group.</p>
                                          
                                       </li>
                                       <li class="listitem">
                                          
                                          <p>List the groups you have created.</p>
                                          
                                       </li>
                                       <li class="listitem">
                                          
                                          <p>List all child groups of a group (its direct and indirect descendants.)</p>
                                          
                                       </li>
                                       <li class="listitem">
                                          
                                          <p>List the things in a group, including all the things in its child
                                             groups.
                                          </p>
                                          
                                       </li>
                                       <li class="listitem">
                                          
                                          <p>List all ancestor groups of a group (its direct and indirect parents.)</p>
                                          
                                       </li>
                                       <li class="listitem">
                                          
                                          <p>Add, delete or update the attributes of a group. (Attributes are name-value
                                             pairs you can use to store information about a group.)
                                          </p>
                                          
                                       </li>
                                       <li class="listitem">
                                          
                                          <p>Attach or detach a policy to or from a group.</p>
                                          
                                       </li>
                                       <li class="listitem">
                                          
                                          <p>List the policies attached to a group.</p>
                                          
                                       </li>
                                       <li class="listitem">
                                          
                                          <p>List the policies inherited by a thing (by virtue of the policies attached to
                                             its group, or one of its parent groups.)
                                          </p>
                                          
                                       </li>
                                       <li class="listitem">
                                          
                                          <p>Configure logging options for things in a group. See <a href="./configure-logging.html">Configure AWS IoT logging</a>. 
                                          </p>
                                          
                                       </li>
                                       <li class="listitem">
                                          
                                          <p>Create jobs that are sent to and executed on every thing in a group and its
                                             child groups. See <a href="./iot-jobs.html">Jobs</a>.
                                          </p>
                                          
                                       </li>
                                    </ul>
                                 </div>
                                 <p>Here are some limitations of static thing groups:</p>
                                 <div class="itemizedlist">
                                     
                                     
                                     
                                     
                                     
                                     
                                     
                                     
                                     
                                    
                                    <ul class="itemizedlist" type="disc">
                                       <li class="listitem">
                                          
                                          <p>A group can have at most one direct parent.</p>
                                          
                                       </li>
                                       <li class="listitem">
                                          
                                          <p>If a group is a child of another group, you must specify this at the time it
                                             is created.
                                          </p>
                                          
                                       </li>
                                       <li class="listitem">
                                          
                                          <p>You can't change a group's parent later, so be sure to plan your group
                                             hierarchy and create a parent group before you create any child groups it
                                             contains.
                                          </p>
                                          
                                       </li>
                                       <li class="listitem">
                                          
                                          <p></p>
                                          
                                          <p>The number of groups to which a thing can belong is <a href="https://docs.aws.amazon.com/general/latest/gr/iot-core.html#thing-limits">limited</a>.
                                          </p>
                                          
                                       </li>
                                       <li class="listitem">
                                          
                                          <p>You cannot add a thing to more than one group in the same hierarchy. (In other
                                             words, you cannot add a thing to two groups that share a common parent.)
                                          </p>
                                          
                                       </li>
                                       <li class="listitem">
                                          
                                          <p>You cannot rename a group.</p>
                                          
                                       </li>
                                       <li class="listitem">
                                          
                                          <p>Thing group names can't contain international characters, such as û, é and
                                             ñ.
                                          </p>
                                          
                                       </li>
                                       <li class="listitem">
                                          
                                          <p>You should not use personally identifiable information in your thing group
                                             name. The thing group name can appear in unencrypted communications and reports. 
                                          </p>
                                          
                                       </li>
                                       <li class="listitem">
                                          <p>
                                             You should not use a colon character ( : ) in a thing group name. The colon character
                                             is used as a delimiter by other AWS IoT services and this can cause them to parse
                                             strings with thing group names incorrectly.
                                             
                                          </p>
                                       </li>
                                    </ul>
                                 </div>
                                 <p>Attaching and detaching policies to groups can enhance the security of your AWS IoT
                                    operations in a number of significant ways. The per-device method of attaching a policy
                                    to a certificate, which is then attached to a thing, is time consuming and makes it
                                    difficult to quickly update or change policies across a fleet of devices. Having a
                                    policy attached to the thing's group saves steps when it is time to rotate the
                                    certificates on a thing. And policies are dynamically applied to things when they
                                    change
                                    group membership, so you aren't required to re-create a complex set of permissions
                                    each
                                    time a device changes membership in a group.
                                 </p>
                                 
                                 <h2 id="create-group">Create a static thing group</h2>
                                 
                                 <p>Use the <b>CreateThingGroup</b> command to create a static thing
                                    group:
                                 </p>
                                 <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class="nohighlight">$ aws iot create-thing-group --thing-group-name LightBulbs</code></pre>
                                 <p>The <b>CreateThingGroup</b> command returns a response that contains
                                    the static thing group's name, ID, and ARN:
                                 </p>
                                 <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class="JSON "><span>{</span>
    "thingGroupName": "LightBulbs", 
    "thingGroupId": "abcdefgh12345678ijklmnop12345678qrstuvwx",
    "thingGroupArn": "arn:aws:iot:us-west-2:123456789012:thinggroup/LightBulbs"
}</code></pre>
                                 <div class="awsdocs-note">
                                    <div class="awsdocs-note-title">
                                       <awsui-icon name="status-info" variant="link"></awsui-icon><span>Note</span></div>
                                    <div class="awsdocs-note-text">
                                       <p>We do not recommend using personally identifiable information in your thing
                                          group names.
                                       </p>
                                    </div>
                                 </div>
                                 
                                 <p>Here is an example that specifies a parent of the static thing group when it is
                                    created:
                                 </p>
                                 <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class="nohighlight">$ aws iot create-thing-group --thing-group-name RedLights --parent-group-name LightBulbs</code></pre>
                                 <p>As before, the <b>CreateThingGroup</b> command returns a response that
                                    contains the static thing group's name,, ID, and ARN:
                                 </p>
                                 <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class="JSON "><span>{</span>
    "thingGroupName": "RedLights", 
    "thingGroupId": "abcdefgh12345678ijklmnop12345678qrstuvwx",
    "thingGroupArn": "arn:aws:iot:us-west-2:123456789012:thinggroup/RedLights",
}</code></pre>
                                 <div class="awsdocs-note awsdocs-important">
                                    <div class="awsdocs-note-title">
                                       <awsui-icon name="status-warning" variant="error"></awsui-icon><span>Important</span></div>
                                    <div class="awsdocs-note-text">
                                       <p>Keep in mind the following limits when creating thing group
                                          hierarchies:
                                       </p>
                                       <div class="itemizedlist">
                                           
                                           
                                           
                                           
                                          
                                          <ul class="itemizedlist" type="disc">
                                             <li class="listitem">
                                                
                                                <p>A thing group can have only one direct parent.</p>
                                                
                                             </li>
                                             <li class="listitem">
                                                
                                                <p>The number of direct child groups a thing group can have is <a href="https://docs.aws.amazon.com/general/latest/gr/iot-core.html#thing-group-limits">limited</a>.
                                                </p>
                                                
                                                
                                             </li>
                                             <li class="listitem">
                                                
                                                <p>The maximum depth of a group hierarchy is <a href="https://docs.aws.amazon.com/general/latest/gr/iot-core.html#thing-group-limits">limited</a>.
                                                </p>
                                                
                                             </li>
                                             <li class="listitem">
                                                
                                                <p>The number of attributes a thing group can have is <a href="https://docs.aws.amazon.com/general/latest/gr/iot-core.html#thing-group-limits">limited</a>. (Attributes are name-value pairs you can use to
                                                   store information about a group.) The lengths of each attribute name
                                                   and each value are also <a href="https://docs.aws.amazon.com/general/latest/gr/iot-core.html#thing-group-limits">limited</a>.
                                                </p>
                                                
                                             </li>
                                          </ul>
                                       </div>
                                    </div>
                                 </div>
                                  
                                 
                                 <h2 id="describe-thing-group">Describe a thing group</h2>
                                 
                                 <p>You can use the <b>DescribeThingGroup</b> command to get information
                                    about a thing group:
                                 </p>
                                 <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class="nohighlight">$ aws iot describe-thing-group --thing-group-name RedLights</code></pre>
                                 <p>The <b>DescribeThingGroup</b> command returns information about the
                                    specified group:
                                 </p>
                                 <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class="JSON "><span>{</span>
    "thingGroupName": "RedLights", 
    "thingGroupArn": "arn:aws:iot:us-west-2:123456789012:thinggroup/RedLights",
    "thingGroupId": "12345678abcdefgh12345678ijklmnop12345678",
    "version": 1,
    "thingGroupMetadata": <span>{</span>
        "creationDate": 1478299948.882
        "parentGroupName": "Lights",
        "rootToParentThingGroups": [
            <span>{</span>
                "groupArn": "arn:aws:iot:us-west-2:123456789012:thinggroup/ShinyObjects",
                "groupName": "ShinyObjects"
            },
            <span>{</span>
                "groupArn": "arn:aws:iot:us-west-2:123456789012:thinggroup/LightBulbs",
                "groupName": "LightBulbs"
            }
        ]
    },
    "thingGroupProperties": <span>{</span>
        "attributePayload": <span>{</span>
            "attributes": <span>{</span>
                "brightness": "3400_lumens"
            },
        },
        "thingGroupDescription": "string"
    },
}
</code></pre>
                                  
                                 <h2 id="add-thing-to-group">Add a thing to a static thing group</h2>
                                 
                                 <p>You can use the <b>AddThingToThingGroup</b> command to add a thing to
                                    a static thing group:
                                 </p>
                                 <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class="nohighlight">$ aws iot add-thing-to-thing-group --thing-name MyLightBulb --thing-group-name RedLights</code></pre>
                                 <p>The <b>AddThingToThingGroup</b> command does not produce any
                                    output.
                                 </p>
                                 
                                 <div class="awsdocs-note awsdocs-important">
                                    <div class="awsdocs-note-title">
                                       <awsui-icon name="status-warning" variant="error"></awsui-icon><span>Important</span></div>
                                    <div class="awsdocs-note-text">
                                       <p>You can add a thing to a maximum of 10 groups. But you cannot add a thing to
                                          more than one group in the same hierarchy. (In other words, you cannot add a
                                          thing to two groups which share a common parent.)
                                       </p>
                                       <p>If a thing belongs to as many thing groups as possible, and one or more of
                                          those groups is a dynamic thing group, you can use the <a href="https://docs.aws.amazon.com/iot/latest/apireference/API_AddThingToThingGroup.html#iot-AddThingToThingGroup-request-overrideDynamicGroups"><b>overrideDynamicGroups</b></a> flag to make static
                                          groups take priority over dynamic groups.
                                       </p>
                                    </div>
                                 </div>
                                  
                                 
                                 <h2 id="remove-thing-from-group">Remove a thing from a static thing
                                    group
                                 </h2>
                                 
                                 <p>You can use the <b>RemoveThingFromThingGroup</b> command to remove a
                                    thing from a group:
                                 </p>
                                 <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class="nohighlight">$ aws iot remove-thing-from-thing-group --thing-name MyLightBulb --thing-group-name RedLights</code></pre>
                                 <p>The <b>RemoveThingFromThingGroup</b> command does not produce any
                                    output.
                                 </p>
                                  
                                 
                                 <h2 id="list-things-in-thing-group">List things in a thing group</h2>
                                 
                                 <p>You can use the <b>ListThingsInThingGroup</b> command to list the
                                    things that belong to a group:
                                 </p>
                                 <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class="nohighlight">$ aws iot list-things-in-thing-group --thing-group-name LightBulbs</code></pre>
                                 <p>The <b>ListThingsInThingGroup</b> command returns a list of the things
                                    in the given group:
                                 </p>
                                 <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class="JSON "><span>{</span>
    "things":[
        "TestThingA"
    ]
}</code></pre>
                                 <p>With the <code class="code">--recursive</code> parameter, you can list things belonging to a
                                    group and those in any of its child groups:
                                 </p>
                                 <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class="nohighlight">$ aws iot list-things-in-thing-group --thing-group-name LightBulbs --recursive</code></pre>
                                 <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class="JSON "><span>{</span>
    "things":[
        "TestThingA",
        "MyLightBulb"
    ]
}</code></pre>
                                 <div class="awsdocs-note">
                                    <div class="awsdocs-note-title">
                                       <awsui-icon name="status-info" variant="link"></awsui-icon><span>Note</span></div>
                                    <div class="awsdocs-note-text">
                                       <p>This operation is <a href="https://web.stanford.edu/class/cs345d-01/rl/eventually-consistent.pdf" rel="noopener noreferrer" target="_blank"><span>eventually consistent</span><awsui-icon class="awsdocs-link-icon" name="external"></awsui-icon></a>. In other words, changes to the thing group
                                          might not be reflected immediately.
                                       </p>
                                    </div>
                                 </div>
                                  
                                 
                                 <h2 id="list-thing-groups">List thing groups</h2>
                                 
                                 <p>You can use the <b>ListThingGroups</b> command to list your account's
                                    thing groups:
                                 </p>
                                 <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class="nohighlight">$ aws iot list-thing-groups</code></pre>
                                 <p>The <b>ListThingGroups</b> command returns a list of the thing groups
                                    in your AWS account:
                                 </p>
                                 <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class="JSON "><span>{</span>
    "thingGroups": [
        <span>{</span>
            "groupName": "LightBulbs", 
            "groupArn": "arn:aws:iot:us-west-2:123456789012:thinggroup/LightBulbs"
        },
        <span>{</span>
            "groupName": "RedLights", 
            "groupArn": "arn:aws:iot:us-west-2:123456789012:thinggroup/RedLights"
        },
        <span>{</span>
            "groupName": "RedLEDLights", 
            "groupArn": "arn:aws:iot:us-west-2:123456789012:thinggroup/RedLEDLights"
        },
        <span>{</span>
            "groupName": "RedIncandescentLights", 
            "groupArn": "arn:aws:iot:us-west-2:123456789012:thinggroup/RedIncandescentLights"
        }
        <span>{</span>
            "groupName": "ReplaceableObjects", 
            "groupArn": "arn:aws:iot:us-west-2:123456789012:thinggroup/ReplaceableObjects"
        }
    ]
}</code></pre>
                                 <p>Use the optional filters to list those groups that have a given group as parent
                                    (<code class="code">--parent-group</code>) or groups whose name begins with a given prefix
                                    (<code class="code">--name-prefix-filter</code>.) The <code class="code">--recursive</code> parameter
                                    allows you to list all children groups, not just direct child groups of a thing
                                    group:
                                 </p>
                                 <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class="nohighlight">$ aws iot list-thing-groups --parent-group LightBulbs</code></pre>
                                 <p>In this case, the <b>ListThingGroups</b> command returns a list of the
                                    direct child groups of the thing group defined in your AWS account:
                                 </p>
                                 <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class="JSON "><span>{</span>
    "childGroups":[
        <span>{</span>
            "groupName": "RedLights", 
            "groupArn": "arn:aws:iot:us-west-2:123456789012:thinggroup/RedLights"
        }
    ]
}</code></pre>
                                 <p>Use the <code class="code">--recursive</code> parameter with the
                                    <b>ListThingGroups</b> command to list all child groups of a thing
                                    group, not just direct children:
                                 </p>
                                 <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class="nohighlight">$ aws iot list-thing-groups --parent-group LightBulbs --recursive</code></pre>
                                 <p>The <b>ListThingGroups</b> command returns a list of all child groups
                                    of the thing group:
                                 </p>
                                 <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class="JSON "><span>{</span>
    "childGroups":[
        <span>{</span>
            "groupName": "RedLights", 
            "groupArn": "arn:aws:iot:us-west-2:123456789012:thinggroup/RedLights"
        },
        <span>{</span>
            "groupName": "RedLEDLights", 
            "groupArn": "arn:aws:iot:us-west-2:123456789012:thinggroup/RedLEDLights"
        },
        <span>{</span>
            "groupName": "RedIncandescentLights", 
            "groupArn": "arn:aws:iot:us-west-2:123456789012:thinggroup/RedIncandescentLights"
        }
    ]
}</code></pre>
                                 <div class="awsdocs-note">
                                    <div class="awsdocs-note-title">
                                       <awsui-icon name="status-info" variant="link"></awsui-icon><span>Note</span></div>
                                    <div class="awsdocs-note-text">
                                       <p>This operation is <a href="https://web.stanford.edu/class/cs345d-01/rl/eventually-consistent.pdf" rel="noopener noreferrer" target="_blank"><span>eventually consistent</span><awsui-icon class="awsdocs-link-icon" name="external"></awsui-icon></a>. In other words, changes to the thing group
                                          might not be reflected immediately.
                                       </p>
                                    </div>
                                 </div>
                                 
                                  
                                 
                                 <h2 id="list-thing-groups-for-thing">List groups for a thing</h2>
                                 
                                 <p>You can use the <b>ListThingGroupsForThing</b> command to list the
                                    groups a thing belongs to, including any parent groups:
                                 </p>
                                 <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class="nohighlight">$ aws iot list-thing-groups-for-thing --thing-name MyLightBulb</code></pre>
                                 <p>The <b>ListThingGroupsForThing</b> command returns a list of the thing
                                    groups this thing belongs to, including any parent groups:
                                 </p>
                                 <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class="JSON "><span>{</span>
    "thingGroups":[
        <span>{</span>
            "groupName": "LightBulbs", 
            "groupArn": "arn:aws:iot:us-west-2:123456789012:thinggroup/LightBulbs"
        },
        <span>{</span>
            "groupName": "RedLights", 
            "groupArn": "arn:aws:iot:us-west-2:123456789012:thinggroup/RedLights"
        },
        <span>{</span>
            "groupName": "ReplaceableObjects", 
            "groupArn": "arn:aws:iot:us-west-2:123456789012:thinggroup/ReplaceableObjects"
        }
    ]
}</code></pre>
                                  
                                 <h2 id="update-group">Update a static thing group</h2>
                                 
                                 <p>You can use the <b>UpdateThingGroup</b> command to update the
                                    attributes of a static thing group:
                                 </p>
                                 <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class="nohighlight">$ aws iot update-thing-group --thing-group-name "LightBulbs" --thing-group-properties "thingGroupDescription=\"this is a test group\", attributePayload=\"<span>{</span>\"attributes\"=<span>{</span>\"Owner\"=\"150\",\"modelNames\"=\"456\"}}"</code></pre>
                                 <p>The <b>UpdateThingGroup</b> command returns a response that contains
                                    the group's version number after the update:
                                 </p>
                                 <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class="JSON "><span>{</span>
    "version": 4
}</code></pre>
                                 <div class="awsdocs-note">
                                    <div class="awsdocs-note-title">
                                       <awsui-icon name="status-info" variant="link"></awsui-icon><span>Note</span></div>
                                    <div class="awsdocs-note-text">
                                       <p>The number of attributes that a thing can have is <a href="https://docs.aws.amazon.com/general/latest/gr/iot-core.html#thing-limits">limited</a>.
                                       </p>
                                       <p></p>
                                    </div>
                                 </div>
                                  
                                 
                                 <h2 id="delete-thing-group">Delete a thing group</h2>
                                 
                                 <p>To delete a thing group, use the <b>DeleteThingGroup</b>
                                    command:
                                 </p>
                                 <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class="nohighlight">$ aws iot delete-thing-group --thing-group-name "RedLights"</code></pre>
                                 <p>The <b>DeleteThingGroup</b> command does not produce any
                                    output.
                                 </p>
                                 
                                 <div class="awsdocs-note awsdocs-important">
                                    <div class="awsdocs-note-title">
                                       <awsui-icon name="status-warning" variant="error"></awsui-icon><span>Important</span></div>
                                    <div class="awsdocs-note-text">
                                       <p>If you try to delete a thing group that has child thing groups, you receive an
                                          error: 
                                       </p><pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class="nohighlight">A client error (InvalidRequestException) occurred when calling the DeleteThingGroup 
operation: Cannot delete thing group : RedLights when there are still child groups attached to it.</code></pre><p>You must delete any child groups first before you delete the group.</p>
                                    </div>
                                 </div>
                                 
                                 <p>You can delete a group that has child things, but any permissions granted to the
                                    things by membership in the group no longer apply. Before deleting a group that has
                                    a policy attached, check carefully that removing those permissions would not stop
                                    the things in the group from being able to function properly. Also, note that
                                    commands that show which groups a thing belongs to (for example,
                                    <b>ListGroupsForThing</b>) might continue to show the group while
                                    records in the cloud are being updated.
                                 </p>
                                  
                                 
                                 <h2 id="group-attach-policy">Attach a policy to a static thing
                                    group
                                 </h2>
                                 
                                 <p>You can use the <b>AttachPolicy</b> command to attach a policy to a
                                    static thing group and so, by extension, to all things in that group and things in
                                    any of its child groups:
                                 </p>
                                 <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class="nohighlight">$ aws iot attach-policy \
  --target "arn:aws:iot:us-west-2:123456789012:thinggroup/LightBulbs" \
  --policy-name "myLightBulbPolicy"</code></pre>
                                 <p>The <b>AttachPolicy</b> command does not produce any output
                                 </p>
                                 
                                 <div class="awsdocs-note awsdocs-important">
                                    <div class="awsdocs-note-title">
                                       <awsui-icon name="status-warning" variant="error"></awsui-icon><span>Important</span></div>
                                    <div class="awsdocs-note-text">
                                       <p>You can attach a maximum number of two policies to a group.</p>
                                    </div>
                                 </div>
                                 
                                 <div class="awsdocs-note">
                                    <div class="awsdocs-note-title">
                                       <awsui-icon name="status-info" variant="link"></awsui-icon><span>Note</span></div>
                                    <div class="awsdocs-note-text">
                                       <p>We do not recommend using personally identifiable information in your policy
                                          names.
                                       </p>
                                    </div>
                                 </div>
                                 
                                 <p>The <code class="code">--target</code> parameter can be a thing group ARN (as above), a
                                    certificate ARN, or an Amazon Cognito Identity. For more information about policies,
                                    certificates and authentication, see <a href="./authentication.html">Authentication</a>.
                                 </p>
                                  
                                 
                                 <h2 id="group-detach-policy">Detach a policy from a static thing
                                    group
                                 </h2>
                                 
                                 <p>You can use the <b>DetachPolicy</b> command to detach a policy from a
                                    group and so, by extension, to all things in that group and things in any of its
                                    child groups:
                                 </p>
                                 <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class="nohighlight">$ aws iot detach-policy --target "arn:aws:iot:us-west-2:123456789012:thinggroup/LightBulbs" --policy-name "myLightBulbPolicy"</code></pre>
                                 <p>The <b>DetachPolicy</b> command does not produce any output.
                                 </p>
                                  
                                 
                                 <h2 id="group-list-policies">List the policies attached to a static thing
                                    group
                                 </h2>
                                 
                                 <p>You can use the <b>ListAttachedPolicies</b> command to list the
                                    policies attached to a static thing group:
                                 </p>
                                 <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class="nohighlight">$ aws iot list-attached-policies --target "arn:aws:iot:us-west-2:123456789012:thinggroup/RedLights"</code></pre>
                                 <p>The <code class="code">--target</code> parameter can be a thing group ARN (as above), a
                                    certificate ARN, or an Amazon Cognito identity.
                                 </p>
                                 
                                 <p>Add the optional <code class="code">--recursive</code> parameter to include all policies
                                    attached to the group's parent groups.
                                 </p>
                                 
                                 <p>The <b>ListAttachedPolicies</b> command returns a list of
                                    policies:
                                 </p>
                                 <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class="JSON "><span>{</span>
    "policies": [
        "MyLightBulbPolicy" 
        ...
    ]
}</code></pre>
                                  
                                 <h2 id="group-list-targets-for-policy">List the groups for a policy</h2>
                                 
                                 <p>You can use the <b>ListTargetsForPolicy</b> command to list the
                                    targets, including any groups, that a policy is attached to:
                                 </p>
                                 <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class="nohighlight">$ aws iot list-targets-for-policy --policy-name "MyLightBulbPolicy"</code></pre>
                                 <p>Add the optional <code class="code">--page-size <code class="replaceable">number</code></code>
                                    parameter to specify the maximum number of results to be returned for each query,
                                    and the <code class="code">--marker <code class="replaceable">string</code></code> parameter on
                                    subsequent calls to retrieve the next set of results, if any.
                                 </p>
                                 
                                 <p>The <b>ListTargetsForPolicy</b> command returns a list of targets and
                                    the token to use to retrieve more results:
                                 </p>
                                 <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class="JSON "><span>{</span>
    "nextMarker": "string",
    "targets": [ "string" ... ]
}</code></pre>
                                  
                                 <h2 id="group-get-effective-policies">Get effective policies for a
                                    thing
                                 </h2>
                                 
                                 <p>You can use the <b>GetEffectivePolicies</b> command to list the
                                    policies in effect for a thing, including the policies attached to any groups the
                                    thing belongs to (whether the group is a direct parent or indirect ancestor):
                                 </p>
                                 <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class="nohighlight">$ aws iot get-effective-policies \
  --thing-name "MyLightBulb" \
  --principal "arn:aws:iot:us-east-1:123456789012:cert/a0c01f5835079de0a7514643d68ef8414ab739a1e94ee4162977b02b12842847"</code></pre>
                                 <p>Use the <code class="code">--principal</code> parameter to specify the ARN of the certificate
                                    attached to the thing. If you are using Amazon Cognito identity authentication, use
                                    the
                                    <code class="code">--cognito-identity-pool-id</code> parameter and, optionally, add the
                                    <code class="code">--principal</code> parameter to specify an Amazon Cognito identity. If you specify
                                    only the <code class="code">--cognito-identity-pool-id</code>, the policies associated with that
                                    identity pool's role for unauthenticated users are returned. If you use both, the
                                    policies associated with that identity pool's role for authenticated users are
                                    returned.
                                 </p>
                                 
                                 <p>The <code class="code">--thing-name</code> parameter is optional and can be used instead of the
                                    <code class="code">--principal</code> parameter. When used, the policies attached to any
                                    group the thing belongs to, and the policies attached to any parent groups of these
                                    groups (up to the root group in the hierarchy) are returned.
                                 </p>
                                 
                                 <p>The <b>GetEffectivePolicies</b> command returns a list of
                                    policies:
                                 </p>
                                 <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class="JSON "><span>{</span>
    "effectivePolicies": [
        <span>{</span>
            "policyArn": "string",
            "policyDocument": "string",
            "policyName": "string"
        }
        ...
    ]
}</code></pre>
                                  
                                 <h2 id="group-test-authorization">Test authorization for MQTT
                                    actions
                                 </h2>
                                 
                                 <p>You can use the <b>TestAuthorization</b> command to test whether an
                                    MQTT action is allowed for a thing:
                                 </p>
                                 <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class="nohighlight">aws iot test-authorization \
    --principal "arn:aws:iot:us-east-1:123456789012:cert/a0c01f5835079de0a7514643d68ef8414ab739a1e94ee4162977b02b12842847" \
    --auth-infos "<span>{</span>\"actionType\": \"PUBLISH\", \"resources\": [ \"arn:aws:iot:us-east-1:123456789012:topic/my/topic\"]}"</code></pre>
                                 <p>Use the <code class="code">--principal</code> parameter to specify the ARN of the certificate
                                    attached to the thing. If using Amazon Cognito Identity authentication, specify a
                                    Cognito
                                    Identity as the <code class="code">--principal</code> or use the
                                    <code class="code">--cognito-identity-pool-id</code> parameter, or both. (If you specify only
                                    the <code class="code">--cognito-identity-pool-id</code> then the policies associated with that
                                    identity pool's role for unauthenticated users are considered. If you use both, the
                                    policies associated with that identity pool's role for authenticated users are
                                    considered.
                                 </p>
                                 
                                 <p>Specify one or more MQTT actions you want to test by listing sets of resources and
                                    action types following the <code class="code">--auth-infos</code> parameter. The
                                    <code class="code">actionType</code> field should contain "PUBLISH", "SUBSCRIBE", "RECEIVE",
                                    or "CONNECT". The <code class="code">resources</code> field should contain a list of resource
                                    ARNs. See <a href="./iot-policies.html">AWS IoT Core policies</a> for more
                                    information.
                                 </p>
                                 
                                 <p>You can test the effects of adding policies by specifying them with the
                                    <code class="code">--policy-names-to-add</code> parameter. Or you can test the effects of
                                    removing policies by them with the <code class="code">--policy-names-to-skip</code>
                                    parameter.
                                 </p>
                                 
                                 <p>You can use the optional <code class="code">--client-id</code> parameter to further refine your
                                    results.
                                 </p>
                                 
                                 <p>The <b>TestAuthorization</b> command returns details on actions that
                                    were allowed or denied for each set of <code class="code">--auth-infos</code> queries you
                                    specified:
                                 </p>
                                 <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class="JSON "><span>{</span>
    "authResults": [
        <span>{</span>
            "allowed": <span>{</span>
                "policies": [
                    <span>{</span>
                        "policyArn": "string",
                        "policyName": "string"
                    }
                ]
            },
            "authDecision": "string",
            "authInfo": <span>{</span>
                "actionType": "string",
                "resources": [ "string" ]
            },
            "denied": <span>{</span>
                "explicitDeny": <span>{</span>
                    "policies": [
                        <span>{</span>
                            "policyArn": "string",
                            "policyName": "string"
                        }
                    ]
                },
                "implicitDeny": <span>{</span>
                    "policies": [
                        <span>{</span>
                            "policyArn": "string",
                            "policyName": "string"
                        }
                    ]
                }
            },
            "missingContextValues": [ "string" ]
        }
    ]
}</code></pre>
                                 <awsdocs-copyright class="copyright-print"></awsdocs-copyright>
                                 <awsdocs-thumb-feedback right-edge="{{$ctrl.thumbFeedbackRightEdge}}"></awsdocs-thumb-feedback>
                              </div>
                              <noscript>
                                 <div>
                                    <div>
                                       <div>
                                          <div id="js_error_message">
                                             <p><img src="https://d1ge0kk1l5kms0.cloudfront.net/images/G/01/webservices/console/warning.png" alt="Warning" /> <strong>Javascript is disabled or is unavailable in your
                                                   browser.</strong></p>
                                             <p>To use the Amazon Web Services Documentation, Javascript must be
                                                enabled. Please refer to your browser's Help pages for instructions.
                                             </p>
                                          </div>
                                       </div>
                                    </div>
                                 </div>
                              </noscript>
                              <div id="main-col-footer" class="awsui-util-font-size-0">
                                 <div id="doc-conventions"><a target="_top" href="/general/latest/gr/docconventions.html">Document Conventions</a></div>
                                 <div class="prev-next">
                                    <div id="previous" class="prev-link" accesskey="p" href="./thing-types.html">Thing types</div>
                                    <div id="next" class="next-link" accesskey="n" href="./dynamic-thing-groups.html">Dynamic thing groups</div>
                                 </div>
                              </div>
                              <awsdocs-page-utilities></awsdocs-page-utilities>
                           </div>
                           <div id="quick-feedback-yes" style="display: none;">
                              <div class="title">Did this page help you? - Yes</div>
                              <div class="content">
                                 <p>Thanks for letting us know we're doing a good
                                    job!
                                 </p>
                                 <p>If you've got a moment, please tell us what we did right
                                    so we can do more of it.
                                 </p>
                                 <p>
                                    <awsui-button id="fblink" target="_blank" text="Feedback" click="linkClick($event)" href="https://docs.aws.amazon.com/forms/aws-doc-feedback?hidden_service_name=IoT Docs&amp;topic_url=https://docs.aws.amazon.com/en_us/iot/latest/developerguide/thing-groups.html"></awsui-button>
                                 </p>
                              </div>
                           </div>
                           <div id="quick-feedback-no" style="display: none;">
                              <div class="title">Did this page help you? - No</div>
                              <div class="content">
                                 <p>Thanks for letting us know this page needs work. We're
                                    sorry we let you down.
                                 </p>
                                 <p>If you've got a moment, please tell us how we can make
                                    the documentation better.
                                 </p>
                                 <p>
                                    <awsui-button id="fblink" target="_blank" text="Feedback" click="linkClick($event)" href="https://docs.aws.amazon.com/forms/aws-doc-feedback?hidden_service_name=IoT Docs&amp;topic_url=https://docs.aws.amazon.com/en_us/iot/latest/developerguide/thing-groups.html"></awsui-button>
                                 </p>
                              </div>
                           </div>
                        </div>
                     </body>
                  </div>
               </awsdocs-view>
               <div class="page-loading-indicator" id="page-loading-indicator">
                  <awsui-spinner size="large"></awsui-spinner>
               </div>
            </div>
            <div id="tools-panel" dom-region="tools">
               <awsdocs-tools-panel id="awsdocs-tools-panel"></awsdocs-tools-panel>
            </div>
         </awsui-app-layout>
         <awsdocs-cookie-banner class="doc-cookie-banner"></awsdocs-cookie-banner>
         <!--
                SiteCatalyst code version: H.25.2.
                Copyright 1996-2012 Adobe, Inc. All Rights Reserved
                More info available at http://www.omniture.com
            --><script language="JavaScript" type="text/javascript">
var awsdocs = awsdocs || {};
awsdocs.prop66 = 'AWS IoT Core';
awsdocs.prop65 =  'Developer Guide';
            </script><script src="https://a0.awsstatic.com/s_code/js/3.0/awshome_s_code.js" language="JavaScript" type="text/javascript"></script>
         <!--/DO NOT REMOVE/-->
         <!--End SiteCatalyst code version: H.25.2.--></div>
   </body>
</html>