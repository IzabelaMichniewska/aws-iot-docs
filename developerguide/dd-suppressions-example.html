<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" ng-app="AWSDocsDocPageApp">
   <head>
      <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
      <title>Customize when and how you view AWS IoT Device Defender audit results - AWS IoT Core</title>
      <meta name="viewport" content="width=device-width,initial-scale=1" />
      <meta name="assets_root" content="assets" />
      <meta name="target_state" content="dd-suppressions-example" />
      <meta name="default_state" content="dd-suppressions-example" />
      <link rel="icon" type="image/ico" href="/assets/images/favicon.ico" />
      <link rel="shortcut icon" type="image/ico" href="/assets/images/favicon.ico" />
      <link rel="canonical" href="https://docs.aws.amazon.com/iot/latest/developerguide/dd-suppressions-example.html" />
      <meta name="description" content="Use AWS IoT Device Defender audit finding suppressions to control when and how you view your audit results." />
      <meta name="deployment_region" content="IAD" />
      <meta name="product" content="AWS IoT Core" />
      <meta name="guide" content="Developer Guide" />
      <meta name="locales" content="de_de:Deutsch/en_us:English/es_es:Español/fr_fr:Français/it_it:Italiano/ja_jp:日本語/ko_kr:한국어/pt_br:Português/zh_cn:中文 (简体)/zh_tw:中文 (繁體)" />
      <meta name="abstract" content="AWS IoT provides secure, bi-directional communication between Internet-connected devices such as sensors, actuators, embedded micro-controllers, or smart appliances and the AWS Cloud. This enables you to collect telemetry data from multiple devices, and store and analyze the data. You can also create applications that enable your users to control these devices from their phones or tablets." />
      <meta name="guide-locale" content="en_us" />
      <meta name="tocs" content="toc-contents.json" />
      <meta name="feedback-item" content="IoT Docs" />
      <meta name="this_doc_product" content="AWS IoT Core" />
      <meta name="this_doc_guide" content="Developer Guide" />
      <link href="assets/css/vendor4.css" rel="stylesheet" />
      <link href="assets/css/awsdocs-common.css" rel="stylesheet" /><script type="text/javascript" src="assets/js/vendor3.js" defer=""></script><script type="text/javascript" src="assets/js/vendor4.js" defer=""></script><script type="text/javascript" src="assets/js/vendor1.js" defer=""></script><script type="text/javascript" src="assets/js/awsdocs-common.js" defer=""></script><script type="text/javascript" src="assets/js/awsdocs-doc-app.js" defer=""></script></head>
   <body class="awsdocs awsui">
      <div class="awsdocs-container">
         <awsdocs-header></awsdocs-header>
         <awsui-app-layout id="app-layout" class="awsui-util-no-gutters" ng-controller="ContentController as $ctrl" header-selector="awsdocs-header" navigation-hide="false" navigation-width="$ctrl.navWidth" navigation-open="$ctrl.navOpen" navigation-change="$ctrl.onNavChange($event)" tools-hide="$ctrl.hideTools" tools-width="$ctrl.toolsWidth" tools-open="$ctrl.toolsOpen" tools-change="$ctrl.onToolsChange($event)">
            <div id="guide-toc" dom-region="navigation">
               <awsdocs-toc></awsdocs-toc>
            </div>
            <div id="main-column" dom-region="content" tabindex="-1">
               <awsdocs-view class="awsdocs-view">
                  <div id="awsdocs-content">
                     <head>
                        <title>Customize when and how you view AWS IoT Device Defender audit results - AWS IoT Core</title>
                        <meta name="pdf" content="iot-dg.pdf#dd-suppressions-example" />
                        <meta name="kindle" content="https://www.amazon.com/dp/B07JBRCWWZ" />
                        <meta name="github" content="https://github.com/awsdocs/aws-iot-docs/tree/master/developerguide/dd-suppressions-example.md" />
                        <meta name="forums" content="http://forums.aws.amazon.com/forum.jspa?forumID=210" />
                        <meta name="feedback" content="https://docs.aws.amazon.com/forms/aws-doc-feedback?hidden_service_name=IoT%20Docs&amp;topic_url=http://docs.aws.amazon.com/en_us/iot/latest/developerguide/dd-suppressions-example.html" />
                        <meta name="feedback-yes" content="feedbackyes.html?topic_url=http://docs.aws.amazon.com/en_us/iot/latest/developerguide/dd-suppressions-example.html" />
                        <meta name="feedback-no" content="feedbackno.html?topic_url=http://docs.aws.amazon.com/en_us/iot/latest/developerguide/dd-suppressions-example.html" />
                        <meta name="keywords" content="AWS IoT,IoT,Internet of Things" />
                     </head>
                     <body>
                        <div id="main">
                           <div style="display: none"><a href="iot-dg.pdf#dd-suppressions-example" target="_blank" rel="noopener noreferrer" title="Open PDF"></a><a target="_blank" rel="noopener noreferrer" href="https://www.amazon.com/dp/B07JBRCWWZ" title="Open Kindle"></a><a href="https://github.com/awsdocs/aws-iot-docs/tree/master/developerguide/dd-suppressions-example.md" target="_blank" rel="noopener noreferrer" title="Edit this page on GitHub"></a></div>
                           <div id="breadcrumbs" class="breadcrumb"><a href="http://aws.amazon.com">AWS</a><a href="/index.html">Documentation</a><a href="/iot/index.html">AWS IoT Core</a><a href="what-is-aws-iot.html">Developer Guide</a></div>
                           <div id="page-toc-src"><a href="#dd-gs-afs">Getting started</a><a href="#dd-afs-example-console">Customize your audit findings in the
                                 console</a><a href="#dd-afs-example-cli">Customize your audit findings in the CLI</a></div>
                           <div id="main-content" class="awsui-util-container">
                              <div id="main-col-body">
                                 <awsdocs-language-banner data-service="$ctrl.pageService"></awsdocs-language-banner>
                                 <h1 class="topictitle" id="dd-suppressions-example">Customize when and how you view AWS IoT Device Defender audit
                                    results
                                 </h1>
                                 <div class="awsdocs-page-header-container">
                                    <awsdocs-page-header></awsdocs-page-header>
                                    <awsdocs-filter-selector id="awsdocs-filter-selector"></awsdocs-filter-selector>
                                 </div>
                                 <p>AWS IoT Device Defender audit provides periodic security checks to confirm AWS IoT
                                    devices and resources are
                                    following best practices. For each check, the audit results are categorized as compliant
                                    or
                                    non-compliant, where non-compliance results in console warning icons. To reduce noise
                                    from
                                    repeating known issues, the audit finding suppression feature allows you to temporarily
                                    silence these non-compliance notifications.
                                 </p>
                                 <p>You can suppress select audit checks for a specific resource or account for a
                                    predetermined time period. An audit check result that has been suppressed is categorized
                                    as
                                    a suppressed finding, separate from the compliant and non-compliant categories. This
                                    new
                                    category doesn't trigger an alarm like a non-compliant result. This allows you to
                                    reduce
                                    non-compliance notification disturbances during known maintenance periods or until
                                    an update
                                    is scheduled to be completed.
                                 </p>
                                 
                                 <h2 id="dd-gs-afs">Getting started</h2>
                                 
                                 <p>The following sections detail how you can use audit finding suppressions to suppress
                                    a
                                    <code class="code">Device certificate expiring</code> check in the console and CLI. If you'd like
                                    to follow either of the demonstrations, you must first create two expiring certificates
                                    for Device Defender to detect.
                                 </p>
                                 
                                 <p>Use the following to create your certificates.</p>
                                 
                                 <div class="itemizedlist">
                                     
                                     
                                    
                                    <ul class="itemizedlist" type="disc">
                                       <li class="listitem">
                                          
                                          <p><a href="./manage-your-CA-certs.html">Create and register a CA
                                                certificate</a></p>
                                          
                                       </li>
                                       <li class="listitem">
                                          
                                          <p><a href="https://docs.aws.amazon.com/iot/latest/developerguide/create-device-cert.html">Create a client
                                                certificate using your CA certificate</a>. In step 3, set your
                                             <code class="code">days</code> parameter to <code class="userinput">1</code>.
                                          </p>
                                          
                                       </li>
                                    </ul>
                                 </div>
                                 
                                 <p>If you're using the CLI to create your certificates, enter the following
                                    command.
                                 </p>
                                 <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class="nohighlight">openssl x509 -req \ 
    -in <code class="replaceable">device_cert_csr_filename</code> \ 
    -CA <code class="replaceable">root_ca_pem_filename</code> \ 
    -CAkey <code class="replaceable">root_ca_key_filename</code> \     
    -CAcreateserial \
    -out <code class="replaceable">device_cert_pem_filename</code> \ 
    -days <code class="replaceable">1</code> -sha256</code></pre>
                                  
                                 <h2 id="dd-afs-example-console">Customize your audit findings in the
                                    console
                                 </h2>
                                 
                                 <p>The following walkthrough uses an account with two expired device certificates that
                                    trigger a non-compliant audit check. In this scenario, we want to disable the warning
                                    because our developers are testing a new feature that'll address the problem. We create
                                    an audit finding suppression for each certificate to stop the audit result from being
                                    non-compliant for the next week.
                                 </p>
                                 
                                 <div class="procedure">
                                    <ol>
                                       <li>
                                          
                                          <p>We will first run an on-demand audit to show that the expired device
                                             certificate check is non-compliant.
                                          </p>
                                          
                                          <p>From the <a href="https://console.aws.amazon.com/iot" rel="noopener noreferrer" target="_blank"><span>AWS IoT
                                                   console</span><awsui-icon class="awsdocs-link-icon" name="external"></awsui-icon></a>, choose <b>Defend</b> from the left sidebar, then
                                             <b>Audit</b>, and then <b>Results</b>. On the
                                             <b>Audit Results</b> page, choose
                                             <b>Create</b>. The <b>Create a new audit</b>
                                             window opens. Choose <b>Create</b>.
                                          </p>
                                          
                                          <div class="mediaobject">
                                              
                                             <img src="images/dd-afs-noncompliant.png" class="aws-docs-img-whiteBg aws-docs-img-padding" />
                                              
                                             
                                          </div>
                                          
                                          <p>From the on-demand audit results, we can see that "Device certificate
                                             expiring" is non-compliant for two resources.
                                          </p>
                                          
                                       </li>
                                       <li>
                                          
                                          <p>Now, we'd like to disable the "Device certificate expiring" non-compliant
                                             check warning because our developers are testing new features that will fix the
                                             warning.
                                          </p>
                                          
                                          <p>From the left sidebar under <b>Defend</b>, choose
                                             <b>Audit</b>, and then choose <b>Finding
                                                suppressions</b>. On the <b>Audit finding
                                                suppressions</b> page, choose <b>Create</b>.
                                          </p>
                                          
                                          <div class="mediaobject">
                                              
                                             <img src="images/dd-afs-suppressions.png" class="aws-docs-img-whiteBg aws-docs-img-padding" />
                                              
                                             
                                          </div>
                                          
                                       </li>
                                       <li>
                                          
                                          <p>On the <b>Create an audit finding suppression</b> window, we
                                             need to fill out the following.
                                          </p>
                                          
                                          <div class="itemizedlist">
                                              
                                              
                                              
                                              
                                             
                                             <ul class="itemizedlist" type="disc">
                                                <li class="listitem">
                                                   
                                                   <p><b>Audit check</b>: We select <code class="option">Device certificate
                                                         expiring</code>, because that is the audit check we'd like to
                                                      suppress.
                                                   </p>
                                                   
                                                </li>
                                                <li class="listitem">
                                                   
                                                   <p><b>Resource identifier</b>: We input the device
                                                      certificate ID of one of the certificates we'd like to suppress audit
                                                      findings for.
                                                   </p>
                                                   
                                                </li>
                                                <li class="listitem">
                                                   
                                                   <p><b>Suppression duration</b>: We select <code class="option">1
                                                         week</code>, because that's how long we'd like to suppress the
                                                      <code class="option">Device certificate expiring</code> audit check for.
                                                   </p>
                                                   
                                                </li>
                                                <li class="listitem">
                                                   
                                                   <p><b>Description (optional)</b>: We add a note that
                                                      describes why we're suppressing this audit finding.
                                                   </p>
                                                   
                                                </li>
                                             </ul>
                                          </div>
                                          
                                          <div class="mediaobject">
                                              
                                             <img src="images/dd-afs-create.png" class="aws-docs-img-whiteBg aws-docs-img-padding" />
                                              
                                             
                                          </div>
                                          
                                          <p>After we've filled out the fields, choose <b>Create</b>. We
                                             see a success banner after the audit finding suppression has been
                                             created.
                                          </p>
                                          
                                       </li>
                                       <li>
                                          
                                          <p>We've suppressed an audit finding for one of the certificates and now we need
                                             to suppress the audit finding for the second certificate. We could use the same
                                             suppression method that we used in step 3, but we will be using a different
                                             method for demonstration purposes.
                                          </p>
                                          
                                          <p>From the left sidebar under <b>Defend</b>, choose
                                             <b>Audit</b>, and then choose <b>Results</b>. On
                                             the <b>Audit results</b> page, choose the audit with the
                                             non-compliant resource. Then, select the resource under <b>Non-compliant
                                                checks</b>. In our case, we select "Device certificate
                                             expiring".
                                          </p>
                                          
                                       </li>
                                       <li>
                                          
                                          <p>On the <b>Device certificate expiring</b> page, under
                                             <b>Non-compliant policy</b> choose the option button next to
                                             the finding that needs to be suppressed. Next, choose the
                                             <b>Actions</b> dropdown menu, and then choose the duration for
                                             which you'd like finding to be suppressed. In our case, we choose <code class="option">1
                                                week</code> as we did for the other certificate. On the <b>Confirm
                                                suppression</b> window, choose <b>Enable
                                                suppression</b>.
                                          </p>
                                          
                                          <div class="mediaobject">
                                              
                                             <img src="images/dd-afs-noncompliantcerts.png" class="aws-docs-img-whiteBg aws-docs-img-padding" />
                                              
                                             
                                          </div>
                                          
                                          <p>We see a success banner after the audit finding suppression has been created.
                                             Now, both audit findings have been suppressed for 1 week while our developers
                                             work on a solution to address the warning.
                                          </p>
                                          
                                       </li>
                                    </ol>
                                 </div>
                                  
                                 
                                 <h2 id="dd-afs-example-cli">Customize your audit findings in the CLI</h2>
                                 
                                 <p>The following walkthrough uses an account with an expired device certificate that
                                    trigger a non-compliant audit check. In this scenario, we want to disable the warning
                                    because our developers are testing a new feature that'll address the problem. We create
                                    an audit finding suppression for the certificate to stop the audit result from being
                                    non-compliant for the next week.
                                 </p>
                                 
                                 <p>We use the following CLI commands.</p>
                                 
                                 <div class="itemizedlist">
                                     
                                     
                                     
                                     
                                     
                                    
                                    <ul class="itemizedlist" type="disc">
                                       <li class="listitem">
                                          
                                          <p><a href="https://docs.aws.amazon.com/cli/latest/reference/iot/create-audit-suppression.html">create-audit-suppression</a></p>
                                          
                                       </li>
                                       <li class="listitem">
                                          
                                          <p><a href="https://docs.aws.amazon.com/cli/latest/reference/iot/describe-audit-suppression.html">describe-audit-suppression</a></p>
                                          
                                       </li>
                                       <li class="listitem">
                                          
                                          <p><a href="https://docs.aws.amazon.com/cli/latest/reference/iot/update-audit-suppression.html">update-audit-suppression</a></p>
                                          
                                       </li>
                                       <li class="listitem">
                                          
                                          <p><a href="https://docs.aws.amazon.com/cli/latest/reference/iot/delete-audit-suppression.html">delete-audit-suppression</a></p>
                                          
                                       </li>
                                       <li class="listitem">
                                          
                                          <p><a href="https://docs.aws.amazon.com/cli/latest/reference/iot/list-audit-suppressions.html">list-audit-suppressions</a></p>
                                          
                                       </li>
                                    </ul>
                                 </div>
                                 
                                 <div class="procedure">
                                    <ol>
                                       <li>
                                          
                                          <p>Use the following command to enable the audit.</p>
                                          <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class="">aws iot update-account-audit-configuration \
   --audit-check-configurations "<span>{</span>\"DEVICE_CERTIFICATE_EXPIRING_CHECK\":<span>{</span>\"enabled\":true}}"</code></pre>
                                          <p>Output:</p>
                                          
                                          <p>None.</p>
                                          
                                       </li>
                                       <li>
                                          
                                          <p>Use the following command to run an on-demand audit that targets the
                                             <code class="code">DEVICE_CERTIFICATE_EXPIRING_CHECK</code> audit check.
                                          </p>
                                          <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class="nohighlight">aws iot start-on-demand-audit-task \
    --target-check-names <code class="replaceable">DEVICE_CERTIFICATE_EXPIRING_CHECK</code></code></pre>
                                          <p>Output:</p>
                                          <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class=""><span>{</span>
    "taskId": "787ed873b69cb4d6cdbae6ddd06996c5"
}</code></pre>
                                          </li>
                                       <li>
                                          
                                          <p>Use the <a href="https://docs.aws.amazon.com/cli/latest/reference/iot/describe-account-audit-configuration.html">describe-account-audit-configuration</a> command to describe the audit
                                             configuration. We want to confirm that we've turned on the audit check for
                                             <code class="code">DEVICE_CERTIFICATE_EXPIRING_CHECK</code>.
                                          </p>
                                          <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class="">aws iot describe-account-audit-configuration</code></pre>
                                          <p>Output:</p>
                                          <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class="nohighlight">
<span>{</span>
    "roleArn": "<code class="replaceable">arn:aws:iam::&lt;accountid&gt;:role/service-role/project</code>",
    "auditNotificationTargetConfigurations": <span>{</span>
        "SNS": <span>{</span>
            "targetArn": "<code class="replaceable">arn:aws:sns:us-east-1:&lt;accountid&gt;:project_sns</code>",
            "roleArn": "<code class="replaceable">arn:aws:iam::&lt;accountid&gt;:role/service-role/project</code>",
            "enabled": true
        }
    },
    "auditCheckConfigurations": <span>{</span>
        "AUTHENTICATED_COGNITO_ROLE_OVERLY_PERMISSIVE_CHECK": <span>{</span>
            "enabled": false
        },
        "CA_CERTIFICATE_EXPIRING_CHECK": <span>{</span>
            "enabled": false
        },
        "CA_CERTIFICATE_KEY_QUALITY_CHECK": <span>{</span>
            "enabled": false
        },
        "CONFLICTING_CLIENT_IDS_CHECK": <span>{</span>
            "enabled": false
        },
        "DEVICE_CERTIFICATE_EXPIRING_CHECK": <span>{</span>
            "enabled": true
        },
        "DEVICE_CERTIFICATE_KEY_QUALITY_CHECK": <span>{</span>
            "enabled": false
        },
        "DEVICE_CERTIFICATE_SHARED_CHECK": <span>{</span>
            "enabled": false
        },
        "IOT_POLICY_OVERLY_PERMISSIVE_CHECK": <span>{</span>
            "enabled": true
        },
        "IOT_ROLE_ALIAS_ALLOWS_ACCESS_TO_UNUSED_SERVICES_CHECK": <span>{</span>
            "enabled": false
        },
        "IOT_ROLE_ALIAS_OVERLY_PERMISSIVE_CHECK": <span>{</span>
            "enabled": false
        },
        "LOGGING_DISABLED_CHECK": <span>{</span>
            "enabled": false
        },
        "REVOKED_CA_CERTIFICATE_STILL_ACTIVE_CHECK": <span>{</span>
            "enabled": false
        },
        "REVOKED_DEVICE_CERTIFICATE_STILL_ACTIVE_CHECK": <span>{</span>
            "enabled": false
        },
        "UNAUTHENTICATED_COGNITO_ROLE_OVERLY_PERMISSIVE_CHECK": <span>{</span>
            "enabled": false
        }
    }
}</code></pre>
                                          <p><code class="code">DEVICE_CERTIFICATE_EXPIRING_CHECK</code> should have a value of
                                             <code class="code">true</code>.
                                          </p>
                                          
                                       </li>
                                       <li>
                                          
                                          <p>Use the <a href="https://docs.aws.amazon.com/cli/latest/reference/iot/list-audit-task.html">list-audit-task</a> command to identify the completed audit
                                             tasks.
                                          </p>
                                          <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class="nohighlight">aws iot list-audit-tasks \
    --task-status "COMPLETED" \
    --start-time <code class="replaceable">2020-07-31</code> \
    --end-time <code class="replaceable">2020-08-01</code></code></pre>
                                          <p>Output:</p>
                                          <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class="nohighlight"><span>{</span>
    "tasks": [
        <span>{</span>
            "taskId": "<code class="replaceable">787ed873b69cb4d6cdbae6ddd06996c5</code>",
            "taskStatus": "COMPLETED",
            "taskType": "SCHEDULED_AUDIT_TASK"
        }
    ]
}</code></pre>
                                          <p>The <code class="code">taskId</code> of the audit you ran in step 1 should have a
                                             <code class="code">taskStatus</code> of <code class="code">COMPLETED</code>.
                                          </p>
                                          
                                       </li>
                                       <li>
                                          
                                          <p>Use the <a href="https://docs.aws.amazon.com/cli/latest/reference/iot/describe-audit-task.html">describe-audit-task</a> command to get details about the completed
                                             audit using the <code class="code">taskId</code> output from the previous step.
                                             This command lists details about your audit.
                                          </p>
                                          <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class="nohighlight">aws iot describe-audit-task \
    --task-id "<code class="replaceable">787ed873b69cb4d6cdbae6ddd06996c5</code>"</code></pre>
                                          <p>Output:</p>
                                          <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class=""><span>{</span>
    "taskStatus": "COMPLETED",
    "taskType": "SCHEDULED_AUDIT_TASK",
    "taskStartTime": 1596168096.157,
    "taskStatistics": <span>{</span>
        "totalChecks": 1,
        "inProgressChecks": 0,
        "waitingForDataCollectionChecks": 0,
        "compliantChecks": 0,
        "nonCompliantChecks": 1,
        "failedChecks": 0,
        "canceledChecks": 0
    },
    "scheduledAuditName": "AWSIoTDeviceDefenderDailyAudit",
    "auditDetails": <span>{</span>
        "DEVICE_CERTIFICATE_EXPIRING_CHECK": <span>{</span>
            "checkRunStatus": "COMPLETED_NON_COMPLIANT",
            "checkCompliant": false,
            "totalResourcesCount": 195,
            "nonCompliantResourcesCount": 2
        }
    }
}</code></pre>
                                          </li>
                                       <li>
                                          
                                          <p>Use the <a href="https://docs.aws.amazon.com/cli/latest/reference/iot/list-audit-findings.html">list-audit-findings</a> command to find the non-compliant certificate
                                             ID so that we can suspend the audit alerts for this resource.
                                          </p>
                                          <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class="nohighlight">aws iot list-audit-findings \
    --start-time <code class="replaceable">2020-07-31</code> \
    --end-time <code class="replaceable">2020-08-01</code></code></pre>
                                          <p>Output:</p>
                                          <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class="nohighlight"><span>{</span>
    "findings": [
        <span>{</span>
            "findingId": "<code class="replaceable">296ccd39f806bf9d8f8de20d0ceb33a1</code>",
            "taskId": "<code class="replaceable">787ed873b69cb4d6cdbae6ddd06996c5</code>",
            "checkName": "DEVICE_CERTIFICATE_EXPIRING_CHECK",
            "taskStartTime": 1596168096.157,
            "findingTime": 1596168096.651,
            "severity": "MEDIUM",
            "nonCompliantResource": <span>{</span>
                "resourceType": "DEVICE_CERTIFICATE",
                "resourceIdentifier": <span>{</span>
                    "deviceCertificateId": "b4490&lt;shortened&gt;"
                },
                "additionalInfo": <span>{</span>
                "EXPIRATION_TIME": "1582862626000"
                }
            },
            "reasonForNonCompliance": "Certificate is past its expiration.",
            "reasonForNonComplianceCode": "CERTIFICATE_PAST_EXPIRATION",
            "isSuppressed": false
        },
        <span>{</span>
            "findingId": "37ecb79b7afb53deb328ec78e647631c",
            "taskId": "787ed873b69cb4d6cdbae6ddd06996c5",
            "checkName": "DEVICE_CERTIFICATE_EXPIRING_CHECK",
            "taskStartTime": 1596168096.157,
            "findingTime": 1596168096.651,
            "severity": "MEDIUM",
            "nonCompliantResource": <span>{</span>
                "resourceType": "DEVICE_CERTIFICATE",
                "resourceIdentifier": <span>{</span>
                    "deviceCertificateId": "c7691&lt;shortened&gt;"
                },
                "additionalInfo": <span>{</span>
                "EXPIRATION_TIME": "1583424717000"
                }
            },
            "reasonForNonCompliance": "Certificate is past its expiration.",
            "reasonForNonComplianceCode": "CERTIFICATE_PAST_EXPIRATION",
            "isSuppressed": false
        }
   ]
}</code></pre>
                                          </li>
                                       <li>
                                          
                                          <p>Use the <a href="https://docs.aws.amazon.com/cli/latest/reference/iot/create-audit-suppression.html">create-audit-suppression</a> command to suppress notifications for the
                                             <code class="code">DEVICE_CERTIFICATE_EXPIRING_CHECK</code> audit check for a device
                                             certificate with the id
                                             <code class="code"><code class="replaceable">c7691e&lt;shortened&gt;</code></code> until
                                             <code class="replaceable">2020-08-20</code>.
                                          </p>
                                          <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class="nohighlight">aws iot create-audit-suppression \
    --check-name DEVICE_CERTIFICATE_EXPIRING_CHECK \
    --resource-identifier deviceCertificateId="<code class="replaceable">c7691e&lt;shortened&gt;</code>" \
    --no-suppress-indefinitely \ 
    --expiration-date <code class="replaceable">2020-08-20</code></code></pre>
                                          </li>
                                       <li>
                                          
                                          <p>Use the <a href="https://docs.aws.amazon.com/cli/latest/reference/iot/list-audit-suppression.html">list-audit-suppression</a> command to confirm the audit suppression
                                             setting and get details about the suppression.
                                          </p>
                                          <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class="">aws iot list-audit-suppressions</code></pre>
                                          <p>Output:</p>
                                          
                                          <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class="nohighlight"><span>{</span>
    "suppressions": [
        <span>{</span>
        "checkName": "DEVICE_CERTIFICATE_EXPIRING_CHECK",
            "resourceIdentifier": <span>{</span>
                "deviceCertificateId": "<code class="replaceable">c7691e&lt;shortened&gt;</code>"
            },
        "expirationDate": 1597881600.0,
        "suppressIndefinitely": false
        }
    ]
}</code></pre>
                                          
                                          </li>
                                       <li>
                                          
                                          <p>The <a href="https://docs.aws.amazon.com/cli/latest/reference/iot/update-audit-suppression.html">update-audit-suppression</a> command can be used to update the audit
                                             finding suppression. The example below updates the
                                             <code class="code">expiration-date</code> to <code class="code">08/21/20</code>.
                                          </p>
                                          <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class="nohighlight">aws iot update-audit-suppression \
    --check-name DEVICE_CERTIFICATE_EXPIRING_CHECK \
    --resource-identifier deviceCertificateId=c7691e&lt;shortened&gt; \
    --no-suppress-indefinitely \
    --expiration-date <code class="replaceable">2020-08-21</code></code></pre>
                                          </li>
                                       <li>
                                          
                                          <p>The <a href="https://docs.aws.amazon.com/cli/latest/reference/iot/delete-audit-suppression.html">delete-audit-suppression</a> command can be used to remove an audit
                                             finding suppression.
                                          </p>
                                          <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class="nohighlight">aws iot delete-audit-suppression \
    --check-name DEVICE_CERTIFICATE_EXPIRING_CHECK \
    --resource-identifier deviceCertificateId="<code class="replaceable">c7691e&lt;shortened&gt;</code>"</code></pre>
                                          <p>To confirm deletion, use the <a href="https://docs.aws.amazon.com/cli/latest/reference/iot/list-audit-suppressions.html">list-audit-suppressions</a> command.
                                          </p>
                                          <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class="">aws iot list-audit-suppressions</code></pre>
                                          <p>Output:</p>
                                          <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class=""><span>{</span>
 "suppressions": []
}</code></pre>
                                          </li>
                                    </ol>
                                 </div>
                                 
                                 <p>In this tutorial, we showed you how to suppress a <code class="code">Device certificate expiring</code>
                                    check in the console and CLI. For more information about audit finding suppressions,
                                    see
                                    <a href="./audit-finding-suppressions.html">Audit finding suppressions</a></p>
                                 <awsdocs-copyright class="copyright-print"></awsdocs-copyright>
                                 <awsdocs-thumb-feedback right-edge="{{$ctrl.thumbFeedbackRightEdge}}"></awsdocs-thumb-feedback>
                              </div>
                              <noscript>
                                 <div>
                                    <div>
                                       <div>
                                          <div id="js_error_message">
                                             <p><img src="https://d1ge0kk1l5kms0.cloudfront.net/images/G/01/webservices/console/warning.png" alt="Warning" /> <strong>Javascript is disabled or is unavailable in your
                                                   browser.</strong></p>
                                             <p>To use the Amazon Web Services Documentation, Javascript must be
                                                enabled. Please refer to your browser's Help pages for instructions.
                                             </p>
                                          </div>
                                       </div>
                                    </div>
                                 </div>
                              </noscript>
                              <div id="main-col-footer" class="awsui-util-font-size-0">
                                 <div id="doc-conventions"><a target="_top" href="/general/latest/gr/docconventions.html">Document Conventions</a></div>
                                 <div class="prev-next">
                                    <div id="previous" class="prev-link" accesskey="p" href="./dd-detect-ml-getting-started.html">ML Detect guide</div>
                                    <div id="next" class="next-link" accesskey="n" href="./device-defender-audit.html">Audit</div>
                                 </div>
                              </div>
                              <awsdocs-page-utilities></awsdocs-page-utilities>
                           </div>
                           <div id="quick-feedback-yes" style="display: none;">
                              <div class="title">Did this page help you? - Yes</div>
                              <div class="content">
                                 <p>Thanks for letting us know we're doing a good
                                    job!
                                 </p>
                                 <p>If you've got a moment, please tell us what we did right
                                    so we can do more of it.
                                 </p>
                                 <p>
                                    <awsui-button id="fblink" target="_blank" text="Feedback" click="linkClick($event)" href="https://docs.aws.amazon.com/forms/aws-doc-feedback?hidden_service_name=IoT Docs&amp;topic_url=https://docs.aws.amazon.com/en_us/iot/latest/developerguide/dd-suppressions-example.html"></awsui-button>
                                 </p>
                              </div>
                           </div>
                           <div id="quick-feedback-no" style="display: none;">
                              <div class="title">Did this page help you? - No</div>
                              <div class="content">
                                 <p>Thanks for letting us know this page needs work. We're
                                    sorry we let you down.
                                 </p>
                                 <p>If you've got a moment, please tell us how we can make
                                    the documentation better.
                                 </p>
                                 <p>
                                    <awsui-button id="fblink" target="_blank" text="Feedback" click="linkClick($event)" href="https://docs.aws.amazon.com/forms/aws-doc-feedback?hidden_service_name=IoT Docs&amp;topic_url=https://docs.aws.amazon.com/en_us/iot/latest/developerguide/dd-suppressions-example.html"></awsui-button>
                                 </p>
                              </div>
                           </div>
                        </div>
                     </body>
                  </div>
               </awsdocs-view>
               <div class="page-loading-indicator" id="page-loading-indicator">
                  <awsui-spinner size="large"></awsui-spinner>
               </div>
            </div>
            <div id="tools-panel" dom-region="tools">
               <awsdocs-tools-panel id="awsdocs-tools-panel"></awsdocs-tools-panel>
            </div>
         </awsui-app-layout>
         <awsdocs-cookie-banner class="doc-cookie-banner"></awsdocs-cookie-banner>
         <!--
                SiteCatalyst code version: H.25.2.
                Copyright 1996-2012 Adobe, Inc. All Rights Reserved
                More info available at http://www.omniture.com
            --><script language="JavaScript" type="text/javascript">
var awsdocs = awsdocs || {};
awsdocs.prop66 = 'AWS IoT Core';
awsdocs.prop65 =  'Developer Guide';
            </script><script src="https://a0.awsstatic.com/s_code/js/3.0/awshome_s_code.js" language="JavaScript" type="text/javascript"></script>
         <!--/DO NOT REMOVE/-->
         <!--End SiteCatalyst code version: H.25.2.--></div>
   </body>
</html>