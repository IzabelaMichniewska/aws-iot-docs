<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" ng-app="AWSDocsDocPageApp">
   <head>
      <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
      <title>Getting started with Alexa Voice Service (AVS) Integration for AWS IoT on an NXP device - AWS IoT Core</title>
      <meta name="viewport" content="width=device-width,initial-scale=1" />
      <meta name="assets_root" content="assets" />
      <meta name="target_state" content="avs-integration-aws-iot-gs-nxp" />
      <meta name="default_state" content="avs-integration-aws-iot-gs-nxp" />
      <link rel="icon" type="image/ico" href="/assets/images/favicon.ico" />
      <link rel="shortcut icon" type="image/ico" href="/assets/images/favicon.ico" />
      <link rel="canonical" href="https://docs.aws.amazon.com/iot/latest/developerguide/avs-integration-aws-iot-gs-nxp.html" />
      <meta name="description" content="Get started with Alexa Voice Service (AVS) Integration for AWS IoT on an NXP device." />
      <meta name="deployment_region" content="IAD" />
      <meta name="product" content="AWS IoT Core" />
      <meta name="guide" content="Developer Guide" />
      <meta name="locales" content="de_de:Deutsch/en_us:English/es_es:Español/fr_fr:Français/it_it:Italiano/ja_jp:日本語/ko_kr:한국어/pt_br:Português/zh_cn:中文 (简体)/zh_tw:中文 (繁體)" />
      <meta name="abstract" content="AWS IoT provides secure, bi-directional communication between Internet-connected devices such as sensors, actuators, embedded micro-controllers, or smart appliances and the AWS Cloud. This enables you to collect telemetry data from multiple devices, and store and analyze the data. You can also create applications that enable your users to control these devices from their phones or tablets." />
      <meta name="guide-locale" content="en_us" />
      <meta name="tocs" content="toc-contents.json" />
      <meta name="feedback-item" content="IoT Docs" />
      <meta name="this_doc_product" content="AWS IoT Core" />
      <meta name="this_doc_guide" content="Developer Guide" />
      <link href="assets/css/vendor4.css" rel="stylesheet" />
      <link href="assets/css/awsdocs-common.css" rel="stylesheet" /><script type="text/javascript" src="assets/js/vendor3.js" defer=""></script><script type="text/javascript" src="assets/js/vendor4.js" defer=""></script><script type="text/javascript" src="assets/js/vendor1.js" defer=""></script><script type="text/javascript" src="assets/js/awsdocs-common.js" defer=""></script><script type="text/javascript" src="assets/js/awsdocs-doc-app.js" defer=""></script></head>
   <body class="awsdocs awsui">
      <div class="awsdocs-container">
         <awsdocs-header></awsdocs-header>
         <awsui-app-layout id="app-layout" class="awsui-util-no-gutters" ng-controller="ContentController as $ctrl" header-selector="awsdocs-header" navigation-hide="false" navigation-width="$ctrl.navWidth" navigation-open="$ctrl.navOpen" navigation-change="$ctrl.onNavChange($event)" tools-hide="$ctrl.hideTools" tools-width="$ctrl.toolsWidth" tools-open="$ctrl.toolsOpen" tools-change="$ctrl.onToolsChange($event)">
            <div id="guide-toc" dom-region="navigation">
               <awsdocs-toc></awsdocs-toc>
            </div>
            <div id="main-column" dom-region="content" tabindex="-1">
               <awsdocs-view class="awsdocs-view">
                  <div id="awsdocs-content">
                     <head>
                        <title>Getting started with Alexa Voice Service (AVS) Integration for AWS IoT on an NXP device - AWS IoT Core</title>
                        <meta name="pdf" content="iot-dg.pdf#avs-integration-aws-iot-gs-nxp" />
                        <meta name="kindle" content="https://www.amazon.com/dp/B07JBRCWWZ" />
                        <meta name="github" content="https://github.com/awsdocs/aws-iot-docs/tree/master/developerguide/avs-integration-aws-iot-gs-nxp.md" />
                        <meta name="forums" content="http://forums.aws.amazon.com/forum.jspa?forumID=210" />
                        <meta name="feedback" content="https://docs.aws.amazon.com/forms/aws-doc-feedback?hidden_service_name=IoT%20Docs&amp;topic_url=http://docs.aws.amazon.com/en_us/iot/latest/developerguide/avs-integration-aws-iot-gs-nxp.html" />
                        <meta name="feedback-yes" content="feedbackyes.html?topic_url=http://docs.aws.amazon.com/en_us/iot/latest/developerguide/avs-integration-aws-iot-gs-nxp.html" />
                        <meta name="feedback-no" content="feedbackno.html?topic_url=http://docs.aws.amazon.com/en_us/iot/latest/developerguide/avs-integration-aws-iot-gs-nxp.html" />
                        <meta name="keywords" content="AWS IoT,IoT,Internet of Things" />
                     </head>
                     <body>
                        <div id="main">
                           <div style="display: none"><a href="iot-dg.pdf#avs-integration-aws-iot-gs-nxp" target="_blank" rel="noopener noreferrer" title="Open PDF"></a><a target="_blank" rel="noopener noreferrer" href="https://www.amazon.com/dp/B07JBRCWWZ" title="Open Kindle"></a><a href="https://github.com/awsdocs/aws-iot-docs/tree/master/developerguide/avs-integration-aws-iot-gs-nxp.md" target="_blank" rel="noopener noreferrer" title="Edit this page on GitHub"></a></div>
                           <div id="breadcrumbs" class="breadcrumb"><a href="http://aws.amazon.com">AWS</a><a href="/index.html">Documentation</a><a href="/iot/index.html">AWS IoT Core</a><a href="what-is-aws-iot.html">Developer Guide</a></div>
                           <div id="page-toc-src"><a href="#iot-mqtt-alexa-gs-nxp-preview">Preview Alexa Voice Service (AVS) Integration for AWS IoT with a
                                 preconfigured NXP account</a><a href="#iot-mqtt-alexa-gs-nxp-configure">Use your AWS and Alexa Voice Service developer
                                 accounts to
                                 set
                                 up
                                 AVS for AWS IoT</a></div>
                           <div id="main-content" class="awsui-util-container">
                              <div id="main-col-body">
                                 <awsdocs-language-banner data-service="$ctrl.pageService"></awsdocs-language-banner>
                                 <h1 class="topictitle" id="avs-integration-aws-iot-gs-nxp">Getting started with Alexa Voice Service (AVS) Integration for AWS IoT on an NXP
                                    device
                                 </h1>
                                 <div class="awsdocs-page-header-container">
                                    <awsdocs-page-header></awsdocs-page-header>
                                    <awsdocs-filter-selector id="awsdocs-filter-selector"></awsdocs-filter-selector>
                                 </div>
                                 <p> The NXP i.MX 106A development kit enables you to preview Alexa Voice Service (AVS)
                                    Integration for AWS IoT using a
                                    preconfigured NXP account. After you preview the functionality with the NXP account,
                                    you
                                    need to customize the firmware, application source code, and the NXP mobile application
                                    provided with the kit to use your own account. This topic walks you through the steps
                                    to
                                    preview with the preconfigured account and to customize your device with your own
                                    account. 
                                 </p>
                                 <div class="highlights" id="inline-topiclist">
                                    <p><strong>Topics</strong></p>
                                    <ul>
                                       <li><a href="#iot-mqtt-alexa-gs-nxp-preview">Preview Alexa Voice Service (AVS) Integration for AWS IoT with a
                                             preconfigured NXP account</a></li>
                                       <li><a href="#iot-mqtt-alexa-gs-nxp-configure">Use your AWS and Alexa Voice Service developer
                                             accounts to
                                             set
                                             up
                                             AVS for AWS IoT</a></li>
                                    </ul>
                                 </div>
                                 
                                 <h2 id="iot-mqtt-alexa-gs-nxp-preview">Preview Alexa Voice Service (AVS) Integration for AWS IoT with a
                                    preconfigured NXP account
                                 </h2>
                                  
                                 
                                 <h3 id="iot-mqtt-alexa-gs-nxp-preview-prereqs">Prerequisites</h3>
                                 
                                 <p>To follow these steps, you need the following resources.</p>
                                 
                                 <div class="itemizedlist">
                                     
                                     
                                     
                                     
                                     
                                     
                                    
                                    <ul class="itemizedlist" type="disc">
                                       <li class="listitem">
                                          
                                          <p><a href="https://www.nxp.com/design/designs/mcu-based-solution-for-br-alexa-voice-service:MCU-VOICE-CONTROL-AVS" rel="noopener noreferrer" target="_blank"><span>NXP i.MX 106A development kit</span><awsui-icon class="awsdocs-link-icon" name="external"></awsui-icon></a></p>
                                          
                                       </li>
                                       <li class="listitem">
                                          
                                          <p>A Mac, Windows 7/10, or Linux computer</p>
                                          
                                       </li>
                                       <li class="listitem">
                                          
                                          <p>A serial driver that works with your computer</p>
                                          
                                       </li>
                                       <li class="listitem">
                                          
                                          <p>An Android or iOS mobile device</p>
                                          
                                       </li>
                                       <li class="listitem">
                                          
                                          <p>Android Debug Bridge (ADB)</p>
                                          
                                       </li>
                                       <li class="listitem">
                                          
                                          <p>An <a href="https://alexa.amazon.com" rel="noopener noreferrer" target="_blank"><span>Amazon Alexa
                                                   account</span><awsui-icon class="awsdocs-link-icon" name="external"></awsui-icon></a></p>
                                          
                                       </li>
                                    </ul>
                                 </div>
                                  
                                  
                                 
                                 <h3 id="iot-mqtt-alexa-gs-nxp-preview-devkit">Install and boot the development kit</h3>
                                 
                                 <div class="procedure">
                                    <ol>
                                       <li>
                                          
                                          <p>Activate the device kit. The kit comes with a Get Started
                                             Onboarding card. This card contains instructions to activate
                                             the kit and acquire the necessary software package and the reference design
                                             files. The software package contains the SDK source code and the companion
                                             Android application (<code>VoiceCompanionApp.apk</code>). If you're
                                             using an iOS device, you must request access to the TestFlight iOS
                                             application from your local NXP representative.
                                          </p>
                                          
                                          <p>After you download and extract the software package, you see the following
                                             file structure.
                                          </p>
                                          
                                          <div class="mediaobject">
                                              
                                              
                                             <img src="images/iot-nxp-software-package.png" class="aws-docs-img-whiteBg aws-docs-img-padding" alt="&#xA;                            The software package contains folders named Amazon,&#xA;                                DefaultBinaries, Drivers, MobileApplication, SDK, and Tools. It also&#xA;                                contains the developer guide, the migration guide, and the user&#xA;                                guide.&#xA;                        " style="max-width:100%" />
                                              
                                             
                                          </div>
                                          
                                          <p> The <code>MobileApplication</code> folder contains the Android
                                             mobile application.
                                          </p>
                                          
                                          <p>The <code>Tools</code> folder contains scripts that you use to
                                             configure your device.
                                          </p>
                                          
                                          <div class="itemizedlist">
                                             
                                             <p>You can also find the following documentation:</p>
                                              
                                              
                                              
                                             
                                             <ul class="itemizedlist" type="disc">
                                                <li class="listitem">
                                                   
                                                   <p><code>SLN-ALEXA-IOT-DG.pdf</code> in the
                                                      <em>NXP Developer Guide</em></p>
                                                   
                                                </li>
                                                <li class="listitem">
                                                   
                                                   <p><code>SLN-ALEXA-IOT-MG.pdf</code>
                                                      in
                                                      the
                                                      <em>NXP Migration Guide</em></p>
                                                   
                                                </li>
                                                <li class="listitem">
                                                   
                                                   <p><code>SLN-ALEXA-IOT-UG.pdf</code>
                                                      in
                                                      the
                                                      <em>NXP User Guide</em></p>
                                                   
                                                </li>
                                             </ul>
                                          </div>
                                          
                                       </li>
                                       <li>
                                          
                                          <p>Boot the device kit. The USB splitter cable that comes with the kit has
                                             power and data connections. 
                                          </p>
                                          
                                          <ol>
                                             <li>
                                                
                                                <p>Connect both of the USB-A connections to your computer. </p>
                                                
                                             </li>
                                             <li>
                                                
                                                <p>Connect the USB-C connector to your kit. Your configuration might
                                                   look the following image.
                                                </p>
                                                
                                                <div class="mediaobject">
                                                    
                                                    
                                                   <img src="images/iot-nxp-device-kit.png" class="aws-docs-img-whiteBg aws-docs-img-padding" alt="&#xA;                                    Plug the two USB-A connections into your computer. Plug&#xA;                                        the single USB-A connection to your device kit.&#xA;                                " style="max-width:100%" />
                                                    
                                                   
                                                </div>
                                                
                                             </li>
                                          </ol>
                                          
                                          <p>When the board has power, the D1 LED lights up and displays green. The D2
                                             LED (closest to the speaker) indicates the state of the device. When the
                                             device turns on, this LED flashes multiple colors. When the device runs the
                                             application code, the D2 LED blinks yellow. When initialization of the
                                             device is complete, the D2 LED displays orange to indicate that it's waiting
                                             for Wi-Fi credentials to be added to the device.
                                          </p>
                                          
                                          <p>The NXP User Guide contains a
                                             description of the device's physical controls.
                                          </p>
                                          
                                          <div class="mediaobject">
                                              
                                              
                                             <img src="images/iot-nxp-device-kit-powered.png" class="aws-docs-img-whiteBg aws-docs-img-padding" alt="&#xA;                            The D2 LED displays orange to indicate that it's waiting for&#xA;                                Wi-Fi credentials.&#xA;                        " style="max-width:100%" />
                                              
                                             
                                          </div>
                                          
                                       </li>
                                       <li>
                                          
                                          <p>Use the terminal application to understand how the client application on
                                             the device works. You can also use it to debug and make sure that the device
                                             is in the correct state. 
                                          </p>
                                          
                                          <p>Enter the following commands to get started with the application:</p>
                                          
                                          <div class="itemizedlist">
                                              
                                              
                                              
                                             
                                             <ul class="itemizedlist" type="disc">
                                                <li class="listitem">
                                                   
                                                   <p><code class="code">help</code> – Displays a list of the available
                                                      commands.
                                                   </p>
                                                   
                                                </li>
                                                <li class="listitem">
                                                   
                                                   <p><code class="code">enable_usb_log</code> – Enables logging on the
                                                      device. This helps you understand what the application is
                                                      doing.
                                                   </p>
                                                   
                                                </li>
                                                <li class="listitem">
                                                   
                                                   <p><code class="code">logs</code> – Displays the last few lines of the
                                                      logs. At this point, the logs should indicate that the device is
                                                      waiting for Wi-Fi credentials.
                                                   </p>
                                                   
                                                </li>
                                             </ul>
                                          </div>
                                          
                                       </li>
                                    </ol>
                                 </div>
                                  
                                     
                                 
                                 <h3 id="iot-mqtt-alexa-gs-nxp-preview-connect">Connect the device to AWS IoT and Amazon Alexa</h3>
                                 
                                 <div class="procedure">
                                    <ol>
                                       <li>
                                          
                                          <p>Install the appropriate mobile application. If you're using an Android
                                             device, you can use ADB in the terminal to install the
                                             <code>VoiceCompanionApp.apk</code> file. If you're using an iOS
                                             device, use the TestFlight application.
                                          </p>
                                          
                                       </li>
                                       <li>
                                          
                                          <p>Provision the Wi-Fi credentials. You can provision the Wi-Fi credentials
                                             by using either the companion mobile application or the terminal.
                                          </p>
                                          
                                          <ol>
                                             <li>
                                                
                                                <p>Follow these steps to provision the Wi-Fi credentials by using the
                                                   mobile application.
                                                </p>
                                                
                                                <ol>
                                                   <li>
                                                      
                                                      <p>When the device boots up from its factory new state, it
                                                         creates a Wi-Fi access point. Open the companion mobile
                                                         application, and choose <b>WIFI PROVISION</b>
                                                         to connect to this access point.
                                                      </p>
                                                      
                                                   </li>
                                                   <li>
                                                      
                                                      <p>Choose a network from the
                                                         list. 
                                                      </p>
                                                      
                                                   </li>
                                                   <li>
                                                      
                                                      <p>Enter your password, and choose <b>Send</b>
                                                         to transmit the credentials to the device kit.
                                                      </p>
                                                      
                                                   </li>
                                                </ol>
                                                
                                             </li>
                                             <li>
                                                
                                                <p>In the terminal application, enter the following command.</p>
                                                <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class="nohighlight">setup <code class="replaceable">YourWiFiNetworkName</code> <code class="replaceable">YourWiFiNetworkPassword</code></code></pre>
                                                </li>
                                             <li>
                                                
                                                <p>Choose <b>Enter</b>.
                                                </p>
                                                
                                             </li>
                                          </ol>
                                          
                                       </li>
                                       <li>
                                          
                                          <p>Authenticate the device kit and connect to AWS IoT and Amazon Alexa. Make
                                             sure that your mobile device and the device kit are using the same Wi-Fi
                                             network so that the two devices can communicate. 
                                          </p>
                                          
                                          <p>To do so, press the <b>Discover</b> button in the mobile application. When
                                             discovery is
                                             complete,
                                             you see a list of serial numbers for the available device kits near you. If more than
                                             one is
                                             available, you can confirm your kit's unique serial number by entering
                                             <code class="userinput">serial_number</code> in the terminal application.
                                          </p>
                                          
                                       </li>
                                       <li>
                                          
                                          <p>Choose the device kit that to use. The mobile application uses the Login
                                             with Amazon service to prompt you for your Amazon user credentials. The
                                             device kit begins to register the device with AVS. The D2 LED displays
                                             purple to indicate that device registration has started.
                                          </p>
                                          
                                          <div class="awsdocs-note">
                                             <div class="awsdocs-note-title">
                                                <awsui-icon name="status-info" variant="link"></awsui-icon><span>Note</span></div>
                                             <div class="awsdocs-note-text">
                                                <p>If your mobile device already has the Amazon shopping application
                                                   installed, the mobile companion application automatically uses the
                                                   Amazon account that is logged into the shopping application.
                                                </p>
                                             </div>
                                          </div>
                                          
                                       </li>
                                    </ol>
                                 </div>
                                  
                                 
                                 <p>After you
                                    sign
                                    in to your Amazon account, the companion application performs the following steps:
                                 </p>
                                 
                                 <div class="orderedlist">
                                     
                                     
                                     
                                     
                                    
                                    <ol>
                                       <li>
                                          
                                          <p>The device kit receives the access token from the Login with Amazon
                                             service and begins to connect the device to AWS IoT and AVS. The mobile
                                             application displays a completion percentage. The D2 LED on the device
                                             displays orange.
                                          </p>
                                          
                                       </li>
                                       <li>
                                          
                                          <p>The D1 LED blinks green every 500 milliseconds until the device connects
                                             to AWS IoT.
                                          </p>
                                          
                                       </li>
                                       <li>
                                          
                                          <p>When the device connects to AWS IoT, the device kit begins to connect the
                                             device to AVS. The D1 LED blinks green every 250 milliseconds.
                                          </p>
                                          
                                       </li>
                                       <li>
                                          
                                          <p>When the device connects to AVS, the color of the device kit's serial
                                             number changes to yellow in the mobile application. The mobile application
                                             displays a <b>Complete</b> message. The D1 LED turns off, and
                                             the device plays a chime. The device is now connected to NXP's AWS IoT
                                             account.
                                          </p>
                                          
                                       </li>
                                    </ol>
                                 </div>
                                 
                                 <p>You can try a few Alexa Voice commands, such as the following examples:</p>
                                 
                                 <div class="itemizedlist">
                                     
                                     
                                     
                                    
                                    <ul class="itemizedlist" type="disc">
                                       <li class="listitem">
                                          
                                          <p>"Alexa, what's the weather like?"</p>
                                          
                                       </li>
                                       <li class="listitem">
                                          
                                          <p>"Alexa, play a news briefing."</p>
                                          
                                       </li>
                                       <li class="listitem">
                                          
                                          <p>"Alexa, play music."</p>
                                          
                                       </li>
                                    </ul>
                                 </div>
                                  
                                 
                                 <h2 id="iot-mqtt-alexa-gs-nxp-configure">Use your AWS and Alexa Voice Service developer
                                    accounts to
                                    set
                                    up
                                    AVS for AWS IoT
                                 </h2>
                                  
                                 
                                 <h3 id="iot-mqtt-alexa-gs-nxp-configure-prereqs">Prerequisites</h3>
                                 
                                 <p>For this procedure, you need the following resources.</p>
                                 
                                 <div class="itemizedlist">
                                     
                                     
                                     
                                     
                                     
                                     
                                     
                                     
                                     
                                    
                                    <ul class="itemizedlist" type="disc">
                                       <li class="listitem">
                                          <p><a href="https://www.nxp.com/design/designs/mcu-based-solution-for-br-alexa-voice-service:MCU-VOICE-CONTROL-AVS" rel="noopener noreferrer" target="_blank"><span>NXP i.MX 106A development kit</span><awsui-icon class="awsdocs-link-icon" name="external"></awsui-icon></a></p>
                                       </li>
                                       <li class="listitem">
                                          <p>MCUXPresso v10.3.1</p>
                                       </li>
                                       <li class="listitem">
                                          <p>Segger J-Link debug probe</p>
                                       </li>
                                       <li class="listitem">
                                          <p>A Mac computer</p>
                                       </li>
                                       <li class="listitem">
                                          <p>An Android mobile device</p>
                                       </li>
                                       <li class="listitem">
                                          <p>Android Studio</p>
                                       </li>
                                       <li class="listitem">
                                          <p>Android Debug Bridge</p>
                                       </li>
                                       <li class="listitem">
                                          <p>An <a href="https://alexa.amazon.com" rel="noopener noreferrer" target="_blank"><span>Amazon Alexa account</span><awsui-icon class="awsdocs-link-icon" name="external"></awsui-icon></a></p>
                                       </li>
                                       <li class="listitem">
                                          <p>An <a href="http://aws.amazon.com" rel="noopener noreferrer" target="_blank"><span>AWS account</span><awsui-icon class="awsdocs-link-icon" name="external"></awsui-icon></a></p>
                                       </li>
                                    </ul>
                                 </div>
                                  
                                  
                                 
                                 <h3 id="iot-mqtt-alexa-gs-nxp-configure-account">Configure your AWS IoT account and provision your device</h3>
                                 
                                 <div class="procedure">
                                    <ol>
                                       <li>
                                          
                                          <p>Generate credentials to authenticate with AWS IoT. All devices must have a
                                             device certificate, private key, and root CA certificate installed in their
                                             firmware to communicate with AWS IoT. Follow the instructions in <a href="register-device.html" rel="noopener noreferrer" target="_blank">Register a Device in the Registry</a> to
                                             register your device with AWS IoT. For more information about X.509
                                             certificates, see <a href="./x509-client-certs.html">X.509 client certificates</a>.
                                          </p>
                                          
                                       </li>
                                       <li>
                                          
                                          <p>Navigate
                                             to the root folder
                                             and
                                             open the NXP Developer Guide. Follow the instructions in
                                             "Section
                                             9
                                             (Filesystem)"
                                             to convert your client certificates and keys to a binary format that the NXP filesystem
                                             can
                                             read. 
                                          </p>
                                          
                                          <p>Use the following script and commands to convert the certificates and
                                             keys. The <code class="code">bin_dump.py</code> script is in the
                                             <code>Tools\Ivaldi.zip\Scripts\sln_alexa_iot_utils</code>
                                             folder.
                                          </p>
                                          <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class="nohighlight"><code class="userinput">python3 bin_dump.py <code class="replaceable">CertificateName</code>-certificate.pem.crt <code class="replaceable">CertificateName</code>-certificate.pem.crt.bin</code></code></pre>
                                          <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class="nohighlight"><code class="userinput">python3 bin_dump.py <code class="replaceable">CertificateName</code>-private.pem.key <code class="replaceable">CertificateName</code>-private.pem.key.bin</code></code></pre>
                                          </li>
                                    </ol>
                                 </div>
                                 
                                 <p>For information about options for generating credentials for production devices at
                                    scale, see
                                    <a href="./iot-provision.html">Device provisioning</a>.
                                 </p>
                                 
                                 
                                 <div class="procedure">
                                    <p class="title"><b>To
                                          set
                                          up
                                          your
                                          device
                                          in the Alexa Voice Service developer
                                          console </b></p>
                                    <ol>
                                       <li>
                                          
                                          <p>Navigate
                                             to the root folder and open the NXP Migration Guide.
                                          </p>
                                          
                                       </li>
                                       <li>
                                          
                                          <p>To get the MD5 and SHA256 signatures that you need to create an AVS API key, follow
                                             the
                                             instructions in
                                             "Section
                                             2. Creating a Keystore for Android AVS Companion
                                             Application"
                                             in the <em>NXP Migration Guide</em>. (This includes navigating to the <a href="https://developer.amazon.com/alexa/console/avs/home?" rel="noopener noreferrer" target="_blank"><span>Alexa Voice Service Developer
                                                   Console</span><awsui-icon class="awsdocs-link-icon" name="external"></awsui-icon></a>.)
                                          </p>
                                          
                                       </li>
                                       <li>
                                          
                                          <p>To create a <a href="https://developer.amazon.com/apps-and-games/login-with-amazon" rel="noopener noreferrer" target="_blank"><span>Login
                                                   with Amazon</span><awsui-icon class="awsdocs-link-icon" name="external"></awsui-icon></a> security profile and create an AVS product, follow the instructions in
                                             "Section
                                             3" in
                                             the <em>NXP Migration Guide</em>.
                                          </p>
                                          
                                       </li>
                                    </ol>
                                 </div>
                                 
                                 
                                 <div class="procedure">
                                    <p class="title"><b>To
                                          rebuild
                                          the Android
                                          mobile
                                          app</b></p>
                                    <ol>
                                       <li>
                                          <p>Open the VoiceCompanionApp project in Android Studio. The
                                             <code>VoiceCompanionApp.apk</code> file is included in the NXP
                                             software package.
                                          </p>
                                       </li>
                                       <li>
                                          <p>In Android Studio, add the API key that you generated in the previous procedure to
                                             the
                                             <code>api_key.txt</code> file in the <b>assets</b>
                                             folder. This synchronizes the companion mobile application with your AVS
                                             security profile. The application uses the API key when you log in by using
                                             the Login with Amazon service. When the application gets an authorization
                                             code from Amazon, it transfers the code to the device firmware. The device
                                             then obtains access and refresh tokens from the Login with Amazon service to
                                             make calls to AVS.
                                          </p>
                                       </li>
                                       <li>
                                          <p>In Android Studio, choose <b>Build Project</b> and <b>Generate a Signed
                                                Bundle/APK</b>. For more information, see
                                             "Section
                                             4. Building and Generating the Mobile
                                             Application"
                                             in the <em>NXP Migration Guide</em>. For more information about authorizing with
                                             Alexa in this way, see <a href="https://developer.amazon.com/docs/alexa-voice-service/authorize-companion-app.html" rel="noopener noreferrer" target="_blank"><span>Authorize from a Companion App (Android/iOS)</span><awsui-icon class="awsdocs-link-icon" name="external"></awsui-icon></a>.
                                          </p>
                                       </li>
                                       <li>
                                          <p>Install the updated mobile application to your mobile device. Set up ADB on your Mac
                                             computer
                                             and install the updated Android APK file to your mobile phone by using the
                                             terminal console. If you installed the mobile application to preview the
                                             AVS for AWS IoT service with the preconfigured NXP account, you must
                                             uninstall and then reinstall the application.
                                          </p>
                                       </li>
                                    </ol>
                                 </div>
                                 
                                 
                                 <div class="procedure">
                                    <p class="title"><b>To
                                          update
                                          the
                                          client
                                          application
                                          with
                                          your
                                          AWS
                                          credentials</b></p>
                                    <ol>
                                       <li>
                                          <p>Follow the instructions in Section 3 and Section 4
                                             in the <em>NXP Developer Guide</em> to make the required Segger
                                             J-Link driver modifications. These instructions also explain how to import
                                             the <code>Bootloader</code>, <code>ais_demo</code>, and
                                             <code>bootstrap</code> projects by using the MCUXPresso
                                             IDE.
                                          </p>
                                       </li>
                                       <li>
                                          <p>Follow the instructions for updating the source code and rebuilding the application
                                             in
                                             "Section
                                             7. RT106A Firmware
                                             Changes"
                                             in the <em>NXP Migration Guide</em>. We recommend that you use MCUXPresso
                                             v10.3.1.
                                          </p>
                                          
                                          <p>These source code changes enable the device firmware to communicate with your AWS
                                             account and your AVS product instead of the default NXP account.
                                          </p>
                                       </li>
                                    </ol>
                                 </div>
                                 
                                 
                                 <div class="procedure">
                                    <p class="title"><b>To
                                          set
                                          up
                                          and
                                          connect
                                          your
                                          device
                                          to AWS IoT and Amazon Alexa</b></p>
                                    <ol>
                                       <li>
                                          <p>Reset the device to factory defaults. If you previewed the AVS for AWS IoT service
                                             with the
                                             preconfigured NXP account, you must reset the device firmware before you log
                                             in again with the companion mobile application. This ensures that the mobile
                                             application and the device use your security profile. Make sure that the
                                             device is connected to your computer. Push <b>SW1</b> for 10
                                             seconds to initiate the factory reset.
                                          </p>
                                          
                                          <p>The <em>NXP User Guide</em> that is included in the NXP software
                                             package contains a description of the device's physical controls.
                                          </p>
                                       </li>
                                       <li>
                                          <p>Reprogram the firmware to use the certificate and key that you generated for your
                                             device. Add
                                             the key and certificate to the updated <code>Bootstrap</code> and
                                             <code>Ais_demo</code> binaries that you created in the previous
                                             procedure. We also recommend reprogramming the firmware with the default
                                             <code>Intelligent toolbox</code>, <code>app_crt</code>
                                             and <code>CA_crt</code> binaries.
                                          </p>
                                          
                                          <p>For
                                             instructions,
                                             see
                                             "Section
                                             5. Building and
                                             Programming"
                                             in the <em>NXP Developer Guide</em>.
                                          </p>
                                       </li>
                                       <li>
                                          
                                          <p>Follow the instructions in the previous <a href="#iot-mqtt-alexa-gs-nxp-preview-connect">Connect the Device to
                                                AWS and Amazon Alexa</a> procedure. This connects you to
                                             AVS for AWS IoT with your own security profile and credentials.
                                          </p>
                                          
                                       </li>
                                    </ol>
                                 </div>
                                 
                                 
                                 
                                 <awsdocs-copyright class="copyright-print"></awsdocs-copyright>
                                 <awsdocs-thumb-feedback right-edge="{{$ctrl.thumbFeedbackRightEdge}}"></awsdocs-thumb-feedback>
                              </div>
                              <noscript>
                                 <div>
                                    <div>
                                       <div>
                                          <div id="js_error_message">
                                             <p><img src="https://d1ge0kk1l5kms0.cloudfront.net/images/G/01/webservices/console/warning.png" alt="Warning" /> <strong>Javascript is disabled or is unavailable in your
                                                   browser.</strong></p>
                                             <p>To use the Amazon Web Services Documentation, Javascript must be
                                                enabled. Please refer to your browser's Help pages for instructions.
                                             </p>
                                          </div>
                                       </div>
                                    </div>
                                 </div>
                              </noscript>
                              <div id="main-col-footer" class="awsui-util-font-size-0">
                                 <div id="doc-conventions"><a target="_top" href="/general/latest/gr/docconventions.html">Document Conventions</a></div>
                                 <div class="prev-next">
                                    <div id="previous" class="prev-link" accesskey="p" href="./avs-integration-aws-iot.html">Alexa Voice Service (AVS) Integration for AWS IoT</div>
                                    <div id="next" class="next-link" accesskey="n" href="./iot-sdks.html">AWS IoT Device SDKs, Mobile SDKs, and AWS IoT Device Client</div>
                                 </div>
                              </div>
                              <awsdocs-page-utilities></awsdocs-page-utilities>
                           </div>
                           <div id="quick-feedback-yes" style="display: none;">
                              <div class="title">Did this page help you? - Yes</div>
                              <div class="content">
                                 <p>Thanks for letting us know we're doing a good
                                    job!
                                 </p>
                                 <p>If you've got a moment, please tell us what we did right
                                    so we can do more of it.
                                 </p>
                                 <p>
                                    <awsui-button id="fblink" target="_blank" text="Feedback" click="linkClick($event)" href="https://docs.aws.amazon.com/forms/aws-doc-feedback?hidden_service_name=IoT Docs&amp;topic_url=https://docs.aws.amazon.com/en_us/iot/latest/developerguide/avs-integration-aws-iot-gs-nxp.html"></awsui-button>
                                 </p>
                              </div>
                           </div>
                           <div id="quick-feedback-no" style="display: none;">
                              <div class="title">Did this page help you? - No</div>
                              <div class="content">
                                 <p>Thanks for letting us know this page needs work. We're
                                    sorry we let you down.
                                 </p>
                                 <p>If you've got a moment, please tell us how we can make
                                    the documentation better.
                                 </p>
                                 <p>
                                    <awsui-button id="fblink" target="_blank" text="Feedback" click="linkClick($event)" href="https://docs.aws.amazon.com/forms/aws-doc-feedback?hidden_service_name=IoT Docs&amp;topic_url=https://docs.aws.amazon.com/en_us/iot/latest/developerguide/avs-integration-aws-iot-gs-nxp.html"></awsui-button>
                                 </p>
                              </div>
                           </div>
                        </div>
                     </body>
                  </div>
               </awsdocs-view>
               <div class="page-loading-indicator" id="page-loading-indicator">
                  <awsui-spinner size="large"></awsui-spinner>
               </div>
            </div>
            <div id="tools-panel" dom-region="tools">
               <awsdocs-tools-panel id="awsdocs-tools-panel"></awsdocs-tools-panel>
            </div>
         </awsui-app-layout>
         <awsdocs-cookie-banner class="doc-cookie-banner"></awsdocs-cookie-banner>
         <!--
                SiteCatalyst code version: H.25.2.
                Copyright 1996-2012 Adobe, Inc. All Rights Reserved
                More info available at http://www.omniture.com
            --><script language="JavaScript" type="text/javascript">
var awsdocs = awsdocs || {};
awsdocs.prop66 = 'AWS IoT Core';
awsdocs.prop65 =  'Developer Guide';
            </script><script src="https://a0.awsstatic.com/s_code/js/3.0/awshome_s_code.js" language="JavaScript" type="text/javascript"></script>
         <!--/DO NOT REMOVE/-->
         <!--End SiteCatalyst code version: H.25.2.--></div>
   </body>
</html>