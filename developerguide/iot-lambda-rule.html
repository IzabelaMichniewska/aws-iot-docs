<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" ng-app="AWSDocsDocPageApp">
   <head>
      <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
      <title>Format a notification by using an AWS Lambda function - AWS IoT Core</title>
      <meta name="viewport" content="width=device-width,initial-scale=1" />
      <meta name="assets_root" content="assets" />
      <meta name="target_state" content="iot-lambda-rule" />
      <meta name="default_state" content="iot-lambda-rule" />
      <link rel="icon" type="image/ico" href="/assets/images/favicon.ico" />
      <link rel="shortcut icon" type="image/ico" href="/assets/images/favicon.ico" />
      <link rel="canonical" href="https://docs.aws.amazon.com/iot/latest/developerguide/iot-lambda-rule.html" />
      <meta name="description" content="This tutorial demonstrates how to send MQTT message data to an AWS Lambda action for formatting and sending to another AWS service. In this tutorial, the AWS Lambda action uses the AWS SDK to send the formatted message to the Amazon SNS topic you created in the tutorial about how to" />
      <meta name="deployment_region" content="IAD" />
      <meta name="product" content="AWS IoT Core" />
      <meta name="guide" content="Developer Guide" />
      <meta name="locales" content="de_de:Deutsch/en_us:English/es_es:Español/fr_fr:Français/it_it:Italiano/ja_jp:日本語/ko_kr:한국어/pt_br:Português/zh_cn:中文 (简体)/zh_tw:中文 (繁體)" />
      <meta name="abstract" content="AWS IoT provides secure, bi-directional communication between Internet-connected devices such as sensors, actuators, embedded micro-controllers, or smart appliances and the AWS Cloud. This enables you to collect telemetry data from multiple devices, and store and analyze the data. You can also create applications that enable your users to control these devices from their phones or tablets." />
      <meta name="guide-locale" content="en_us" />
      <meta name="tocs" content="toc-contents.json" />
      <meta name="feedback-item" content="IoT Docs" />
      <meta name="this_doc_product" content="AWS IoT Core" />
      <meta name="this_doc_guide" content="Developer Guide" />
      <link href="assets/css/vendor4.css" rel="stylesheet" />
      <link href="assets/css/awsdocs-common.css" rel="stylesheet" /><script type="text/javascript" src="assets/js/vendor3.js" defer=""></script><script type="text/javascript" src="assets/js/vendor4.js" defer=""></script><script type="text/javascript" src="assets/js/vendor1.js" defer=""></script><script type="text/javascript" src="assets/js/awsdocs-common.js" defer=""></script><script type="text/javascript" src="assets/js/awsdocs-doc-app.js" defer=""></script></head>
   <body class="awsdocs awsui">
      <div class="awsdocs-container">
         <awsdocs-header></awsdocs-header>
         <awsui-app-layout id="app-layout" class="awsui-util-no-gutters" ng-controller="ContentController as $ctrl" header-selector="awsdocs-header" navigation-hide="false" navigation-width="$ctrl.navWidth" navigation-open="$ctrl.navOpen" navigation-change="$ctrl.onNavChange($event)" tools-hide="$ctrl.hideTools" tools-width="$ctrl.toolsWidth" tools-open="$ctrl.toolsOpen" tools-change="$ctrl.onToolsChange($event)">
            <div id="guide-toc" dom-region="navigation">
               <awsdocs-toc></awsdocs-toc>
            </div>
            <div id="main-column" dom-region="content" tabindex="-1">
               <awsdocs-view class="awsdocs-view">
                  <div id="awsdocs-content">
                     <head>
                        <title>Format a notification by using an AWS Lambda function - AWS IoT Core</title>
                        <meta name="pdf" content="iot-dg.pdf#iot-lambda-rule" />
                        <meta name="kindle" content="https://www.amazon.com/dp/B07JBRCWWZ" />
                        <meta name="github" content="https://github.com/awsdocs/aws-iot-docs/tree/master/developerguide/iot-lambda-rule.md" />
                        <meta name="forums" content="http://forums.aws.amazon.com/forum.jspa?forumID=210" />
                        <meta name="feedback" content="https://docs.aws.amazon.com/forms/aws-doc-feedback?hidden_service_name=IoT%20Docs&amp;topic_url=http://docs.aws.amazon.com/en_us/iot/latest/developerguide/iot-lambda-rule.html" />
                        <meta name="feedback-yes" content="feedbackyes.html?topic_url=http://docs.aws.amazon.com/en_us/iot/latest/developerguide/iot-lambda-rule.html" />
                        <meta name="feedback-no" content="feedbackno.html?topic_url=http://docs.aws.amazon.com/en_us/iot/latest/developerguide/iot-lambda-rule.html" />
                        <meta name="keywords" content="AWS IoT,IoT,Internet of Things" />
                     </head>
                     <body>
                        <div id="main">
                           <div style="display: none"><a href="iot-dg.pdf#iot-lambda-rule" target="_blank" rel="noopener noreferrer" title="Open PDF"></a><a target="_blank" rel="noopener noreferrer" href="https://www.amazon.com/dp/B07JBRCWWZ" title="Open Kindle"></a><a href="https://github.com/awsdocs/aws-iot-docs/tree/master/developerguide/iot-lambda-rule.md" target="_blank" rel="noopener noreferrer" title="Edit this page on GitHub"></a></div>
                           <div id="breadcrumbs" class="breadcrumb"><a href="http://aws.amazon.com">AWS</a><a href="/index.html">Documentation</a><a href="/iot/index.html">AWS IoT Core</a><a href="what-is-aws-iot.html">Developer Guide</a></div>
                           <div id="page-toc-src"><a href="#iot-lambda-rule-create-lambda">Create an AWS Lambda function that sends a
                                 text message</a><a href="#iot-lambda-rule-create-rule">Create an AWS IoT rule with an AWS Lambda rule
                                 action</a><a href="#iot-lambda-rule-test-rule">Test the AWS IoT rule and AWS Lambda rule
                                 action</a><a href="#iot-lambda-rule-next-steps">Review the results and next steps</a></div>
                           <div id="main-content" class="awsui-util-container">
                              <div id="main-col-body">
                                 <awsdocs-language-banner data-service="$ctrl.pageService"></awsdocs-language-banner>
                                 <h1 class="topictitle" id="iot-lambda-rule">Format a notification by using an AWS Lambda function</h1>
                                 <div class="awsdocs-page-header-container">
                                    <awsdocs-page-header></awsdocs-page-header>
                                    <awsdocs-filter-selector id="awsdocs-filter-selector"></awsdocs-filter-selector>
                                 </div>
                                 <p>This tutorial demonstrates how to send MQTT message data to an AWS Lambda action for
                                    formatting and sending to another AWS service. In this tutorial, the AWS Lambda action
                                    uses the
                                    AWS SDK to send the formatted message to the Amazon SNS topic you created in the tutorial
                                    about how
                                    to <a href="./iot-sns-rule.html">Send an Amazon SNS notification</a>.
                                 </p>
                                 <p>In the tutorial about how to <a href="./iot-sns-rule.html">Send an Amazon SNS notification</a>, the JSON document that
                                    resulted from the rule's query statement was sent as the body of the text message.
                                    The result
                                    was a text message that looked something like this example:
                                 </p><pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class="json "><span>{</span>"device_id":"32","reported_temperature":38,"max_temperature":30}</code></pre><p>In this tutorial, you'll use an AWS Lambda rule action to call an AWS Lambda function
                                    that
                                    formats the data from the rule query statement into a friendlier format, such as this
                                    example:
                                 </p><pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class="">Device 32 reports a temperature of 38, which exceeds the limit of 30.</code></pre><p>The AWS Lambda function you'll create in this tutorial formats the message string
                                    by using
                                    the data from the rule query statement and calls the <a href="https://boto3.amazonaws.com/v1/documentation/api/latest/reference/services/sns.html#SNS.Client.publish" rel="noopener noreferrer" target="_blank"><span>SNS publish</span><awsui-icon class="awsdocs-link-icon" name="external"></awsui-icon></a> function of the AWS SDK to create the notification.
                                 </p>
                                 <div class="itemizedlist">
                                    
                                    <p class="title"><b>What you'll learn in this tutorial</b></p>
                                     
                                     
                                     
                                     
                                    
                                    <ul class="itemizedlist" type="disc">
                                       <li class="listitem">
                                          
                                          <p>How to create and test an AWS Lambda function</p>
                                          
                                       </li>
                                       <li class="listitem">
                                          
                                          <p>How to use the AWS SDK in an AWS Lambda function to publish an Amazon SNS
                                             notification
                                          </p>
                                          
                                       </li>
                                       <li class="listitem">
                                          
                                          <p>How to use simple SQL queries and functions in a rule query statement</p>
                                          
                                       </li>
                                       <li class="listitem">
                                          
                                          <p>How to use the MQTT client to test an AWS IoT rule</p>
                                          
                                       </li>
                                    </ul>
                                 </div>
                                 <p>This tutorial takes about 45 minutes to complete.</p>
                                 <div class="highlights" id="inline-topiclist">
                                    <p><strong>In this tutorial, you'll:</strong></p>
                                    <ul>
                                       <li><a href="#iot-lambda-rule-create-lambda">Create an AWS Lambda function that sends a
                                             text message</a></li>
                                       <li><a href="#iot-lambda-rule-create-rule">Create an AWS IoT rule with an AWS Lambda rule
                                             action</a></li>
                                       <li><a href="#iot-lambda-rule-test-rule">Test the AWS IoT rule and AWS Lambda rule
                                             action</a></li>
                                       <li><a href="#iot-lambda-rule-next-steps">Review the results and next steps</a></li>
                                    </ul>
                                 </div>
                                 <div class="itemizedlist">
                                    
                                    <p class="title"><b>Before you start this tutorial, make sure that you have:</b></p>
                                     
                                     
                                     
                                     
                                    
                                    <ul class="itemizedlist" type="disc">
                                       <li class="listitem">
                                           
                                          
                                          <p class="title"><b><a href="./setting-up.html">Set up your AWS account</a></b></p>
                                          
                                          <p>You'll need your AWS account and AWS IoT console to complete this tutorial.</p>
                                           
                                          
                                       </li>
                                       <li class="listitem">
                                           
                                          
                                          <p class="title"><b>Reviewed <a href="./view-mqtt-messages.html">View MQTT messages with the AWS IoT MQTT
                                                   client</a></b></p>
                                          
                                          <p>Be sure you can use the MQTT client to subscribe and publish to a topic. You'll use
                                             the MQTT client to test your new rule in this procedure.
                                          </p>
                                           
                                          
                                       </li>
                                       <li class="listitem">
                                           
                                          
                                          <p class="title"><b>Completed the other rules tutorials in this section</b></p>
                                          
                                          <p>This tutorial requires the SNS notification topic you created in the tutorial about
                                             how to <a href="./iot-sns-rule.html">Send an Amazon SNS notification</a>. It also assumes that you've completed the other
                                             rules-related tutorials in this section.
                                          </p>
                                           
                                          
                                       </li>
                                       <li class="listitem">
                                           
                                          
                                          <p class="title"><b>Reviewed the <a href="https://docs.aws.amazon.com/lambda/latest/dg/welcome.html">AWS Lambda</a> overview</b></p>
                                          
                                          <p>If you haven't used AWS Lambda before, review <a href="https://docs.aws.amazon.com/lambda/latest/dg/welcome.html">AWS Lambda</a> and <a href="https://docs.aws.amazon.com/lambda/latest/dg/getting-started.html">Getting started with
                                                Lambda</a> to learn its terms and concepts.
                                          </p>
                                           
                                          
                                       </li>
                                    </ul>
                                 </div>
                                 
                                 <h2 id="iot-lambda-rule-create-lambda">Create an AWS Lambda function that sends a
                                    text message
                                 </h2>
                                 
                                 <p>The AWS Lambda function in this tutorial receives the result of the rule query statement,
                                    inserts the elements into a text string, and sends the resulting string to Amazon
                                    SNS as the
                                    message in a notification.
                                 </p>
                                 
                                 <p>Unlike the tutorial about how to <a href="./iot-sns-rule.html">Send an Amazon SNS notification</a>, which used an AWS IoT
                                    rule action to send the notification, this tutorial sends the notification from the
                                    Lambda
                                    function by using a function of the AWS SDK. The actual Amazon SNS notification topic
                                    used in
                                    this tutorial, however, is the same one that you used in the tutorial about how to
                                    <a href="./iot-sns-rule.html">Send an Amazon SNS notification</a>.
                                 </p>
                                 
                                 <div class="procedure">
                                    <p class="title"><b>To create an AWS Lambda function that sends a text message</b></p>
                                    <ol>
                                       <li>
                                          
                                          <p>Create a new AWS Lambda function.</p>
                                          
                                          <ol>
                                             <li>
                                                
                                                <p>In the <a href="https://console.aws.amazon.com/lambda/home" rel="noopener noreferrer" target="_blank"><span>AWS Lambda console</span><awsui-icon class="awsdocs-link-icon" name="external"></awsui-icon></a>,
                                                   choose <b>Create function</b>.
                                                </p>
                                                
                                             </li>
                                             <li>
                                                
                                                <p>In <b>Create function</b>, select <b>Use a
                                                      blueprint</b>.
                                                </p>
                                                
                                                <p>Search for and select the <code class="userinput">hello-world-python</code> blueprint,
                                                   and then choose <b>Configure</b>.
                                                </p>
                                                
                                             </li>
                                             <li>
                                                
                                                <p>In <b>Basic information</b>:
                                                </p>
                                                
                                                <ol>
                                                   <li>
                                                      
                                                      <p>In <b>Function name</b>, enter the name of this function,
                                                         <code class="userinput">format-high-temp-notification</code>. 
                                                      </p>
                                                      
                                                   </li>
                                                   <li>
                                                      
                                                      <p>In <b>Execution role</b>, choose <b>Create a new role
                                                            from AWS policy templates</b>.
                                                      </p>
                                                      
                                                   </li>
                                                   <li>
                                                      
                                                      <p>In Role name, enter the name of the new role,
                                                         <code class="userinput">format-high-temp-notification-role</code>.
                                                      </p>
                                                      
                                                   </li>
                                                   <li>
                                                      
                                                      <p>In <b>Policy templates - <em>optional</em></b>, search for and select <b>Amazon SNS
                                                            publish policy</b>.
                                                      </p>
                                                      
                                                   </li>
                                                   <li>
                                                      
                                                      <p>Choose <b>Create function</b>.
                                                      </p>
                                                      
                                                   </li>
                                                </ol>
                                                
                                             </li>
                                          </ol>
                                          
                                       </li>
                                       <li>
                                          
                                          <p>Modify the blueprint code to format and send an Amazon SNS notification.</p>
                                          
                                          <ol>
                                             <li>
                                                
                                                <p>After you created your function, you should see the
                                                   <b>format-high-temp-notification</b> details page. If you don't,
                                                   open it from the <a href="https://console.aws.amazon.com/lambda/home#/functions" rel="noopener noreferrer" target="_blank"><span>Lambda
                                                         <b>Functions</b></span><awsui-icon class="awsdocs-link-icon" name="external"></awsui-icon></a> page.
                                                </p>
                                                
                                             </li>
                                             <li>
                                                
                                                <p>In the <b>format-high-temp-notification</b> details page, choose
                                                   the <b>Configuration</b> tab and scroll to the <b>Function
                                                      code</b> panel.
                                                </p>
                                                
                                             </li>
                                             <li>
                                                
                                                <p>In the <b>Function code</b> window, in the
                                                   <b>Environment</b> pane, choose the Python file,
                                                   <code class="code">lambda_function.py</code>.
                                                </p>
                                                
                                             </li>
                                             <li>
                                                
                                                <p>In the <b>Function code</b> window, delete all of the original
                                                   program code from the blueprint and replace it with this code.
                                                </p>
                                                <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class="python ">import boto3
#
#   expects event parameter to contain:
#   <span>{</span>
#       "device_id": "32",
#       "reported_temperature": 38,
#       "max_temperature": 30,
#       "notify_topic_arn": "<code class="replaceable">arn:aws:sns:us-east-1:57EXAMPLE833:high_temp_notice</code>"
#   }
# 
#   sends a plain text string to be used in a text message
#
#      "Device <span>{</span>0} reports a temperature of <span>{</span>1}, which exceeds the limit of <span>{</span>2}."
#   
#   where:
#       <span>{</span>0} is the device_id value
#       <span>{</span>1} is the reported_temperature value
#       <span>{</span>2} is the max_temperature value
#
def lambda_handler(event, context):

    # Create an SNS client to send notification
    sns = boto3.client('sns')

    # Format text message from data
    message_text = "Device <span>{</span>0} reports a temperature of <span>{</span>1}, which exceeds the limit of <span>{</span>2}.".format(
            str(event['device_id']),
            str(event['reported_temperature']),
            str(event['max_temperature'])
        )

    # Publish the formatted message
    response = sns.publish(
            TopicArn = event['notify_topic_arn'],
            Message = message_text
        )

    return response</code></pre>
                                                </li>
                                             <li>
                                                
                                                <p>Choose <b>Deploy</b>.
                                                </p>
                                                
                                             </li>
                                          </ol>
                                          
                                       </li>
                                       <li>
                                          
                                          <p>In a new window, look up the Amazon Resource Name (ARN) of your Amazon SNS topic from
                                             the
                                             tutorial about how to <a href="./iot-sns-rule.html">Send an Amazon SNS notification</a>.
                                          </p>
                                          
                                          <ol>
                                             <li>
                                                
                                                <p>In a new window, open the <a href="https://console.aws.amazon.com/sns/v3/home#/topics" rel="noopener noreferrer" target="_blank"><span>Topics page of the Amazon SNS console</span><awsui-icon class="awsdocs-link-icon" name="external"></awsui-icon></a>. 
                                                </p>
                                                
                                             </li>
                                             <li>
                                                
                                                <p>In the <b>Topics</b> page, find the
                                                   <b>high_temp_notice</b> notification topic in the list of Amazon SNS
                                                   topics.
                                                </p>
                                                
                                             </li>
                                             <li>
                                                
                                                <p>Find the <b>ARN</b> of the <b>high_temp_notice</b>
                                                   notification topic to use in the next step.
                                                </p>
                                                
                                             </li>
                                          </ol>
                                          
                                       </li>
                                       <li>
                                          
                                          <p>Create a test case for your Lambda function.</p>
                                          
                                          <ol>
                                             <li>
                                                
                                                <p>In the <a href="https://console.aws.amazon.com/lambda/home#/functions" rel="noopener noreferrer" target="_blank"><span>Lambda
                                                         <b>Functions</b></span><awsui-icon class="awsdocs-link-icon" name="external"></awsui-icon></a> page of the console, on the
                                                   <b>format-high-temp-notification</b> details page, choose
                                                   <b>Select a test event</b> in the upper right corner of the page
                                                   (even though it looks disabled), and then choose <b>Configure test
                                                      events</b>.
                                                </p>
                                                
                                             </li>
                                             <li>
                                                
                                                <p>In <b>Configure test event</b>, choose <b>Create new test
                                                      event</b>.
                                                </p>
                                                
                                             </li>
                                             <li>
                                                
                                                <p>In <b>Event name</b>, enter
                                                   <code class="userinput">SampleRuleOutput</code>.
                                                </p>
                                                
                                             </li>
                                             <li>
                                                
                                                <p>In the JSON editor below <b>Event name</b>, paste this sample JSON
                                                   document. This is an example of what your AWS IoT rule will send to the Lambda
                                                   function.
                                                </p>
                                                <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class="nohighlight"><span>{</span>
  "device_id": "32",
  "reported_temperature": 38,
  "max_temperature": 30,
  "notify_topic_arn": "<code class="replaceable">arn:aws:sns:us-east-1:57EXAMPLE833:high_temp_notice</code>"
}</code></pre>
                                                </li>
                                             <li>
                                                
                                                <p>Refer to the window that has the <b>ARN</b> of the
                                                   <b>high_temp_notice</b> notification topic and copy the ARN
                                                   value.
                                                </p>
                                                
                                             </li>
                                             <li>
                                                
                                                <p>Replace the <code class="code">notify_topic_arn</code> value in the JSON editor with the ARN
                                                   from your notification topic.
                                                </p>
                                                
                                                <p>Keep this window open so you can use this ARN value again when you create the
                                                   AWS IoT rule.
                                                </p>
                                                
                                             </li>
                                             <li>
                                                
                                                <p>Choose <b>Create</b>.
                                                </p>
                                                
                                             </li>
                                          </ol>
                                          
                                       </li>
                                       <li>
                                          
                                          <p>Test the function with sample data.</p>
                                          
                                          <ol>
                                             <li>
                                                
                                                <p>In the <b>format-high-temp-notification</b> details page, in the
                                                   upper-right corner of the page, confirm that <b>SampleRuleOutput</b>
                                                   appears next to the <b>Test</b> button. If it doesn't, choose it
                                                   from the list of available test events.
                                                </p>
                                                
                                             </li>
                                             <li>
                                                
                                                <p>To send the sample rule output message to your function, choose
                                                   <b>Test</b>.
                                                </p>
                                                
                                             </li>
                                          </ol>
                                          
                                       </li>
                                    </ol>
                                 </div>
                                 
                                 <p>If the function and the notification both worked, you will get a text message on the
                                    phone that subscribed to the notification.
                                 </p>
                                 
                                 <p>If you didn't get a text message on the phone, check the result of the operation.
                                    In the
                                    <b>Function code</b> panel, in the <b>Execution result</b>
                                    tab, review the response to find any errors that occurred. Don't continue to the next
                                    step
                                    until your function can send the notification to your phone.
                                 </p>
                                  
                                 
                                 <h2 id="iot-lambda-rule-create-rule">Create an AWS IoT rule with an AWS Lambda rule
                                    action
                                 </h2>
                                 
                                 <p>In this step, you'll use the rule query statement to format the data from the imaginary
                                    weather sensor device to send to a Lambda function, which will format and send a text
                                    message.
                                 </p>
                                 
                                 <p>A sample message payload received from the weather devices looks like this:</p>
                                 <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class="json "><span>{</span>
  "temperature": 28,
  "humidity": 80,
  "barometer": 1013,
  "wind": <span>{</span>
    "velocity": 22,
    "bearing": 255
  }
}</code></pre>
                                 <p>In this rule, you'll use the rule query statement to create a message payload for
                                    the
                                    Lambda function that looks like this:
                                 </p>
                                 <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class="json "><span>{</span>
  "device_id": "32",
  "reported_temperature": 38,
  "max_temperature": 30,
  "notify_topic_arn": "<code class="replaceable">arn:aws:sns:us-east-1:57EXAMPLE833:high_temp_notice</code>"
}</code></pre>
                                 <p>This contains all the information the Lambda function needs to format and send the
                                    correct text message.
                                 </p>
                                 
                                 <div class="procedure">
                                    <p class="title"><b>To create the AWS IoT rule to call a Lambda function</b></p>
                                    <ol>
                                       <li>
                                          
                                          <p>Open the <a href="https://console.aws.amazon.com/iot/home#/rulehub" rel="noopener noreferrer" target="_blank"><span><b>Rules</b> hub of the AWS IoT console</span><awsui-icon class="awsdocs-link-icon" name="external"></awsui-icon></a>.
                                          </p>
                                          
                                       </li>
                                       <li>
                                          
                                          <p>To start creating your new rule in <b>Rules</b>, choose
                                             <b>Create</b>.
                                          </p>
                                          
                                       </li>
                                       <li>
                                          
                                          <p>In the top part of <b>Create a rule</b>:
                                          </p>
                                          
                                          <ol>
                                             <li>
                                                
                                                <p>In <b>Name</b>, enter the rule's name,
                                                   <code class="userinput">wx_friendly_text</code>.
                                                </p>
                                                
                                                <p>Remember that a rule name must be unique within your AWS account and Region, and
                                                   it can't have any spaces. We've used an underscore character in this name to
                                                   separate the two words in the rule's name.
                                                </p>
                                                
                                             </li>
                                             <li>
                                                
                                                <p> In <b>Description</b>, describe the rule. 
                                                </p>
                                                
                                                <p>A meaningful description makes it easier to remember what this rule does and why
                                                   you created it. The description can be as long as needed, so be as detailed as
                                                   possible. 
                                                </p>
                                                
                                             </li>
                                          </ol>
                                          
                                       </li>
                                       <li>
                                          
                                          <p>In <b>Rule query statement</b> of <b>Create a
                                                rule</b>:
                                          </p>
                                          
                                          <ol>
                                             <li>
                                                
                                                <p> In <b>Using SQL version</b>, select
                                                   <code class="userinput">2016-03-23</code>. 
                                                </p>
                                                
                                             </li>
                                             <li>
                                                
                                                <p>In the <b>Rule query statement</b> edit box, enter the statement: 
                                                </p>
                                                <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class="nohighlight">SELECT 
  cast(topic(2) AS DECIMAL) as device_id, 
  temperature as reported_temperature,
  30 as max_temperature,
  '<code class="replaceable">arn:aws:sns:us-east-1:57EXAMPLE833:high_temp_notice</code>' as notify_topic_arn
FROM 'device/+/data' WHERE temperature &gt; 30</code></pre>
                                                <p>This statement:</p>
                                                
                                                <div class="itemizedlist">
                                                    
                                                    
                                                    
                                                    
                                                    
                                                   
                                                   <ul class="itemizedlist" type="disc">
                                                      <li class="listitem">
                                                         
                                                         <p>Listens for MQTT messages with a topic that matches the
                                                            <code class="code">device/+/data</code> topic filter and that have a
                                                            <code class="code">temperature</code> value greater than 30. 
                                                         </p>
                                                         
                                                      </li>
                                                      <li class="listitem">
                                                         
                                                         <p>Selects the second element from the topic string, converts it to a decimal
                                                            number, and then assigns it to the <code class="code">device_id</code> field.
                                                         </p>
                                                         
                                                      </li>
                                                      <li class="listitem">
                                                         
                                                         <p>Selects the value of the <code class="code">temperature</code> field from the message
                                                            payload and assigns it to the <code class="code">reported_temperature</code> field. 
                                                         </p>
                                                         
                                                      </li>
                                                      <li class="listitem">
                                                         
                                                         <p>Creates a constant value, <code class="code">30</code>, to represent the limit value and
                                                            assigns it to the <code class="code">max_temperature</code> field. 
                                                         </p>
                                                         
                                                      </li>
                                                      <li class="listitem">
                                                         
                                                         <p>Creates a constant value for the <code class="code">notify_topic_arn</code> field.
                                                         </p>
                                                         
                                                      </li>
                                                   </ul>
                                                </div>
                                                
                                             </li>
                                             <li>
                                                
                                                <p>Refer to the window that has the <b>ARN</b> of the
                                                   <b>high_temp_notice</b> notification topic and copy the ARN
                                                   value.
                                                </p>
                                                
                                             </li>
                                             <li>
                                                
                                                <p>Replace the ARN value
                                                   (<code class="replaceable">arn:aws:sns:us-east-1:57EXAMPLE833:high_temp_notice</code>)
                                                   in the rule query statement editor with the ARN of your notification topic.
                                                </p>
                                                
                                             </li>
                                          </ol>
                                          
                                       </li>
                                       <li>
                                          
                                          <p>In <b>Set one or more actions</b>:
                                          </p>
                                          
                                          <ol>
                                             <li>
                                                
                                                <p>To open up the list of rule actions for this rule, choose <b>Add
                                                      action</b>.
                                                </p>
                                                
                                             </li>
                                             <li>
                                                
                                                <p>In <b>Select an action</b>, choose <b>Send a message to a
                                                      Lambda function</b>.
                                                </p>
                                                
                                             </li>
                                             <li>
                                                
                                                <p>To open the selected action's configuration page, at the bottom of the action
                                                   list, choose <b>Configure action</b>.
                                                </p>
                                                
                                             </li>
                                          </ol>
                                          
                                       </li>
                                       <li>
                                          
                                          <p>In <b>Configure action</b>:
                                          </p>
                                          
                                          <ol>
                                             <li>
                                                
                                                <p>In <b>Function name</b>, choose
                                                   <b>Select</b>.
                                                </p>
                                                
                                             </li>
                                             <li>
                                                
                                                <p>Choose <b>format-high-temp-notification</b>.
                                                </p>
                                                
                                             </li>
                                             <li>
                                                
                                                <p>At the bottom of <b>Configure action</b>, choose <b>Add
                                                      action</b>.
                                                </p>
                                                
                                             </li>
                                             <li>
                                                
                                                <p>To create the rule, at the bottom of <b>Create a rule</b>, choose
                                                   <b>Create rule</b>.
                                                </p>
                                                
                                             </li>
                                          </ol>
                                          
                                       </li>
                                    </ol>
                                 </div>
                                  
                                 
                                 <h2 id="iot-lambda-rule-test-rule">Test the AWS IoT rule and AWS Lambda rule
                                    action
                                 </h2>
                                 
                                 <p>To test your new rule, you'll use the MQTT client to publish and subscribe to the
                                    MQTT
                                    messages used by this rule.
                                 </p>
                                 
                                 <p>Open the <a href="https://console.aws.amazon.com/iot/home#/test" rel="noopener noreferrer" target="_blank"><span>MQTT client in the AWS IoT
                                          console</span><awsui-icon class="awsdocs-link-icon" name="external"></awsui-icon></a> in a new window. Now you can edit the rule without losing the
                                    configuration of your MQTT client. If you leave the MQTT client to go to another page
                                    in the
                                    console, you'll lose your subscriptions or message logs.
                                 </p>
                                 
                                 <div class="procedure">
                                    <p class="title"><b>To use the MQTT client to test your rule</b></p>
                                    <ol>
                                       <li>
                                          
                                          <p>In the <a href="https://console.aws.amazon.com/iot/home#/test" rel="noopener noreferrer" target="_blank"><span>MQTT client in the AWS IoT
                                                   console</span><awsui-icon class="awsdocs-link-icon" name="external"></awsui-icon></a>, subscribe to the input topics, in this case,
                                             <code class="code">device/+/data</code>.
                                          </p>
                                          
                                          <ol>
                                             <li>
                                                
                                                <p>In the MQTT client, under <b>Subscriptions</b>, choose
                                                   <b>Subscribe to a topic</b>.
                                                </p>
                                                
                                             </li>
                                             <li>
                                                
                                                <p>In <b>Subscription topic</b>, enter the topic of the input topic
                                                   filter, <code class="userinput">device/+/data</code>.
                                                </p>
                                                
                                             </li>
                                             <li>
                                                
                                                <p>Keep the rest of the fields at their default settings.</p>
                                                
                                             </li>
                                             <li>
                                                
                                                <p>Choose <b>Subscribe to topic</b>.
                                                </p>
                                                
                                                <p>In the <b>Subscriptions</b> column, under <b>Publish to a
                                                      topic</b>, <code class="userinput">device/+/data</code> appears. 
                                                </p>
                                                
                                             </li>
                                          </ol>
                                          
                                       </li>
                                       <li>
                                          
                                          <p>Publish a message to the input topic with a specific device ID,
                                             <code class="userinput">device/32/data</code>. You can't publish to MQTT topics that contain
                                             wildcard characters.
                                          </p>
                                          
                                          <ol>
                                             <li>
                                                
                                                <p>In the MQTT client, under <b>Subscriptions</b>, choose
                                                   <b>Publish to topic</b>.
                                                </p>
                                                
                                             </li>
                                             <li>
                                                
                                                <p>In the <b>Publish</b> field, enter the input topic name,
                                                   <code class="userinput">device/32/data</code>.
                                                </p>
                                                
                                             </li>
                                             <li>
                                                
                                                <p>Copy the sample data shown here and, in the edit box below the topic name, paste
                                                   the sample data.
                                                </p>
                                                <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class="json "><span>{</span>
  "temperature": 38,
  "humidity": 80,
  "barometer": 1013,
  "wind": <span>{</span>
    "velocity": 22,
    "bearing": 255
  }
}</code></pre>
                                                </li>
                                             <li>
                                                
                                                <p>To publish your MQTT message, choose <b>Publish to
                                                      topic</b>.
                                                </p>
                                                
                                             </li>
                                          </ol>
                                          
                                       </li>
                                       <li>
                                          
                                          <p>Confirm that the text message was sent.</p>
                                          
                                          <ol>
                                             <li>
                                                
                                                <p>In the MQTT client, under <b>Subscriptions</b>, there is a green
                                                   dot next to the topic to which you subscribed earlier.
                                                </p>
                                                
                                                <p>The green dot indicates that one or more new messages have been received since
                                                   the last time you looked at them.
                                                </p>
                                                
                                             </li>
                                             <li>
                                                
                                                <p>Under <b>Subscriptions</b>, choose
                                                   <b>device/+/data</b> to check that the message payload matches what
                                                   you just published and looks like this:
                                                </p>
                                                <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class="json "><span>{</span>
  "temperature": 38,
  "humidity": 80,
  "barometer": 1013,
  "wind": <span>{</span>
    "velocity": 22,
    "bearing": 255
  }
}</code></pre>
                                                </li>
                                             <li>
                                                
                                                <p>Check the phone that you used to subscribe to the SNS topic and confirm the
                                                   contents of the message payload look like this:
                                                </p>
                                                <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class="json ">Device 32 reports a temperature of 38, which exceeds the limit of 30.</code></pre>
                                                <p>If you change the topic ID element in the message topic, remember that casting
                                                   the <code class="code">topic(2)</code> value to a numeric value will only work if that element in
                                                   the message topic contains only numeric characters.
                                                </p>
                                                
                                             </li>
                                          </ol>
                                          
                                       </li>
                                       <li>
                                          
                                          <p>Try sending an MQTT message in which the temperature does not exceed the
                                             limit.
                                          </p>
                                          
                                          <ol>
                                             <li>
                                                
                                                <p>In the MQTT client, under <b>Subscriptions</b>, choose
                                                   <b>Publish to topic</b>.
                                                </p>
                                                
                                             </li>
                                             <li>
                                                
                                                <p>In the <b>Publish</b> field, enter the input topic name,
                                                   <code class="userinput">device/33/data</code>.
                                                </p>
                                                
                                             </li>
                                             <li>
                                                
                                                <p>Copy the sample data shown here and, in the edit box below the topic name, paste
                                                   the sample data.
                                                </p>
                                                <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class="json "><span>{</span>
  "temperature": 28,
  "humidity": 80,
  "barometer": 1013,
  "wind": <span>{</span>
    "velocity": 22,
    "bearing": 255
  }
}</code></pre>
                                                </li>
                                             <li>
                                                
                                                <p>To send your MQTT message, choose <b>Publish to
                                                      topic</b>.
                                                </p>
                                                
                                             </li>
                                          </ol>
                                          
                                          <p>You should see the message that you sent in the
                                             <code class="userinput">device/+/data</code> subscription; however, because the
                                             temperature value is below the max temperature in the rule query statement, you
                                             shouldn't receive a text message.
                                          </p>
                                          
                                          <p>If you don't see the correct behavior, check the troubleshooting tips.</p>
                                          
                                       </li>
                                    </ol>
                                 </div>
                                  
                                 
                                 <h3 id="iot-lambda-rule-troubleshoot">Troubleshooting your AWS Lambda rule and
                                    notification
                                 </h3>
                                 
                                 <p>Here are some things to check, in case you're not seeing the results you
                                    expect.
                                 </p>
                                 
                                 <div class="itemizedlist">
                                     
                                     
                                     
                                    
                                    <ul class="itemizedlist" type="disc">
                                       <li class="listitem">
                                           
                                          
                                          <p class="title"><b>You got an error banner</b></p>
                                          
                                          <p>If an error appeared when you published the input message, correct that error
                                             first. The following steps might help you correct that error.
                                          </p>
                                           
                                          
                                       </li>
                                       <li class="listitem">
                                           
                                          
                                          <p class="title"><b>You don't see the input message in the MQTT client</b></p>
                                          
                                          <p>Every time you publish your input message to the <code class="code">device/32/data</code>
                                             topic, that message should appear in the MQTT client, if you subscribed to the
                                             <code class="code">device/+/data</code> topic filter as described in the procedure.
                                          </p>
                                           
                                          
                                          <div class="itemizedlist">
                                             
                                             <p class="title"><b>Things to check</b></p>
                                              
                                              
                                             
                                             <ul class="itemizedlist" type="disc">
                                                <li class="listitem">
                                                    
                                                   
                                                   <p class="title"><b>Check the topic filter you subscribed to</b></p>
                                                   
                                                   <p>If you subscribed to the input message topic as described in the procedure,
                                                      you should see a copy of the input message every time you publish it.
                                                   </p>
                                                    
                                                   
                                                   <p>If you don't see the message, check the topic name you subscribed to and
                                                      compare it to the topic to which you published. Topic names are case sensitive and
                                                      the topic to which you subscribed must be identical to the topic to which you
                                                      published the message payload.
                                                   </p>
                                                   
                                                </li>
                                                <li class="listitem">
                                                    
                                                   
                                                   <p class="title"><b>Check the message publish function</b></p>
                                                   
                                                   <p>In the MQTT client, under <b>Subscriptions</b>, choose
                                                      <b>device/+/data</b>, check the topic of the publish message, and
                                                      then choose <b>Publish to topic</b>. You should see the message
                                                      payload from the edit box below the topic appear in the message list. 
                                                   </p>
                                                    
                                                   
                                                </li>
                                             </ul>
                                          </div>
                                          
                                       </li>
                                       <li class="listitem">
                                           
                                          
                                          <p class="title"><b>You don't receive an SMS message</b></p>
                                          
                                          <p>For your rule to work, it must have the correct policy that authorizes it to
                                             receive a message and send an SNS notification, and it must receive the
                                             message.
                                          </p>
                                           
                                          
                                          <div class="itemizedlist">
                                             
                                             <p class="title"><b>Things to check</b></p>
                                              
                                              
                                              
                                              
                                              
                                              
                                              
                                             
                                             <ul class="itemizedlist" type="disc">
                                                <li class="listitem">
                                                    
                                                   
                                                   <p class="title"><b>Check the AWS Region of your MQTT client and the rule that you
                                                         created</b></p>
                                                   
                                                   <p>The console in which you're running the MQTT client must be in the same AWS
                                                      Region as the rule you created.
                                                   </p>
                                                    
                                                   
                                                </li>
                                                <li class="listitem">
                                                    
                                                   
                                                   <p class="title"><b>Check that the temperature value in the message payload exceeds the test
                                                         threshold</b></p>
                                                   
                                                   <p>If the temperature value is less than or equal to 30, as defined in the rule
                                                      query statement, the rule will not perform any of its actions.
                                                   </p>
                                                    
                                                   
                                                </li>
                                                <li class="listitem">
                                                    
                                                   
                                                   <p class="title"><b>Check the input message topic in the rule query statement</b></p>
                                                   
                                                   <p>For the rule to work, it must receive a message with the topic name that
                                                      matches the topic filter in the FROM clause of the rule query statement.
                                                   </p>
                                                    
                                                   
                                                   <p>Check the spelling of the topic filter in the rule query statement with that
                                                      of the topic in the MQTT client. Topic names are case sensitive and the message's
                                                      topic must match the topic filter in the rule query statement.
                                                   </p>
                                                   
                                                </li>
                                                <li class="listitem">
                                                    
                                                   
                                                   <p class="title"><b>Check the contents of the input message payload</b></p>
                                                   
                                                   <p>For the rule to work, it must find the data field in the message payload
                                                      that is declared in the SELECT statement.
                                                   </p>
                                                    
                                                   
                                                   <p>Check the spelling of the <code class="code">temperature</code> field in the rule query
                                                      statement with that of the message payload in the MQTT client. Field names are
                                                      case sensitive and the <code class="code">temperature</code> field in the rule query statement
                                                      must be identical to the <code class="code">temperature</code> field in the message
                                                      payload.
                                                   </p>
                                                   
                                                   <p>Make sure that the JSON document in the message payload is correctly
                                                      formatted. If the JSON has any errors, such as a missing comma, the rule will not
                                                      be able to read it.
                                                   </p>
                                                   
                                                </li>
                                                <li class="listitem">
                                                    
                                                   
                                                   <p class="title"><b>Check the Amazon SNS notification</b></p>
                                                   
                                                   <p>In <a href="./iot-sns-rule.html#iot-sns-rule-create-sns-topic">Create an Amazon SNS topic that sends an SMS text
                                                         message</a>, refer to step 3 that
                                                      describes how to test the Amazon SNS notification and test the notification to make
                                                      sure the notification works.
                                                   </p>
                                                    
                                                   
                                                </li>
                                                <li class="listitem">
                                                    
                                                   
                                                   <p class="title"><b>Check the Lambda function</b></p>
                                                   
                                                   <p>In <a href="#iot-lambda-rule-create-lambda">Create an AWS Lambda function that sends a
                                                         text message</a>, refer to step 5 that
                                                      describes how to test the Lambda function using test data and test the Lambda
                                                      function.
                                                   </p>
                                                    
                                                   
                                                </li>
                                                <li class="listitem">
                                                    
                                                   
                                                   <p class="title"><b>Check the role being used by the rule</b></p>
                                                   
                                                   <p>The rule action must have permission to receive the original topic and
                                                      publish the new topic. 
                                                   </p>
                                                    
                                                   
                                                   <p>The policies that authorize the rule to receive message data and republish it
                                                      are specific to the topics used. If you change the topic used to republish the
                                                      message data, you must update the rule action's role to update its policy to match
                                                      the current topic.
                                                   </p>
                                                   
                                                   <p>If you suspect this is the problem, edit the Republish rule action and create
                                                      a new role. New roles created by the rule action receive the authorizations
                                                      necessary to perform these actions.
                                                   </p>
                                                   
                                                </li>
                                             </ul>
                                          </div>
                                          
                                       </li>
                                    </ul>
                                 </div>
                                  
                                  
                                 
                                 <h2 id="iot-lambda-rule-next-steps">Review the results and next steps</h2>
                                 
                                 <div class="itemizedlist">
                                    
                                    <p class="title"><b>In this tutorial:</b></p>
                                     
                                     
                                     
                                    
                                    <ul class="itemizedlist" type="disc">
                                       <li class="listitem">
                                          
                                          <p>You created an AWS IoT rule to call a Lambda function that sent an Amazon SNS notification
                                             that used your customized message payload.
                                          </p>
                                          
                                       </li>
                                       <li class="listitem">
                                          
                                          <p>You used a simple SQL query and functions in a rule query statement to create a new
                                             message payload for your Lambda function.
                                          </p>
                                          
                                       </li>
                                       <li class="listitem">
                                          
                                          <p>You used the MQTT client to test your AWS IoT rule.</p>
                                          
                                       </li>
                                    </ul>
                                 </div>
                                  
                                 
                                 <p class="title"><b>Next steps</b></p>
                                 
                                 <p>After you send a few text messages with this rule, try experimenting with it to see
                                    how changing some aspects of the tutorial affect the message and when it's sent. Here
                                    are
                                    some ideas to get you started.
                                 </p>
                                  
                                 
                                 <div class="itemizedlist">
                                     
                                     
                                     
                                     
                                    
                                    <ul class="itemizedlist" type="disc">
                                       <li class="listitem">
                                          
                                          <p>Change the <code class="replaceable">device_id</code> in the input message's topic and
                                             observe the effect in the text message contents.
                                          </p>
                                          
                                       </li>
                                       <li class="listitem">
                                          
                                          <p>Change the fields selected in the rule query statement, update the Lambda function
                                             to
                                             use them in a new message, and observe the effect in the text message contents.
                                          </p>
                                          
                                       </li>
                                       <li class="listitem">
                                          
                                          <p>Change the test in the rule query statement to test for a minimum temperature
                                             instead of a maximum temperature. Update the Lambda function to format a new message
                                             and
                                             remember to change the name of <code class="code">max_temperature</code>.
                                          </p>
                                          
                                       </li>
                                       <li class="listitem">
                                          
                                          <p>To learn more about how to find errors that might occur while you're developing and
                                             using AWS IoT rules, see <a href="./monitoring_overview.html">Monitoring AWS IoT</a>.
                                          </p>
                                          
                                       </li>
                                    </ul>
                                 </div>
                                 
                                 <awsdocs-copyright class="copyright-print"></awsdocs-copyright>
                                 <awsdocs-thumb-feedback right-edge="{{$ctrl.thumbFeedbackRightEdge}}"></awsdocs-thumb-feedback>
                              </div>
                              <noscript>
                                 <div>
                                    <div>
                                       <div>
                                          <div id="js_error_message">
                                             <p><img src="https://d1ge0kk1l5kms0.cloudfront.net/images/G/01/webservices/console/warning.png" alt="Warning" /> <strong>Javascript is disabled or is unavailable in your
                                                   browser.</strong></p>
                                             <p>To use the Amazon Web Services Documentation, Javascript must be
                                                enabled. Please refer to your browser's Help pages for instructions.
                                             </p>
                                          </div>
                                       </div>
                                    </div>
                                 </div>
                              </noscript>
                              <div id="main-col-footer" class="awsui-util-font-size-0">
                                 <div id="doc-conventions"><a target="_top" href="/general/latest/gr/docconventions.html">Document Conventions</a></div>
                                 <div class="prev-next">
                                    <div id="previous" class="prev-link" accesskey="p" href="./iot-ddb-rule.html">Store device data in a DynamoDB table</div>
                                    <div id="next" class="next-link" accesskey="n" href="./iot-shadows-tutorial.html">AWS IoT Device Shadow tutorials</div>
                                 </div>
                              </div>
                              <awsdocs-page-utilities></awsdocs-page-utilities>
                           </div>
                           <div id="quick-feedback-yes" style="display: none;">
                              <div class="title">Did this page help you? - Yes</div>
                              <div class="content">
                                 <p>Thanks for letting us know we're doing a good
                                    job!
                                 </p>
                                 <p>If you've got a moment, please tell us what we did right
                                    so we can do more of it.
                                 </p>
                                 <p>
                                    <awsui-button id="fblink" target="_blank" text="Feedback" click="linkClick($event)" href="https://docs.aws.amazon.com/forms/aws-doc-feedback?hidden_service_name=IoT Docs&amp;topic_url=https://docs.aws.amazon.com/en_us/iot/latest/developerguide/iot-lambda-rule.html"></awsui-button>
                                 </p>
                              </div>
                           </div>
                           <div id="quick-feedback-no" style="display: none;">
                              <div class="title">Did this page help you? - No</div>
                              <div class="content">
                                 <p>Thanks for letting us know this page needs work. We're
                                    sorry we let you down.
                                 </p>
                                 <p>If you've got a moment, please tell us how we can make
                                    the documentation better.
                                 </p>
                                 <p>
                                    <awsui-button id="fblink" target="_blank" text="Feedback" click="linkClick($event)" href="https://docs.aws.amazon.com/forms/aws-doc-feedback?hidden_service_name=IoT Docs&amp;topic_url=https://docs.aws.amazon.com/en_us/iot/latest/developerguide/iot-lambda-rule.html"></awsui-button>
                                 </p>
                              </div>
                           </div>
                        </div>
                     </body>
                  </div>
               </awsdocs-view>
               <div class="page-loading-indicator" id="page-loading-indicator">
                  <awsui-spinner size="large"></awsui-spinner>
               </div>
            </div>
            <div id="tools-panel" dom-region="tools">
               <awsdocs-tools-panel id="awsdocs-tools-panel"></awsdocs-tools-panel>
            </div>
         </awsui-app-layout>
         <awsdocs-cookie-banner class="doc-cookie-banner"></awsdocs-cookie-banner>
         <!--
                SiteCatalyst code version: H.25.2.
                Copyright 1996-2012 Adobe, Inc. All Rights Reserved
                More info available at http://www.omniture.com
            --><script language="JavaScript" type="text/javascript">
var awsdocs = awsdocs || {};
awsdocs.prop66 = 'AWS IoT Core';
awsdocs.prop65 =  'Developer Guide';
            </script><script src="https://a0.awsstatic.com/s_code/js/3.0/awshome_s_code.js" language="JavaScript" type="text/javascript"></script>
         <!--/DO NOT REMOVE/-->
         <!--End SiteCatalyst code version: H.25.2.--></div>
   </body>
</html>