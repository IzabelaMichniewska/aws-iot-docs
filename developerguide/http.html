<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" ng-app="AWSDocsDocPageApp">
   <head>
      <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
      <title>HTTPS - AWS IoT Core</title>
      <meta name="viewport" content="width=device-width,initial-scale=1" />
      <meta name="assets_root" content="assets" />
      <meta name="target_state" content="http" />
      <meta name="default_state" content="http" />
      <link rel="icon" type="image/ico" href="/assets/images/favicon.ico" />
      <link rel="shortcut icon" type="image/ico" href="/assets/images/favicon.ico" />
      <link rel="canonical" href="https://docs.aws.amazon.com/iot/latest/developerguide/http.html" />
      <meta name="description" content="Learn how AWS IoT clients can publish messages by making requests to the REST API using HTTPS." />
      <meta name="deployment_region" content="IAD" />
      <meta name="product" content="AWS IoT Core" />
      <meta name="guide" content="Developer Guide" />
      <meta name="locales" content="de_de:Deutsch/en_us:English/es_es:Español/fr_fr:Français/it_it:Italiano/ja_jp:日本語/ko_kr:한국어/pt_br:Português/zh_cn:中文 (简体)/zh_tw:中文 (繁體)" />
      <meta name="abstract" content="AWS IoT provides secure, bi-directional communication between Internet-connected devices such as sensors, actuators, embedded micro-controllers, or smart appliances and the AWS Cloud. This enables you to collect telemetry data from multiple devices, and store and analyze the data. You can also create applications that enable your users to control these devices from their phones or tablets." />
      <meta name="guide-locale" content="en_us" />
      <meta name="tocs" content="toc-contents.json" />
      <meta name="feedback-item" content="IoT Docs" />
      <meta name="this_doc_product" content="AWS IoT Core" />
      <meta name="this_doc_guide" content="Developer Guide" />
      <link href="assets/css/vendor4.css" rel="stylesheet" />
      <link href="assets/css/awsdocs-common.css" rel="stylesheet" /><script type="text/javascript" src="assets/js/vendor3.js" defer=""></script><script type="text/javascript" src="assets/js/vendor4.js" defer=""></script><script type="text/javascript" src="assets/js/vendor1.js" defer=""></script><script type="text/javascript" src="assets/js/awsdocs-common.js" defer=""></script><script type="text/javascript" src="assets/js/awsdocs-doc-app.js" defer=""></script></head>
   <body class="awsdocs awsui">
      <div class="awsdocs-container">
         <awsdocs-header></awsdocs-header>
         <awsui-app-layout id="app-layout" class="awsui-util-no-gutters" ng-controller="ContentController as $ctrl" header-selector="awsdocs-header" navigation-hide="false" navigation-width="$ctrl.navWidth" navigation-open="$ctrl.navOpen" navigation-change="$ctrl.onNavChange($event)" tools-hide="$ctrl.hideTools" tools-width="$ctrl.toolsWidth" tools-open="$ctrl.toolsOpen" tools-change="$ctrl.onToolsChange($event)">
            <div id="guide-toc" dom-region="navigation">
               <awsdocs-toc></awsdocs-toc>
            </div>
            <div id="main-column" dom-region="content" tabindex="-1">
               <awsdocs-view class="awsdocs-view">
                  <div id="awsdocs-content">
                     <head>
                        <title>HTTPS - AWS IoT Core</title>
                        <meta name="pdf" content="iot-dg.pdf#http" />
                        <meta name="kindle" content="https://www.amazon.com/dp/B07JBRCWWZ" />
                        <meta name="github" content="https://github.com/awsdocs/aws-iot-docs/tree/master/developerguide/http.md" />
                        <meta name="forums" content="http://forums.aws.amazon.com/forum.jspa?forumID=210" />
                        <meta name="feedback" content="https://docs.aws.amazon.com/forms/aws-doc-feedback?hidden_service_name=IoT%20Docs&amp;topic_url=http://docs.aws.amazon.com/en_us/iot/latest/developerguide/http.html" />
                        <meta name="feedback-yes" content="feedbackyes.html?topic_url=http://docs.aws.amazon.com/en_us/iot/latest/developerguide/http.html" />
                        <meta name="feedback-no" content="feedbackno.html?topic_url=http://docs.aws.amazon.com/en_us/iot/latest/developerguide/http.html" />
                        <meta name="keywords" content="AWS IoT,IoT,Internet of Things" />
                     </head>
                     <body>
                        <div id="main">
                           <div style="display: none"><a href="iot-dg.pdf#http" target="_blank" rel="noopener noreferrer" title="Open PDF"></a><a target="_blank" rel="noopener noreferrer" href="https://www.amazon.com/dp/B07JBRCWWZ" title="Open Kindle"></a><a href="https://github.com/awsdocs/aws-iot-docs/tree/master/developerguide/http.md" target="_blank" rel="noopener noreferrer" title="Edit this page on GitHub"></a></div>
                           <div id="breadcrumbs" class="breadcrumb"><a href="http://aws.amazon.com">AWS</a><a href="/index.html">Documentation</a><a href="/iot/index.html">AWS IoT Core</a><a href="what-is-aws-iot.html">Developer Guide</a></div>
                           <div id="page-toc-src"><a href="#httpurl">HTTPS message URL</a><a href="#codeexample">HTTPS message code examples</a></div>
                           <div id="main-content" class="awsui-util-container">
                              <div id="main-col-body">
                                 <awsdocs-language-banner data-service="$ctrl.pageService"></awsdocs-language-banner>
                                 <h1 class="topictitle" id="http">HTTPS</h1>
                                 <div class="awsdocs-page-header-container">
                                    <awsdocs-page-header></awsdocs-page-header>
                                    <awsdocs-filter-selector id="awsdocs-filter-selector"></awsdocs-filter-selector>
                                 </div>
                                 <p>Clients can publish messages by making requests to the REST API using the HTTP
                                    1.0 or 1.1 protocols. For the authentication and port mappings used by HTTP
                                    requests, see <a href="./protocols.html#protocol-port-mapping">Protocols, port mappings, and
                                       authentication</a>.
                                 </p>
                                 <div class="awsdocs-note">
                                    <div class="awsdocs-note-title">
                                       <awsui-icon name="status-info" variant="link"></awsui-icon><span>Note</span></div>
                                    <div class="awsdocs-note-text">
                                       <p>Unlike MQTT, HTTPS does not support a <code class="code">clientId</code> value. So,
                                          while a <code class="code">clientId</code> is available when using MQTT, it's not
                                          available when using HTTPS.
                                       </p>
                                    </div>
                                 </div>
                                 
                                 <h2 id="httpurl">HTTPS message URL</h2>
                                 
                                 <p>Devices and clients publish their messages by making POST requests to a
                                    client-specific endpoint and a topic-specific URL:
                                 </p>
                                 <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class="nohighlight">https://<code class="replaceable">IoT_data_endpoint</code>/topics/<code class="replaceable">url_encoded_topic_name</code>?qos=1"</code></pre>
                                 <div class="itemizedlist">
                                     
                                     
                                    
                                    <ul class="itemizedlist" type="disc">
                                       <li class="listitem">
                                          
                                          <p>
                                             <code class="replaceable">IoT_data_endpoint</code> is the <a href="./iot-connect-devices.html#iot-connect-device-endpoints">AWS IoT device data
                                                endpoint</a>. You can find the endpoint in the AWS IoT console
                                             on the thing's details page or on the client by using the AWS CLI
                                             command: 
                                          </p>
                                          <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class="nohighlight">aws iot describe-endpoint --endpoint-type
                                    iot:Data-ATS</code></pre>
                                          <p> The endpoint should look something like this:
                                             <code class="code">a3qjEXAMPLEffp-ats.iot.us-west-2.amazonaws.com</code>
                                             
                                          </p>
                                          
                                       </li>
                                       <li class="listitem">
                                          
                                          <p><code class="replaceable">url_encoded_topic_name</code> is the full
                                             <a href="./topics.html#topicnames">topic name</a> of the message
                                             being sent.
                                          </p>
                                          
                                       </li>
                                    </ul>
                                 </div>
                                  
                                 
                                 <h2 id="codeexample">HTTPS message code examples</h2>
                                 
                                 <p>These are some examples of how to send an HTTPS message to AWS IoT.</p>
                                 
                                 <awsdocs-tabs>
                                    <dl style="display: none">
                                       
                                       <dt>Python</dt>
                                       <dd tab-id="python">
                                          <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class="python ">import requests
import argparse

# define command-line parameters
parser = argparse.ArgumentParser(description="Send messages through an HTTPS connection.")
parser.add_argument('--endpoint', required=True, help="Your AWS IoT data custom endpoint, not including a port. " +
                                                      "Ex: \"abcdEXAMPLExyz-ats.iot.us-east-1.amazonaws.com\"")
parser.add_argument('--cert', required=True, help="File path to your client certificate, in PEM format.")
parser.add_argument('--key', required=True, help="File path to your private key, in PEM format.")
parser.add_argument('--topic', required=True, default="test/topic", help="Topic to publish messages to.")
parser.add_argument('--message', default="Hello World!", help="Message to publish. " +
                                                      "Specify empty string to publish nothing.")

# parse and load command-line parameter values
args = parser.parse_args()

# create and format values for HTTPS request
publish_url = 'https://' + args.endpoint + ':8443/topics/' + args.topic + '?qos=1'
publish_msg = args.message.encode('utf-8')

# make request
publish = requests.request('POST',
            publish_url,
            data=publish_msg,
            cert=[args.cert, args.key])

# print results
print("Response status: ", str(publish.status_code))
if publish.status_code == 200:
        print("Response body:", publish.text)</code></pre>
                                          </dd>
                                       
                                       <dt>CURL</dt>
                                       <dd tab-id="curl">
                                          
                                          <p>You can use <a href="https://curl.haxx.se" rel="noopener noreferrer" target="_blank"><span>curl</span><awsui-icon class="awsdocs-link-icon" name="external"></awsui-icon></a>
                                             from a client or device to send a message to AWS IoT.
                                          </p>
                                          
                                          <div class="procedure">
                                             <p class="title"><b>To use curl to send a message from an AWS IoT client
                                                   device</b></p>
                                             <ol>
                                                <li>
                                                   
                                                   <p>Check the <b>curl</b> version.
                                                   </p>
                                                   
                                                   <ol>
                                                      <li>
                                                         
                                                         <p>On your client, run this command at a command
                                                            prompt.
                                                         </p>
                                                         
                                                         <p><b>curl --help</b></p>
                                                         
                                                         <p>In the help text, look for the TLS options.
                                                            You should see the <code class="code">--tlsv1.2</code>
                                                            option.
                                                         </p>
                                                         
                                                      </li>
                                                      <li>
                                                         
                                                         <p>If you see the <code class="code">--tlsv1.2</code> option,
                                                            continue.
                                                         </p>
                                                         
                                                      </li>
                                                      <li>
                                                         
                                                         <p>If you don't see the <code class="code">--tlsv1.2</code>
                                                            option or you get a <code class="code">command not found</code>
                                                            error, you might need to update or install curl on
                                                            your client or install <code class="code">openssl</code> before
                                                            you continue.
                                                         </p>
                                                         
                                                      </li>
                                                   </ol>
                                                   
                                                </li>
                                                <li>
                                                   
                                                   <p>Install the certificates on your client.</p>
                                                   
                                                   <p>Copy the certificate files that you created when you
                                                      registered your client (thing) in the AWS IoT console.
                                                      Make sure you have these three certificate files on your
                                                      client before you continue.
                                                   </p>
                                                   
                                                   <div class="itemizedlist">
                                                       
                                                       
                                                       
                                                      
                                                      <ul class="itemizedlist" type="disc">
                                                         <li class="listitem">
                                                            
                                                            <p>The CA certificate file
                                                               (<code class="replaceable">Amazon-root-CA-1.pem</code>
                                                               in this example).
                                                            </p>
                                                            
                                                         </li>
                                                         <li class="listitem">
                                                            
                                                            <p>The client's certificate file
                                                               (<code class="replaceable">device.pem.crt</code> in this
                                                               example).
                                                            </p>
                                                            
                                                         </li>
                                                         <li class="listitem">
                                                            
                                                            <p>The client's private key file
                                                               (<code class="replaceable">private.pem.key</code> in
                                                               this example).
                                                            </p>
                                                            
                                                         </li>
                                                      </ul>
                                                   </div>
                                                   
                                                </li>
                                                <li>
                                                   
                                                   <p>Create the <b>curl</b> command line,
                                                      replacing the replaceable values for those of your
                                                      account and system.
                                                   </p>
                                                   <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class="nohighlight">curl --tlsv1.2 \
    --cacert <code class="replaceable">Amazon-root-CA-1.pem</code> \
    --cert <code class="replaceable">device.pem.crt</code> \
    --key <code class="replaceable">private.pem.key</code> \
    --request POST \
    --data "<code class="replaceable"><span>{</span> \"message\": \"Hello, world\" }</code>" \
    "https://<code class="replaceable">IoT_data_endpoint</code>:8443/topics/<code class="replaceable">topic</code>?qos=1"</code></pre>
                                                   <div class="variablelist">
                                                       
                                                       
                                                       
                                                       
                                                       
                                                       
                                                       
                                                      
                                                      <dl>
                                                         
                                                         <dt><span class="term">--tlsv1.2</span></dt>
                                                         
                                                         <dd>
                                                            
                                                            <p>Use TLS 1.2 (SSL).</p>
                                                            
                                                         </dd>
                                                          
                                                         
                                                         <dt><span class="term">--cacert
                                                               <code class="replaceable">Amazon-root-CA-1.pem</code></span></dt>
                                                         
                                                         <dd>
                                                            
                                                            <p>The file name and path, if necessary, of the
                                                               CA certificate to verify the peer.
                                                            </p>
                                                            
                                                         </dd>
                                                          
                                                         
                                                         <dt><span class="term">--cert
                                                               <code class="replaceable">device.pem.crt</code></span></dt>
                                                         
                                                         <dd>
                                                            
                                                            <p>The client's certificate file name and path,
                                                               if necessary.
                                                            </p>
                                                            
                                                         </dd>
                                                          
                                                         
                                                         <dt><span class="term">--key
                                                               <code class="replaceable">private.pem.key</code></span></dt>
                                                         
                                                         <dd>
                                                            
                                                            <p>The client's private key file name and path,
                                                               if necessary.
                                                            </p>
                                                            
                                                         </dd>
                                                          
                                                         
                                                         <dt><span class="term">--request POST</span></dt>
                                                         
                                                         <dd>
                                                            
                                                            <p>The type of HTTP request (in this case,
                                                               POST).
                                                            </p>
                                                            
                                                         </dd>
                                                          
                                                         
                                                         <dt><span class="term">--data "<code class="replaceable"><span>{</span> \"message\": \"Hello,
                                                                  world\" }</code>"</span></dt>
                                                         
                                                         <dd>
                                                            
                                                            <p>The HTTP POST data you want to publish. In
                                                               this case, it's a JSON string, with the internal
                                                               quotation marks escaped with the backslash
                                                               character (\).
                                                            </p>
                                                            
                                                         </dd>
                                                          
                                                         
                                                         <dt><span class="term">"https://<code class="replaceable">IoT_data_endpoint</code>:8443/topics/<code class="replaceable">topic</code>?qos=1"</span></dt>
                                                         
                                                         <dd>
                                                            
                                                            <p>The URL of your client's AWS IoT device data
                                                               endpoint, followed by the HTTPS port,
                                                               <code class="code">:8443</code>, which is then followed by the
                                                               keyword, <code class="code">/topics/</code> and the topic name,
                                                               <code class="code">topic</code>, in this case. Specify the
                                                               Quality of Service as the query parameter,
                                                               <code class="code">?qos=1</code>.
                                                            </p>
                                                            
                                                         </dd>
                                                         
                                                      </dl>
                                                   </div>
                                                   
                                                </li>
                                                <li>
                                                   
                                                   <p>Open the MQTT test client in the AWS IoT console.</p>
                                                   
                                                   <p>Follow the instructions in <a href="./view-mqtt-messages.html">View MQTT messages with the AWS IoT MQTT
                                                         client</a> and configure
                                                      the console to subscribe to messages with the topic name
                                                      of <code class="replaceable">topic</code> used in your
                                                      <b>curl</b> command, or use the wildcard
                                                      topic filter of <code class="code">#</code>.
                                                   </p>
                                                   
                                                </li>
                                                <li>
                                                   
                                                   <p>Test the command.</p>
                                                   
                                                   <p>While monitoring the topic in the test client of the
                                                      AWS IoT console, go to your client and issue the curl
                                                      command line that you created in step 3. You should see
                                                      your client's messages in the console.
                                                   </p>
                                                   
                                                </li>
                                             </ol>
                                          </div>
                                          
                                       </dd>
                                       
                                    </dl>
                                 </awsdocs-tabs>
                                 
                                 <awsdocs-copyright class="copyright-print"></awsdocs-copyright>
                                 <awsdocs-thumb-feedback right-edge="{{$ctrl.thumbFeedbackRightEdge}}"></awsdocs-thumb-feedback>
                              </div>
                              <noscript>
                                 <div>
                                    <div>
                                       <div>
                                          <div id="js_error_message">
                                             <p><img src="https://d1ge0kk1l5kms0.cloudfront.net/images/G/01/webservices/console/warning.png" alt="Warning" /> <strong>Javascript is disabled or is unavailable in your
                                                   browser.</strong></p>
                                             <p>To use the Amazon Web Services Documentation, Javascript must be
                                                enabled. Please refer to your browser's Help pages for instructions.
                                             </p>
                                          </div>
                                       </div>
                                    </div>
                                 </div>
                              </noscript>
                              <div id="main-col-footer" class="awsui-util-font-size-0">
                                 <div id="doc-conventions"><a target="_top" href="/general/latest/gr/docconventions.html">Document Conventions</a></div>
                                 <div class="prev-next">
                                    <div id="previous" class="prev-link" accesskey="p" href="./mqtt.html">MQTT</div>
                                    <div id="next" class="next-link" accesskey="n" href="./topics.html">MQTT topics</div>
                                 </div>
                              </div>
                              <awsdocs-page-utilities></awsdocs-page-utilities>
                           </div>
                           <div id="quick-feedback-yes" style="display: none;">
                              <div class="title">Did this page help you? - Yes</div>
                              <div class="content">
                                 <p>Thanks for letting us know we're doing a good
                                    job!
                                 </p>
                                 <p>If you've got a moment, please tell us what we did right
                                    so we can do more of it.
                                 </p>
                                 <p>
                                    <awsui-button id="fblink" target="_blank" text="Feedback" click="linkClick($event)" href="https://docs.aws.amazon.com/forms/aws-doc-feedback?hidden_service_name=IoT Docs&amp;topic_url=https://docs.aws.amazon.com/en_us/iot/latest/developerguide/http.html"></awsui-button>
                                 </p>
                              </div>
                           </div>
                           <div id="quick-feedback-no" style="display: none;">
                              <div class="title">Did this page help you? - No</div>
                              <div class="content">
                                 <p>Thanks for letting us know this page needs work. We're
                                    sorry we let you down.
                                 </p>
                                 <p>If you've got a moment, please tell us how we can make
                                    the documentation better.
                                 </p>
                                 <p>
                                    <awsui-button id="fblink" target="_blank" text="Feedback" click="linkClick($event)" href="https://docs.aws.amazon.com/forms/aws-doc-feedback?hidden_service_name=IoT Docs&amp;topic_url=https://docs.aws.amazon.com/en_us/iot/latest/developerguide/http.html"></awsui-button>
                                 </p>
                              </div>
                           </div>
                        </div>
                     </body>
                  </div>
               </awsdocs-view>
               <div class="page-loading-indicator" id="page-loading-indicator">
                  <awsui-spinner size="large"></awsui-spinner>
               </div>
            </div>
            <div id="tools-panel" dom-region="tools">
               <awsdocs-tools-panel id="awsdocs-tools-panel"></awsdocs-tools-panel>
            </div>
         </awsui-app-layout>
         <awsdocs-cookie-banner class="doc-cookie-banner"></awsdocs-cookie-banner>
         <!--
                SiteCatalyst code version: H.25.2.
                Copyright 1996-2012 Adobe, Inc. All Rights Reserved
                More info available at http://www.omniture.com
            --><script language="JavaScript" type="text/javascript">
var awsdocs = awsdocs || {};
awsdocs.prop66 = 'AWS IoT Core';
awsdocs.prop65 =  'Developer Guide';
            </script><script src="https://a0.awsstatic.com/s_code/js/3.0/awshome_s_code.js" language="JavaScript" type="text/javascript"></script>
         <!--/DO NOT REMOVE/-->
         <!--End SiteCatalyst code version: H.25.2.--></div>
   </body>
</html>