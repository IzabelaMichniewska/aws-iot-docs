<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" ng-app="AWSDocsDocPageApp">
   <head>
      <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
      <title>Reducing messaging costs with basic ingest - AWS IoT Core</title>
      <meta name="viewport" content="width=device-width,initial-scale=1" />
      <meta name="assets_root" content="assets" />
      <meta name="target_state" content="iot-basic-ingest" />
      <meta name="default_state" content="iot-basic-ingest" />
      <link rel="icon" type="image/ico" href="/assets/images/favicon.ico" />
      <link rel="shortcut icon" type="image/ico" href="/assets/images/favicon.ico" />
      <link rel="canonical" href="https://docs.aws.amazon.com/iot/latest/developerguide/iot-basic-ingest.html" />
      <meta name="description" content="Learn how to use Basic Ingest to send data to an AWS IoT rule without incurring messaging costs." />
      <meta name="deployment_region" content="IAD" />
      <meta name="product" content="AWS IoT Core" />
      <meta name="guide" content="Developer Guide" />
      <meta name="locales" content="de_de:Deutsch/en_us:English/es_es:Español/fr_fr:Français/it_it:Italiano/ja_jp:日本語/ko_kr:한국어/pt_br:Português/zh_cn:中文 (简体)/zh_tw:中文 (繁體)" />
      <meta name="abstract" content="AWS IoT provides secure, bi-directional communication between Internet-connected devices such as sensors, actuators, embedded micro-controllers, or smart appliances and the AWS Cloud. This enables you to collect telemetry data from multiple devices, and store and analyze the data. You can also create applications that enable your users to control these devices from their phones or tablets." />
      <meta name="guide-locale" content="en_us" />
      <meta name="tocs" content="toc-contents.json" />
      <meta name="feedback-item" content="IoT Docs" />
      <meta name="this_doc_product" content="AWS IoT Core" />
      <meta name="this_doc_guide" content="Developer Guide" />
      <link href="assets/css/vendor4.css" rel="stylesheet" />
      <link href="assets/css/awsdocs-common.css" rel="stylesheet" /><script type="text/javascript" src="assets/js/vendor3.js" defer=""></script><script type="text/javascript" src="assets/js/vendor4.js" defer=""></script><script type="text/javascript" src="assets/js/vendor1.js" defer=""></script><script type="text/javascript" src="assets/js/awsdocs-common.js" defer=""></script><script type="text/javascript" src="assets/js/awsdocs-doc-app.js" defer=""></script></head>
   <body class="awsdocs awsui">
      <div class="awsdocs-container">
         <awsdocs-header></awsdocs-header>
         <awsui-app-layout id="app-layout" class="awsui-util-no-gutters" ng-controller="ContentController as $ctrl" header-selector="awsdocs-header" navigation-hide="false" navigation-width="$ctrl.navWidth" navigation-open="$ctrl.navOpen" navigation-change="$ctrl.onNavChange($event)" tools-hide="$ctrl.hideTools" tools-width="$ctrl.toolsWidth" tools-open="$ctrl.toolsOpen" tools-change="$ctrl.onToolsChange($event)">
            <div id="guide-toc" dom-region="navigation">
               <awsdocs-toc></awsdocs-toc>
            </div>
            <div id="main-column" dom-region="content" tabindex="-1">
               <awsdocs-view class="awsdocs-view">
                  <div id="awsdocs-content">
                     <head>
                        <title>Reducing messaging costs with basic ingest - AWS IoT Core</title>
                        <meta name="pdf" content="iot-dg.pdf#iot-basic-ingest" />
                        <meta name="kindle" content="https://www.amazon.com/dp/B07JBRCWWZ" />
                        <meta name="github" content="https://github.com/awsdocs/aws-iot-docs/tree/master/developerguide/iot-basic-ingest.md" />
                        <meta name="forums" content="http://forums.aws.amazon.com/forum.jspa?forumID=210" />
                        <meta name="feedback" content="https://docs.aws.amazon.com/forms/aws-doc-feedback?hidden_service_name=IoT%20Docs&amp;topic_url=http://docs.aws.amazon.com/en_us/iot/latest/developerguide/iot-basic-ingest.html" />
                        <meta name="feedback-yes" content="feedbackyes.html?topic_url=http://docs.aws.amazon.com/en_us/iot/latest/developerguide/iot-basic-ingest.html" />
                        <meta name="feedback-no" content="feedbackno.html?topic_url=http://docs.aws.amazon.com/en_us/iot/latest/developerguide/iot-basic-ingest.html" />
                        <meta name="keywords" content="AWS IoT,IoT,Internet of Things" />
                     </head>
                     <body>
                        <div id="main">
                           <div style="display: none"><a href="iot-dg.pdf#iot-basic-ingest" target="_blank" rel="noopener noreferrer" title="Open PDF"></a><a target="_blank" rel="noopener noreferrer" href="https://www.amazon.com/dp/B07JBRCWWZ" title="Open Kindle"></a><a href="https://github.com/awsdocs/aws-iot-docs/tree/master/developerguide/iot-basic-ingest.md" target="_blank" rel="noopener noreferrer" title="Edit this page on GitHub"></a></div>
                           <div id="breadcrumbs" class="breadcrumb"><a href="http://aws.amazon.com">AWS</a><a href="/index.html">Documentation</a><a href="/iot/index.html">AWS IoT Core</a><a href="what-is-aws-iot.html">Developer Guide</a></div>
                           <div id="page-toc-src"><a href="#iot-basic-ingest-use">Using basic ingest</a></div>
                           <div id="main-content" class="awsui-util-container">
                              <div id="main-col-body">
                                 <awsdocs-language-banner data-service="$ctrl.pageService"></awsdocs-language-banner>
                                 <h1 class="topictitle" id="iot-basic-ingest">Reducing messaging costs with basic ingest</h1>
                                 <div class="awsdocs-page-header-container">
                                    <awsdocs-page-header></awsdocs-page-header>
                                    <awsdocs-filter-selector id="awsdocs-filter-selector"></awsdocs-filter-selector>
                                 </div>
                                 <p>Basic Ingest enables you to securely send device data to the AWS services supported
                                    by <a href="./iot-rule-actions.html">AWS IoT rule actions</a> without incurring <a href="https://aws.amazon.com/iot-core/pricing/" rel="noopener noreferrer" target="_blank"><span>messaging costs</span><awsui-icon class="awsdocs-link-icon" name="external"></awsui-icon></a>. Basic Ingest optimizes
                                    data flow by removing the publish/subscribe message broker from the ingestion path,
                                    so it's more
                                    cost effective.
                                 </p>
                                 <p>To use Basic Ingest, you send messages from your devices or applications with topic
                                    names
                                    that start with <code class="code">$aws/rules/<code class="replaceable">rule-name</code></code> as their first
                                    three levels, where <code class="code"><code class="replaceable">rule-name</code></code> is the name of your AWS IoT
                                    rule to trigger.
                                 </p>
                                 <p>You can use an existing rule with Basic Ingest simply by adding the Basic Ingest prefix
                                    (<code class="code">$aws/rules/<code class="replaceable">rule-name</code></code>) to the message topic by which
                                    you normally trigger the rule. For example, if you have a rule named
                                    <code class="code">BuildingManager</code> that is triggered by messages with topics like
                                    <code class="code">Buildings/Building5/Floor2/Room201/Lights</code> (<code class="code">"sql": "SELECT * FROM
                                       'Buildings/#'"</code>), you can trigger the same rule with Basic Ingest by sending a message
                                    with topic
                                    <code class="code">$aws/rules/BuildingManager/Buildings/Building5/Floor2/Room201/Lights</code>.
                                 </p>
                                 <p>Be aware that:</p>
                                 <div class="itemizedlist">
                                     
                                     
                                    
                                    <ul class="itemizedlist" type="disc">
                                       <li class="listitem">
                                          
                                          <p>Your devices and rules cannot subscribe to Basic Ingest reserved topics. For more
                                             information, see <a href="./reserved-topics.html">Reserved topics</a>.
                                          </p>
                                          
                                       </li>
                                       <li class="listitem">
                                          
                                          <p>If you need a publish/subscribe broker to distribute messages to multiple subscribers
                                             (for example, to deliver messages to other devices and the rules engine), you should
                                             continue to use the AWS IoT message broker to handle the message distribution. Just
                                             publish
                                             your messages on topics other than Basic Ingest topics.
                                          </p>
                                          
                                       </li>
                                    </ul>
                                 </div>
                                 
                                 <h2 id="iot-basic-ingest-use">Using basic ingest</h2>
                                 
                                 
                                 <p>Make sure your device or application is using a <a href="./iot-policies.html">policy</a>
                                    that has publish permissions on <code class="code">$aws/rules/*</code>. Or you can specify permission for
                                    individual rules with <code class="code">$aws/rules/<code class="replaceable">rule-name</code>/*</code> in the
                                    policy. Otherwise, your devices and applications can continue to use their existing
                                    connections with AWS IoT Core.
                                 </p>
                                 
                                 
                                 <p>When the message reaches the rules engine, there is no difference in execution or
                                    error
                                    handling between rules triggered from Basic Ingest and those triggered through message
                                    broker
                                    subscriptions.
                                 </p>
                                 
                                 
                                 <p>You can, of course, create rules for use with Basic Ingest. Keep in mind the
                                    following:
                                 </p>
                                 
                                 
                                 <div class="itemizedlist">
                                     
                                     
                                     
                                     
                                     
                                    
                                    <ul class="itemizedlist" type="disc">
                                       <li class="listitem">
                                          
                                          <p>The initial prefix of a Basic Ingest topic
                                             (<code class="code">$aws/rules/<code class="replaceable">rule-name</code></code>) isn't available to the
                                             <a href="./iot-sql-functions.html#iot-function-topic">topic(Decimal)</a> function.
                                          </p>
                                          
                                       </li>
                                       <li class="listitem">
                                          
                                          <p>If you define a rule that is triggered only with Basic Ingest, the <code class="code">FROM</code>
                                             clause is optional in the <code class="code">sql</code> field of the <code class="code">rule</code> definition. It's
                                             still required if the rule is also triggered by other messages that must be sent through
                                             the message broker (for example, because those other messages must be distributed
                                             to
                                             multiple subscribers). For more information, see <a href="./iot-sql-reference.html">AWS IoT SQL reference</a>.
                                          </p>
                                          
                                       </li>
                                       <li class="listitem">
                                          
                                          <p>The first three levels of the Basic Ingest topic
                                             (<code class="code">$aws/rules/<code class="replaceable">rule-name</code></code>) are not counted toward
                                             the eight segment length limit or toward the 256 total character limit for a topic.
                                             Otherwise, the same restrictions apply as documented in <a href="https://docs.aws.amazon.com/general/latest/gr/iot-core.html#limits_iot">AWS IoT
                                                Limits</a>.
                                          </p>
                                          
                                       </li>
                                       <li class="listitem">
                                          
                                          <p>If a message is received with a Basic Ingest topic that specifies an inactive rule
                                             or
                                             a rule that doesn't exist, an error log is created in an Amazon CloudWatch log to
                                             help you with
                                             debugging. For more information, see <a href="./cwl-format.html#rule-engine-logs">Rules engine log entries</a>. A <code class="code">RuleNotFound</code> metric is indicated and
                                             you can create alarms on this metric. For more information, see Rule Metrics in <a href="./metrics_dimensions.html#rulemetrics">Rule metrics</a>.
                                          </p>
                                          
                                       </li>
                                       <li class="listitem">
                                          
                                          <p>You can still publish with QoS 1 on Basic Ingest topics. You receive a PUBACK after
                                             the message is successfully delivered to the rules engine. Receiving a PUBACK does
                                             not
                                             mean that your rule actions were completed successfully. You can configure an error
                                             action
                                             to handle errors during action execution. See <a href="./rule-error-handling.html">Error handling (error action)</a>.
                                          </p>
                                          
                                       </li>
                                    </ul>
                                 </div>
                                 
                                 
                                 
                                 <awsdocs-copyright class="copyright-print"></awsdocs-copyright>
                                 <awsdocs-thumb-feedback right-edge="{{$ctrl.thumbFeedbackRightEdge}}"></awsdocs-thumb-feedback>
                              </div>
                              <noscript>
                                 <div>
                                    <div>
                                       <div>
                                          <div id="js_error_message">
                                             <p><img src="https://d1ge0kk1l5kms0.cloudfront.net/images/G/01/webservices/console/warning.png" alt="Warning" /> <strong>Javascript is disabled or is unavailable in your
                                                   browser.</strong></p>
                                             <p>To use the Amazon Web Services Documentation, Javascript must be
                                                enabled. Please refer to your browser's Help pages for instructions.
                                             </p>
                                          </div>
                                       </div>
                                    </div>
                                 </div>
                              </noscript>
                              <div id="main-col-footer" class="awsui-util-font-size-0">
                                 <div id="doc-conventions"><a target="_top" href="/general/latest/gr/docconventions.html">Document Conventions</a></div>
                                 <div class="prev-next">
                                    <div id="previous" class="prev-link" accesskey="p" href="./topic-rule-destination-ca-list.html">Certificate authorities supported
                                       by HTTPS endpoints in topic rule destinations
                                    </div>
                                    <div id="next" class="next-link" accesskey="n" href="./iot-sql-reference.html">AWS IoT SQL reference</div>
                                 </div>
                              </div>
                              <awsdocs-page-utilities></awsdocs-page-utilities>
                           </div>
                           <div id="quick-feedback-yes" style="display: none;">
                              <div class="title">Did this page help you? - Yes</div>
                              <div class="content">
                                 <p>Thanks for letting us know we're doing a good
                                    job!
                                 </p>
                                 <p>If you've got a moment, please tell us what we did right
                                    so we can do more of it.
                                 </p>
                                 <p>
                                    <awsui-button id="fblink" target="_blank" text="Feedback" click="linkClick($event)" href="https://docs.aws.amazon.com/forms/aws-doc-feedback?hidden_service_name=IoT Docs&amp;topic_url=https://docs.aws.amazon.com/en_us/iot/latest/developerguide/iot-basic-ingest.html"></awsui-button>
                                 </p>
                              </div>
                           </div>
                           <div id="quick-feedback-no" style="display: none;">
                              <div class="title">Did this page help you? - No</div>
                              <div class="content">
                                 <p>Thanks for letting us know this page needs work. We're
                                    sorry we let you down.
                                 </p>
                                 <p>If you've got a moment, please tell us how we can make
                                    the documentation better.
                                 </p>
                                 <p>
                                    <awsui-button id="fblink" target="_blank" text="Feedback" click="linkClick($event)" href="https://docs.aws.amazon.com/forms/aws-doc-feedback?hidden_service_name=IoT Docs&amp;topic_url=https://docs.aws.amazon.com/en_us/iot/latest/developerguide/iot-basic-ingest.html"></awsui-button>
                                 </p>
                              </div>
                           </div>
                        </div>
                     </body>
                  </div>
               </awsdocs-view>
               <div class="page-loading-indicator" id="page-loading-indicator">
                  <awsui-spinner size="large"></awsui-spinner>
               </div>
            </div>
            <div id="tools-panel" dom-region="tools">
               <awsdocs-tools-panel id="awsdocs-tools-panel"></awsdocs-tools-panel>
            </div>
         </awsui-app-layout>
         <awsdocs-cookie-banner class="doc-cookie-banner"></awsdocs-cookie-banner>
         <!--
                SiteCatalyst code version: H.25.2.
                Copyright 1996-2012 Adobe, Inc. All Rights Reserved
                More info available at http://www.omniture.com
            --><script language="JavaScript" type="text/javascript">
var awsdocs = awsdocs || {};
awsdocs.prop66 = 'AWS IoT Core';
awsdocs.prop65 =  'Developer Guide';
            </script><script src="https://a0.awsstatic.com/s_code/js/3.0/awshome_s_code.js" language="JavaScript" type="text/javascript"></script>
         <!--/DO NOT REMOVE/-->
         <!--End SiteCatalyst code version: H.25.2.--></div>
   </body>
</html>